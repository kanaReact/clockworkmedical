!function(P,x,Lt){"use strict";var b,o,f,v,Mt={},Rt=P.TMEPOJS,e=P.wp,i=P.TMEPOQTRANSLATEXJS,_=P.noUiSlider,k=P.ClipboardEvent,F=P.DataTransfer,A=[],u=[],g=!1,y=!1,I=Lt("body"),Qt=Lt(P),E=Lt(x),C=Lt(P),H=P.tcmexp,N=P._,z=!1,a=Lt.fn.val;function w(t,i){t.toArray().forEach(function(t){(t=Lt(t)).find(":input").prop("disabled",function(t,e){var a=Lt(this).data("tc-state");return void 0===a?(Lt(this).data("tc-state",e),i):!1===a?i:a})})}function Ut(t,e){var a,i,o,r,c,n=0;return e&&(a=e.attr("data-taxable"),i=e.attr("data-tax-rate"),o=e.attr("data-prices-include-tax")||Rt.prices_include_tax,r=e.attr("data-tax-display-mode"),void 0!==(c=void 0!==e.data("current_variation")?e.data("current_variation"):c))&&(a=(c=e.data("current_variation")).tc_is_taxable,i=c.tc_tax_rate),a&&(i=parseFloat(i/100),"1"===o?n="incl"===r?(t=parseFloat(t))-t/(1+i):t*i:"incl"===r&&(n=t-t/(1+i)),n=Lt.epoAPI.math.toFloat(n)),n}function Q(t,e,a,i,o,r,c){var n,l,d,p,s,m,_,f,u;return Number.isFinite(parseFloat(t))||(t=0),t*=1e4,e&&(n=e.attr("data-taxable"),l=e.attr("data-tax-rate"),d=e.attr("data-prices-include-tax")||Rt.prices_include_tax,p=e.attr("data-is-vat-exempt"),s=e.attr("data-non-base-location-prices"),m=e.attr("data-taxes-of-one"),_=e.attr("data-base-taxes-of-one"),f=e.attr("data-modded-taxes-of-one"),void 0!==e.data("current_variation")?u=e.data("current_variation"):void 0!==o&&(u=o),void 0!==u&&(n=(u=e.data("current_variation")).tc_is_taxable,l=u.tc_tax_rate,s=u.tc_non_base_location_prices,m=u.tc_taxes_of_one,_=u.tc_base_taxes_of_one,f=u.tc_modded_taxes_of_one),a&&a.data("tax-obj")&&("no"===(l=a.data("tax-obj")).has_fee?n=!1:"yes"===l.has_fee&&(n=!0),""!==_&&void 0!==_||(_=l/100),void 0!==l.base_taxes_of_one&&(_=l.base_taxes_of_one),m=(l=l.tax_rate)/100),n)&&("1"!==d||i?(a||void 0===u||c)&&(t=parseFloat(t)+parseFloat(t)*m):"1"===p?t="1"===s?parseFloat(t)-m*t:parseFloat(t)-_*t:"1"===s&&(t=parseFloat(t)-_*t+f*t)),t/=1e4}function U(t,e,a,i,o,r,c){var n,l,d,p,s,m,_;return Number.isFinite(parseFloat(t))||(t=0),t*=1e4,e&&(_=e.attr("data-tax-display-mode"),n=e.attr("data-taxable"),l=e.attr("data-tax-rate"),d=e.attr("data-taxes-of-one"),p=e.attr("data-base-taxes-of-one"),s=e.attr("data-prices-include-tax"),void 0!==e.data("current_variation")?m=e.data("current_variation"):void 0!==o&&(m=o),void 0!==m&&(n=m.tc_is_taxable,l=m.tc_tax_rate,d=m.tc_taxes_of_one,p=m.tc_base_taxes_of_one),a&&a.data("tax-obj")&&("no"===(l=a.data("tax-obj")).has_fee?n=!1:"yes"===l.has_fee&&(n=!0),""!==p&&void 0!==p||(p=l/100),void 0!==l.base_taxes_of_one&&(p=l.base_taxes_of_one),l=l.tax_rate),n)&&("1"===s||i)&&"incl"!==_&&(a||void 0===m||i||c)&&(p===d?t=parseFloat(t)-parseFloat(d*t):t*=1-parseFloat(p)),t/=1e4}function $t(t,e,a,i,o,r,c){return Number.isFinite(parseFloat(t))||(t=0),t=e?("incl"===(e.attr("data-tax-display-mode")||Rt.tax_display_mode)?Q:U)(t,e,a,o,r,0,c):t}function Jt(t,e){e=Lt.extend({symbol:"",format:"",decimal:Mt.localDecimalSeparator,thousand:Mt.localThousandSeparator,precision:Rt.currency_format_num_decimals},e=e||{});return"yes"===Rt.tm_epo_trim_zeros&&"0"!==(t%1).toString()==!1&&(e.precision=0),Lt.epoAPI.applyFilter("tc_formatPrice",Lt.epoAPI.math.format(t,e),e,t)}function c(t,e){return e+Jt(t,{symbol:Rt.currency_format_symbol,format:Rt.currency_format})}function Zt(t,e,a,i,o){var r=Rt.option_plus_sign+" ";return a||(t=$t(t,e,i)),a=Math.abs(t),"minus"===Rt.tm_epo_global_options_price_sign&&(r=""),c(a,r=t<0?Rt.option_minus_sign+" ":r)}function B(t,e,a,i,o,r){return t=a?t:$t(t,e,i,0,r)}function Kt(t){return 0<t.find("input.variation_id").length?"input.variation_id":"input.product-variation-id"}function te(t){var e=t.find(Mt.qtySelector).last();return 0===e.length&&(e=t.find(Mt.associateQtySelector).last()),e=Lt.epoAPI.applyFilter("tc_getQtyElement",e,t)}function $(t,e,a){A[A.length]={name:t,selector:e,func:a}}function q(e,a,i,o){var r,c=!0,n=!1;return e=Lt(e),(r=e.filter(".tc-epo-field-product")).length&&void 0===r.data("islogicinit")&&(n=!0),e.toArray().forEach(function(t){!c&&e.has(".tc-epo-field-product").length?(n||r.is(".tcdisabled"))&&(o?l(t):d(t,a,i)):c=o?l(t):d(t,a,i)&&c}),c}function l(t){var e,a,i,o;return(t=Lt(t)).is(".cpf-element")?t=(e=t).find(".tmcp-field, .tmcp-fee-field"):e=t.closest(".cpf-element"),o=e.closest(".cpf-section"),(t=!t.is(".tc-epo-field-product")&&e.closest(".cpf-type-product")).length&&(a=t.data("isactive"),i=(t=t.closest(".cpf-section")).data("isactive")),!1!==a&&!1!==i&&!1!==e.data("isactive")&&!1!==o.data("isactive")}function d(t,e,a){var i,o,r,c,n,l;return(t=Lt(t)).is(".cpf-element")?t=(i=t).find(".tmcp-field, .tmcp-fee-field"):i=t.closest(".cpf-element"),l=(n=i.closest(".cpf-section")).closest(".tm-extra-product-options-field"),a=a?t.closest(".tmcp-ul-wrap"):i,t.is(".tc-epo-field-product")&&void 0===t.data("islogicinit")&&t.data("islogicinit",1),t.is(".tc-force-disabled")||((o=!t.is(".tc-epo-field-product")&&i.closest(".cpf-type-product")).length&&((c=o.find(Mt.associateQtySelector)).length&&(0<Lt.epoAPI.math.toFloat(c.val())?(t.removeClass("ignore"),c.removeClass("ignore")):(t.addClass("ignore"),c.addClass("ignore"))),c=o.data("isactive"),r=(o=o.closest(".cpf-section")).data("isactive")),!1===c)||!1===r||!1===i.data("isactive")||!1===n.data("isactive")?(t.is(".cpf-element")||(t.prop("disabled",!0).removeClass("tcenabled").addClass("tcdisabled"),void 0!==t.data("tc-state")&&t.data("tc-state",!0),i.find(".tm-qty, .tc-qty-button").prop("disabled",!0),t.is(".tmcp-upload")&&t.next(".tmcp-upload-hidden").length&&t.next(".tmcp-upload-hidden").removeClass("tcenabled").addClass("tcdisabled").prop("disabled",!0)),i.removeClass("tc-container-enabled").addClass("tc-container-disabled"),i.find(".product-variation-id, .tc-epo-field-product-counter").prop("disabled",!0),t.trigger({type:"tm-field-is-active",field:t,value:!1}),0===n.find(".cpf-element.tc-container-enabled").length&&(n.addClass("section-disabled"),0===l.children(".cpf-section").filter(function(){return!Lt(this).hasClass("section-disabled")}).length)&&l.addClass("tc-hidden"),0===i.closest(".tc-tab-slide").find(".cpf-element.tc-container-enabled").length&&i.closest(".owl-item").addClass("tc-hidden-visibility"),!1):(o=t.first(),t.prop("disabled",!1),void 0!==t.data("tc-state")&&t.data("tc-state",!1),"yes"!==Rt.tm_epo_show_only_active_quantities?o.is(":radio, .cpf-type-radio")||o.is(":checkbox, .cpf-type-checkbox")?(t.filter(":checked").closest(".tmcp-field-wrap").find(".tm-qty, .tc-qty-button").prop("disabled",!1),t.not(":checked").closest(".tmcp-field-wrap").find(".tm-qty, .tc-qty-button").prop("disabled",!0)):(o.is("select, .cpf-type-select, .cpf-type-selectmultiple"),o.val()?a.find(".tm-qty, .tc-qty-button").prop("disabled",!1):a.find(".tm-qty, .tc-qty-button").prop("disabled",!0)):e||i.find(".tm-quantity").trigger("showhide.cpfcustom"),o.is(".cpf-element")||(t.removeClass("tcdisabled").addClass("tcenabled"),t.is(".tmcp-upload")&&t.next(".tmcp-upload-hidden").length&&t.next(".tmcp-upload-hidden").removeClass("tcdisabled").addClass("tcenabled").prop("disabled",!1)),i.removeClass("tc-container-disabled").addClass("tc-container-enabled"),i.find(".product-variation-id, .tc-epo-field-product-counter").prop("disabled",!1),t.trigger({type:"tm-field-is-active",field:t,value:!0}),n.removeClass("section-disabled"),l.removeClass("tc-hidden"),i.closest(".owl-item").removeClass("tc-hidden-visibility"),!0)}function J(t,e,a){var i,o,r=Lt(t),c=r.attr("data-epo_id")||r.attr("data-epo-id"),n=r.attr("data-product_id")||r.attr("data-product-id"),l=Lt('.variations_form[data-epo_id="'+c+'"][data-product_id="'+n+'"]'),l=Lt.epoAPI.applyFilter("tm_variation_check_match_variationsForm",l,c,n,r);if("variation"===r.attr("data-product_type")&&(l=r,o=n),0!==l.length||!r.is(".cpf-type-variations")||c||n||(l=r.closest(".tc-epo-element-product-container")).length&&(o=l.attr("data-product_id")),0!==l.length)switch(o=o||((o=0===(o=l.find('input[name^="variation_id"]')).length&&0===(o=l.find("input.variation_id")).length?l.closest(".tc-epo-element-product-li-container").find(".product-variation-id"):o).length?o.val():0),null!==t&&null!==e&&void 0!==t&&void 0!==e&&!1!==t&&!1!==e&&(e=e?parseInt(e,10):-1),i=parseInt(o,10),Number.isFinite(i)||(i=0),Number.isFinite(e)||(e=0),a){case"is":return""!==i&&i===e;case"isnot":return""!==i&&i!==e;case"isempty":return""===i||0===i;case"isnotempty":return""!==i&&0!==i;case"startswith":return i.toString().startsWith(e);case"endswith":return i.toString().endsWith(e);case"greaterthan":return parseFloat(i)>parseFloat(e);case"lessthan":return parseFloat(i)<parseFloat(e);case"greaterthanequal":return parseFloat(i)>=parseFloat(e);case"lessthanequal":return parseFloat(i)<=parseFloat(e)}return!1}function S(t,e,a){if(null!==t&&null!==e)switch(t=encodeURIComponent(t),e=Lt.qtranxj_split?encodeURIComponent(Lt.qtranxj_split(decodeURIComponent(e))[i.language]):encodeURIComponent(decodeURIComponent(e)),t=t?t.toLowerCase():"",e=e?e.toLowerCase():"",t=t.toString(),e=e.toString(),a){case"is":return null!==t&&t===e;case"isnot":return null!==t&&t!==e;case"isempty":return!("undefined"!==t&&void 0!==t&&""!==t);case"isnotempty":return"undefined"!==t&&void 0!==t&&""!==t;case"startswith":return t.startsWith(e);case"endswith":return t.endsWith(e);case"greaterthan":return parseFloat(t)>parseFloat(e);case"lessthan":return parseFloat(t)<parseFloat(e);case"greaterthanequal":return parseFloat(t)>=parseFloat(e);case"lessthanequal":return parseFloat(t)<=parseFloat(e)}return!1}function Z(t){var a,e,i,o=t.element,r=t.rule.operator,c=t.rule.value,n=t.type,l=!1,d="";if("quantity"===n)return S(o.val(),c,r);if("productid"===n)return S(o,c,r);if("variation"===n)return J(o,c,r);if("variationattributes"===n){var p,s,n=o,m=t.rule,n=Lt(n),_=m.value,f=m.operator,u=n.attr("data-epo_id")||n.attr("data-epo-id"),g=n.attr("data-product_id")||n.attr("data-product-id"),h=Lt('.variations_form[data-epo_id="'+u+'"][data-product_id="'+g+'"]'),h=Lt.epoAPI.applyFilter("tm_variation_check_match_variationsForm",h,u,g,n);if(0!==(h="variation"===n.attr("data-product_type")?n:h).length||!n.is(".cpf-type-variations")||u||g||(h=n.closest(".tc-epo-element-product-container")).length&&h.attr("data-product_id"),0!==h.length&&(s=h.find('[name="attribute_'+m.taxonomy+'"]')).length)switch(p=s.find("option:selected").attr("value"),f){case"is":return""!==p&&p===_;case"isnot":return""!==p&&p!==_;case"isempty":return""===p||0===p;case"isnotempty":return""!==p&&0!==p;case"startswith":return p.toString().startsWith(_);case"endswith":return p.toString().endsWith(_)}}else if((o=Lt(t.element)).length){if(o.is(".cpf-section")){var v,y,b,u=o,w=r,g=u.find(".cpf-element"),x=!1;if(u.is(".tc-hidden")){if("isnotempty"===w)return;if("isempty"===w)return 1}return"isnotempty"===w?v=!1:"isempty"===w&&(v=!0),Lt(g).toArray().forEach(function(t){var e,a="";if((t=Lt(t)).is(".cpf-type-product")&&(a=":not("+Mt.associatedEpoSelector+" .tm-epo-field)"),q(t,void 0,void 0,!0))if(0<(e=t.attr("class").split(" ").map(function(t){return-1!==t.indexOf("cpf-type-",0)?t:null}).filter(function(t){return null!=t?t:null})).length){switch("cpf-type-product"===(e=e[0])&&(x=!0,e=t.is(".cpf-type-product-mode-product")||t.is(".cpf-type-product-checkbox")||t.is(".cpf-type-product-thumbnailmultiple")||t.is(".cpf-type-product-custombundle")?"cpf-type-checkbox":t.is(".cpf-type-product-dropdown")?"cpf-type-select":"cpf-type-radio"),e){case"cpf-type-radio":b=t.find("input.tm-epo-field.tmcp-radio:checked"+a),"isnotempty"===w?(v=v||0<b.length,0<b.length&&(y=b.length)):"isempty"===w&&(v=v&&0===b.length);break;case"cpf-type-checkbox":b=t.find("input.tm-epo-field.tmcp-checkbox:checked"+a),"isnotempty"===w?(v=v||0<b.length,0<b.length&&(y=b.length)):"isempty"===w&&(v=v&&0===b.length);break;case"cpf-type-select":(y=t.find("select.tm-epo-field.tmcp-select"+a).val())&&!x&&(y=y.slice(0,y.lastIndexOf("_")));break;case"cpf-type-selectmultiple":(y=t.find("select.tm-epo-field.tmcp-selectmultiple"+a).val())&&!x&&y.forEach(function(t,e){y[e]=t.slice(0,t.lastIndexOf("_"))});break;default:y=t.find(".tm-epo-field"+a).val()}Array.isArray(y)?"isnotempty"===w?v=v||y.some(function(t){return S(t,"",w)}):"isempty"===w&&(v=v&&y.every(function(t){return S(t,"",w)})):"isnotempty"===w?v=v||S(y,"",w):"isempty"===w&&(v=v&&S(y,"",w))}else v=!1}),v}if(o.is(".cpf-type-product")&&(d=":not("+Mt.associatedEpoSelector+" .tm-epo-field)"),0<(n=o.attr("class").split(" ").map(function(t){return-1!==t.indexOf("cpf-type-",0)?t:null}).filter(function(t){return null!=t?t:null})).length){switch("cpf-type-product"===(n=n[0])&&(l=!0,n=o.is(".cpf-type-product-mode-product")||o.is(".cpf-type-product-checkbox")||o.is(".cpf-type-product-thumbnailmultiple")||o.is(".cpf-type-product-custombundle")?"cpf-type-checkbox":o.is(".cpf-type-product-dropdown")?"cpf-type-select":"cpf-type-radio"),n){case"cpf-type-radio":if(e=o.find("input.tm-epo-field.tmcp-radio:checked"+d),"is"===r||"isnot"===r){if(0===e.length&&"is"===r)return;if(0===e.length&&"isnot"===r)return 1}if("isnotempty"===r)return 0<e.length;if("isempty"===r)return 0===e.length;(a=o.find("input.tm-epo-field.tmcp-radio:checked"+d).val())&&!l&&(a=a.slice(0,a.lastIndexOf("_")));break;case"cpf-type-checkbox":if(e=o.find("input.tm-epo-field.tmcp-checkbox:checked"+d),"is"===r||"isnot"===r)return(0!==e.length||"is"!==r)&&(0===e.length&&"isnot"===r||(i=!1,e.toArray().forEach(function(t){if(S(a=(a=Lt(t).val())&&!l?a.slice(0,a.lastIndexOf("_")):a,c,r))i=!0;else if("isnot"===r)return i=!1}),i));if("isnotempty"===r)return 0<e.length;if("isempty"===r)return 0===e.length;break;case"cpf-type-select":(a=o.find("select.tm-epo-field.tmcp-select"+d).val())&&!l&&(a=a.slice(0,a.lastIndexOf("_")));break;case"cpf-type-selectmultiple":(a=o.find("select.tm-epo-field.tmcp-selectmultiple"+d).val())&&!l&&a.forEach(function(t,e){a[e]=t.slice(0,t.lastIndexOf("_"))});break;case"cpf-type-variations":return J(o,c,r);default:a=o.find(".tm-epo-field"+d).val()}return Array.isArray(a)?a.some(function(t){return S(t,c,r)}):S(a,c,r)}}}function r(t,_){t.toArray().forEach(function(t){var e,a,i,o,r,c,n,l=Lt(t),d=l.data("matches"),t=l.data("toggle"),p=l.data("fields"),s=[],m="show"!==t;if(p){for(n=(c=l.closest(".tc-section-fields")).is(".tc-repeater-section"),a=0;a<p.length;a++)if(e=p[a],Array.isArray(e))for(o=s[a]=0;o<e.length;o++)i=e[o],n&&(i.element=c.find('[data-uniqid="'+i.element.attr("data-uniqid")+'"')),("cpflogic"!==_||q(Lt(i.element),void 0,void 0,!0))&&Z(i)&&(s[a]=(s[a]||0)+1);for(r=0;r<d.length;r++)if(parseInt(s[r],10)===parseInt(d[r],10)){m=!m;break}m?("cpflogic"!==_||l.data("did_initial_activation")||u.push(function(){var t=l.find(".tm-epo-field.tcenabled");t.toArray().forEach(function(t){(t=Lt(t)).data("initial_activation")||l.closest(".cpf-section").is(".tc-hidden")||!q(t)||(t.trigger("tc_element_epo_rules"),t.data("initial_activation",1))}),(l.is(".cpf-element")&&t.length||l.is(".cpf-section"))&&l.data("did_initial_activation",1)}),l.removeClass("tc-hidden")):l.addClass("tc-hidden"),l.data("isactive",m).trigger("tc-logic")}})}function T(t){var e,a=[];Lt(t).length||(t="body"),(e=(t=Lt(t)).find(".iscpfdependson")).toArray().forEach(function(t){Lt(t).toArray().forEach(function(t){r(Lt(t))})}),e.toArray().forEach(function(t){Lt(t).toArray().forEach(function(t){r(Lt(t),"cpflogic")})}),e.toArray().forEach(function(t){Lt(t).toArray().forEach(function(t){(t=(t=Lt(t)).is(".cpf-section")?t.find(".cpf-element"):t).toArray().forEach(function(t){var t=Lt(t),e=t.find(".tm-epo-field");q(0<e.length?e:t)})})}),u.forEach(function(t){t()}),u=[],Lt().selectric&&Lt(".tm-extra-product-options select").selectric("refresh"),setTimeout(function(){Lt(".tm-owl-slider").toArray().forEach(function(t){Lt(t).trigger("refresh.owl.carousel")})},200),t.find(".tm-product-image:checked,select.tm-product-image").toArray().forEach(function(t){q(t=Lt(t))&&""!==t.val()&&a.push(t)}),a.length?a[a.length-1].trigger("tm_trigger_product_image"):(e=t.data("epo_object"))&&e.main_product.trigger("tm_restore_product_image"),Qt.trigger("cpflogicrun"),Qt.trigger("tmlazy"),Qt.trigger("cpflogicdone")}function W(t){return"object"==typeof t&&"toggle"in t&&"rules"in t&&0<t.rules.length}function X(t){return t.what&&("all"===t.what?t.rules=[t.rules]:"any"===t.what&&(t.rules=t.rules.reduce(function(t,e){return t.push([e]),t},[])),delete t.what),t}function V(t,e){var a="element";if("product-properties"===t)switch(String(e)){case"0":a="quantity";break;case"1":a="productid";break;case"2":a="variation";break;case"3":a="variationattributes"}return a}function G(r){var c,n,l,d,p,s,m,_,f,u,t=r.this_epo_container,g=Lt(t),t=g.find(".cpf-section").not(".cpf-type-product .cpf-section"),e='[data-haslogic="1"]',h=!g.is(".cpf-section")&&t;r.is_associated||(e='[data-haslogic="1"]:not(".cpf-type-product .cpf-section")'),g.toArray().forEach(function(t){(Lt(t).is(".cpf-section")?Lt(t):Lt(t).find(".cpf-section")).filter(e).toArray().forEach(function(t){var e,a,i,o;if(c=Lt(t),n=X(c.data("logic")),l=parseInt(c.data("haslogic"),10),d=[],u=c.parent().closest(".cpf-type-product"),1===l&&W(n)){for(i=0;i<n.rules.length;i++)if((e=n.rules[i])&&Array.isArray(e))for(d[i]=[],o=0;o<e.length;o++)a=e[o],p=a.section,s=a.element,"quantity"===(m=V(p,s))?f=u.length?r.main_cart.find(Mt.associateQtySelector):r.main_cart.find(r.qtySelector):"productid"===m?f=r.product_id:"variation"===m||"variationattributes"===m?u.length?(f=u.find(".tc-epo-element-product-container")).length||(f=u.closest(".tc-epo-element-product-container")):f=g:f=h?u.length?(_=g.find(".cpf-section").filter("[data-uniqid='"+p+"']"),s!==p?_.find(".cpf-element").eq(s):_):(_=h.filter("[data-uniqid='"+p+"']"),s!==p?_.find(".cpf-element:not(.cpf-element .cpf-element)").eq(s):_):s!==p?g.find(".cpf-element").eq(s):_=g.find(".cpf-section").filter("[data-uniqid='"+p+"']"),d[i].push({element:f,rule:a,type:m});c.data("iscpfdependson")?c.cpfdependson(c.data("cpfdependson-fields"),n.toggle,!0,r):(c.data("cpfdependson-fields",d),c.cpfdependson(d,n.toggle,!1,r))}})})}function Y(c){var n,l,d,p,s,m,_,f,u,g,t=c.this_epo_container,h=Lt(t),t=h.find(".cpf-section").not(".cpf-type-product .cpf-section"),v=!1,e='.cpf-element[data-haslogic="1"]';h.parent().is(Mt.associatedEpoSelector)&&(t=h.find(".cpf-section"),v=!0),n=!h.is(".cpf-section")&&t,c.is_associated||(e='.cpf-element[data-haslogic="1"]:not(".cpf-type-product .cpf-element")'),h.find(e).toArray().forEach(function(t){var e,a,i,o,r=[];if(l=Lt(t),d=X(l.data("logic")),p=parseInt(l.data("haslogic"),10),g=v?h:l.parent().closest(".cpf-type-product"),1===p&&W(d)){for(i=0;i<d.rules.length;i++)if((e=d.rules[i])&&Array.isArray(e))for(r[i]=[],o=0;o<e.length;o++)a=e[o],s=a.section,m=a.element,"quantity"===(_=V(s,m))?u=g.length?c.main_cart.find(Mt.associateQtySelector):c.main_cart.find(c.qtySelector):"productid"===_?u=c.product_id:"variation"===_||"variationattributes"===_?g.length?(u=g.find(".tc-epo-element-product-container")).length||(u=g.closest(".tc-epo-element-product-container")):u=h:u=n?g.length?(f=h.find(".cpf-section").filter("[data-uniqid='"+s+"']"),m!==s?f.find(".cpf-element").eq(m):f):(f=n.filter("[data-uniqid='"+s+"']"),m!==s?f.find(".cpf-element:not(.cpf-element .cpf-element)").eq(m):f):m!==s?h.find(".cpf-element").eq(m):f=h.find(".cpf-section").filter("[data-uniqid='"+s+"']"),r[i].push({element:u,rule:a,type:_});l.data("iscpfdependson")?l.cpfdependson(l.data("cpfdependson-fields"),d.toggle,!0,c):(l.data("cpfdependson-fields",r),l.cpfdependson(r,d.toggle,!1,c))}})}function j(t,e,a){var i,o,r;return t=e&&(i=e.attr("data-taxable"),o=e.attr("data-tax-rate"),r=e.attr("data-tax-display-mode"),e=e.attr("data-prices-include-tax"),a||i&&"incl"===r&&"1"!==e)?parseFloat(t)/(1+o/100):t}function n(t,e,a){var i,o,r;return t=e&&(i=e.attr("data-taxable"),o=e.attr("data-tax-rate"),r=e.attr("data-tax-display-mode"),e=e.attr("data-prices-include-tax"),a||i&&"incl"!==r&&"1"===e)?parseFloat(t)*(1+o/100):t}function K(t,e,a){var i,o,r;if(e&&(i=e.attr("data-taxable"),o=e.attr("data-tax-display-mode"),r=e.attr("data-prices-include-tax"),i)){if(a&&a.tc_tax_rate&&"0"===String(a.tc_tax_rate))return t;"1"===r?"incl"===o?a.tc_base_taxes_of_one!==a.tc_modded_taxes_of_one&&(t=parseFloat((1-a.tc_taxes_of_one)*t*(1/(1-a.tc_base_taxes_of_one)))):t=n(t,e):"1"!==r&&"incl"===o&&(t=j(t,e))}return t}function Wt(t,e,a,i){var o="";return a||(t=$t(t,e,i,0,!0)),c(Math.abs(t),o=t<0?Rt.minus_sign+" ":o)}function Xt(t,e,a,i){return"excl"===i.attr("data-tax-display-mode")?(a[t]=a[t].replace(/{price_excluding_tax}/g,Wt(a[e],i,!0)),a[t]=a[t].replace(/{price_including_tax}/g,Wt(n(a[e],i,!0),i,!0))):(a[t]=a[t].replace(/{price_including_tax}/g,Wt(a[e],i,!0)),a[t]=a[t].replace(/{price_excluding_tax}/g,Wt(j(a[e],i,!0),i,!0))),a}function ee(t,e,a){return t="excl"===a.attr("data-tax-display-mode")?(t=t.replace(/{price_excluding_tax}/g,Wt(e,a,!0))).replace(/{price_including_tax}/g,Wt(n(e,a,!0),a,!0)):(t=t.replace(/{price_including_tax}/g,Wt(e,a,!0))).replace(/{price_excluding_tax}/g,Wt(j(e,a,!0),a,!0))}function ae(t,e,a,i,o,r){L({epoObject:t,obj:e,price:a,formatted_price:i,original_price:o,force:!0,useFormattedPrice:r})}function L(t){var e,a,i,o,r,c,n,l,d,p=Lt(t.obj);0!==p.length&&(e=p.closest(".tmcp-field-wrap"),a=p.closest(".tc-price-wrap"),l=e.find(".tm-epo-field"),i=t.price||0,o=t.formatted_price||"",d=t.original_price||"",n=t.force||!1,r=t.useFormattedPrice||!1,t=t.epoObject.this_epo_totals_container,n||"1"!==l.attr("data-no-price-change")||!l.data("price-changed"))&&(i=Lt.epoAPI.applyFilter("tc_adjust_update_price_price",i),o=Lt.epoAPI.applyFilter("tc_adjust_update_price_formatted_price",o,i),d=Lt.epoAPI.applyFilter("tc_adjust_update_price_original_price",d),Number.isFinite(parseFloat(d))||(d=0),Number.isFinite(parseFloat(i))||(i=0),e=e.find(".before-amount,.after-amount"),("yes"!==Rt.tm_epo_auto_hide_price_if_zero||!1!==Lt.epoAPI.util.isEmpty(i)&&("yes"!==Rt.tm_epo_no_hide_price_if_original_not_zero||!0!==Lt.epoAPI.util.isEmpty(i)||!1!==Lt.epoAPI.util.isEmpty(d)))&&"yes"===Rt.tm_epo_auto_hide_price_if_zero||!0===Lt.epoAPI.util.isEmpty(i)&&"1"===l.attr("data-no-price")||!n&&0<l.length&&("1"===l.attr("data-no-price")||"variable"===l.attr("data-type")&&!l.data("price"))?(a.addClass("tm-hidden"),p.addClass("tm-hidden"),p.empty(),e.addClass("tm-hidden")):(n=d&&void 0!==d&&parseFloat(d)!==parseFloat(i)?r?(c=Mt.templateEngine.plain_price,{price:o}):(i<0&&!d<0?(c=Mt.templateEngine.sale_price_m10,i=Math.abs(i)):!i<0&&d<0?(c=Mt.templateEngine.sale_price_m01,d=Math.abs(d)):i<0&&d<0?(c=Mt.templateEngine.sale_price_m11,i=Math.abs(i),d=Math.abs(d)):c=Mt.templateEngine.sale_price,{price:Jt(d),sale_price:Jt(i)}):r?(c=Mt.templateEngine.plain_price,{price:o}):(c=Mt.templateEngine.price,i<0&&(c=Mt.templateEngine.price_m,i=Math.abs(i)),{price:Jt(i)}),l=ee(Lt.epoAPI.util.decodeHTML(Lt.epoAPI.template.html(c,n)),i,t),d="",!r&&0<i&&"minus"!==Rt.tm_epo_global_options_price_sign&&(d=Rt.option_plus_sign+" "),p.html(d+l),a.removeClass("tm-hidden"),p.removeClass("tm-hidden"),e.removeClass("tm-hidden")))}function p(i,n,t){var e,a,o,l=[],d=(e=i,a={},(e=(t=t).thisForm?t.thisForm:e).find(".variations select, .tc-epo-variable-product-selector").toArray().forEach(function(t){var e=void 0!==(t=Lt(t)).data("attribute_name")?t.data("attribute_name"):t.attr("name"),t=t.val();a[e]=t}),a),r=!0,t="0"!==(t=i.find(Kt(i)).val())&&""!==t||0<i.find(".cpf-type-variations").find(".tm-epo-variation-element:checked").length||i.find(".cpf-type-variations").find('.tm-epo-variation-element option[value!=""]:selected');if(t&&(i.find(".cpf-type-variations").toArray().forEach(function(t,o){var r,c,t=Lt(t).find(".tm-epo-variation-element"),a=!1;l[o]=!0,t.is("select")?(r=Lt.epoAPI.dom.id(t.attr("data-tm-for-variation")),(c=t.val())&&(l[o]=!1),t.children("option").toArray().forEach(function(e){a=!1,i.find("[data-attribute_name='attribute_"+r+"']").children("option").toArray().forEach(function(t){if(Lt(t).attr("value")===Lt(e).attr("value"))return!(a=!0)}),a?Lt(e).prop("disabled",!1).show():Lt(e).prop("disabled",!0).hide()})):t.toArray().forEach(function(t){var t=Lt(t),e=t.closest("li"),a=e.find(".tm-epo-variation-element"),i=Lt.extend(!0,{},d);r=t.attr("data-tm-for-variation"),c=t.val(),t.is(":checked")&&(l[o]=!1),i["attribute_"+r]=c,(i=(i=Lt.fn.tm_find_matching_variations(n,i).shift())&&"is_in_stock"in i&&i.is_in_stock)?(t.prop("disabled",!1).removeClass("tm-disabled"),e.removeClass("pointereventsoff tm-attribute-disabled").fadeTo("fast",1,function(){Lt(this).css("opacity","")}),a.prop("disabled",!1),a.removeAttr("data-tm-disabled")):(a.is(":checked")||i?e.removeClass("pointereventsoff"):e.addClass("pointereventsoff"),t.attr("disabled","disabled").addClass("tm-disabled"),a.attr("disabled","disabled"),a.attr("data-tm-disabled","disabled"),e.addClass("tm-attribute-disabled").fadeTo("fast",.5))})}),l)){for(l.shift(),o=0;o<l.length;o++)if(!1===l[o]){r=!1;break}r&&i.find(".cpf-type-variations").first().toArray().forEach(function(t){var e,a,t=Lt(t).find(".tm-epo-variation-element");t.is("select")||t.toArray().forEach(function(t){t=Lt(t),e=t.closest("li"),a=e.find(".tm-epo-variation-element"),t.prop("disabled",!1).removeClass("tm-disabled"),e.removeClass("tm-attribute-disabled").stop().css("opacity",""),a.prop("disabled",!1),a.removeAttr("data-tm-disabled")})})}}function tt(e,a){var t=e.data("product_variations"),i=parseInt(e.data("product_id"),10),o=e.data("globalVariationObject")||!1;!(i=i||e.data("tc_product_id"))&&e.is(Mt.compositeSelector)&&(i=e.find(".component_options").data("options_data")[0].option_id,t=t||e.find(".details.component_data").data("product_variations")),a.is_associated||!(t=!(t=!t&&P.product_variations&&P.product_variations.product_id?P.product_variations.product_id:t)&&P.product_variations?P.product_variations:t)&&P["product_variations_"+i]&&(t=P["product_variations_"+i]),t?p(e,t,a):o?p(e,o.variations,a):Lt.post(Rt.ajax_url,{action:"woocommerce_tm_get_variations_array",post_id:i},function(t){o=t,e.data("globalVariationObject",t),p(e,o.variations,a)},"json")}function et(t,e){var a,i,o,r;"no"!==Rt.tm_epo_global_move_out_of_stock&&((r=(r=t.find(".woocommerce-variation-availability").last()).length?r:t.find(".stock").last()).length?(e.find(".tm-stock").remove(),t=e,void 0!==(a=r.prop("outerHTML"))&&(o=(i=(t=Lt(t)).find(".tm-epo-variation-element").first()).closest(".tm-epo-variation-section"),i.length?(o.find(".tm-stock").remove(),o.append('<div class="tm-stock">'+a+"</div>")):(t.find(".tm-stock").remove(),t.find(".variations").after('<div class="tm-stock">'+a+"</div>")),1)&&r.remove()):e.find(".tm-stock").remove())}function at(t,e,a,i){return a=a||"form",t=t,i=i,o="",(t=0===(t=(e=(e=e)||t).find(Mt.addToCartSelector+(o=i?o+"[value='"+i+"']":o))).length?e.find(Mt.tcAddToCartSelector+o):t).last().closest(a);var o}function it(t,e,a,i){return at(t,e,a,i)}function Vt(t){var e=Lt.epoAPI.applyFilter("tcGetNativePricesBlockSelector",".single_variation .price",t);return Lt(t).find(e).not(".tc-price")}function ie(t,e){var a,i,o=e.showHideCart;e.is_associated||void 0===o||"yes"!==Rt.tm_epo_hide_add_cart_button&&"yes"!==Rt.tm_epo_hide_all_add_cart_button&&"yes"!==Rt.tm_epo_hide_required_add_cart_button||(a=t.find(Mt.addToCartButtonSelector).first(),i=t.find(Mt.qtySelector).first(),o?(a.removeClass("tc-hide-add-to-cart-button"),i.removeClass("tc-hide-add-to-cart-button")):(a.addClass("tc-hide-add-to-cart-button"),i.addClass("tc-hide-add-to-cart-button")),Qt.trigger("epoShowHideCart",{main_product:t,currentEpoObject:e,showHideCart:o,button:a,qty:i}))}function oe(t,e,a){var i,o,r,c=!0,n=!0,l=Lt.tcepo.oneOptionIsSelected[e];return t.is_associated?Lt.epoAPI.applyFilter("tc_currentEpoObject_associated",t,e,a):(i="object"==typeof a?(i=a.has_epo,o=a.this_epo_container,i&&(o.find(".tmcp-fee-field").length||o.find(".tmcp-field").not(".cpf-type-variations .tmcp-field").length)):a,t.showHideCart=void 0,t.showHideTotal=void 0,!i||"yes"!==Rt.tm_epo_hide_add_cart_button&&"yes"!==Rt.tm_epo_hide_all_add_cart_button&&"yes"!==Rt.tm_epo_hide_required_add_cart_button&&"yes"!==Rt.tm_epo_hide_totals_until_any&&"yes"!==Rt.tm_epo_hide_totals_until_all_required&&"yes"!==Rt.tm_epo_hide_totals_until_all||("yes"===Rt.tm_epo_hide_add_cart_button&&(c=l),"yes"===Rt.tm_epo_hide_totals_until_any&&(n=l),"yes"!==Rt.tm_epo_hide_required_add_cart_button&&"yes"!==Rt.tm_epo_hide_totals_until_all_required||(r=s(t.this_epo_container.find(".cpf-element").not(".cpf-type-variations").filter(".tc-container-enabled.tc-is-required")),"yes"===Rt.tm_epo_hide_required_add_cart_button&&(c=r),"yes"===Rt.tm_epo_hide_totals_until_all_required&&(n=r)),"yes"!==Rt.tm_epo_hide_all_add_cart_button&&"yes"!==Rt.tm_epo_hide_totals_until_all||(r=s(t.this_epo_container.find(".cpf-element").not(".cpf-type-variations").filter(".tc-container-enabled")),"yes"===Rt.tm_epo_hide_all_add_cart_button&&(c=r),"yes"===Rt.tm_epo_hide_totals_until_all&&(n=r)),t.showHideCart=c,t.showHideTotal=n,Lt.tcepo.showHideTotal[e]=n),Lt.epoAPI.applyFilter("tc_currentEpoObject",t,e,a))}function s(t,e){function a(t){var e,a,i="",o=!1;if((t=Lt(t)).is(".cpf-type-product")&&(i=":not("+Mt.associatedEpoSelector+" .tm-epo-field)"),0<(e=t.attr("class").split(" ").map(function(t){return-1!==t.indexOf("cpf-type-",0)?t:null}).filter(function(t){return null!=t?t:null})).length){switch("cpf-type-product"===(e=e[0])&&(o=!0,e=t.is(".cpf-type-product-mode-product")||t.is(".cpf-type-product-checkbox")||t.is(".cpf-type-product-thumbnailmultiple")||t.is(".cpf-type-product-custombundle")?"cpf-type-checkbox":t.is(".cpf-type-product-dropdown")?"cpf-type-select":"cpf-type-radio"),e){case"cpf-type-radio":return 0<t.find("input.tm-epo-field.tmcp-radio:checked"+i).length;case"cpf-type-checkbox":return 0<t.find("input.tm-epo-field.tmcp-checkbox:checked"+i).length;case"cpf-type-select":(a=t.find("select.tm-epo-field.tmcp-select"+i).val())&&!o&&(a=a.slice(0,a.lastIndexOf("_")));break;case"cpf-type-selectmultiple":(a=t.find("select.tm-epo-field.tmcp-selectmultiple"+i).val())&&!o&&a.forEach(function(t,e){a[e]=t.slice(0,t.lastIndexOf("_"))});break;default:a=t.find(".tm-epo-field"+i).val()}return Array.isArray(a)?a.some(function(t){return""!==t}):""!==a}return!1}return"some"===e?t.toArray().some(a):t.toArray().every(a)}function m(t,e){var a,i,o,r,c,n=Lt.tcepo.errorObject[e]||t;n&&("yes"!==Rt.tm_epo_disable_error_scroll&&(i=(a=n.closest(".cpf-section")).find(".tm-section-link"),o=n.closest(".cpf-element"),(r=n.closest(".cpf-type-product").closest(".cpf-section")).length&&r.find(".tm-toggle").length&&r.find(".tm-toggle").trigger("openwrap.tmtoggle"),a.find(".tm-toggle").length&&a.find(".tm-toggle").trigger("openwrap.tmtoggle"),void 0===P.tc_validation_offset&&(P.tc_validation_offset=-100),a.is(".section_popup")?(C.tcScrollTo(i,300,P.tc_validation_offset),i.trigger("click.tmsectionpoplink")):a.is(".tm-owl-slider-section")?(c=n.closest(".owl-item").index(),a.find(".tcowl-carousel").trigger("to.owl.carousel",[c,100]),setTimeout(function(){a.find(".tcowl-carousel").trigger("refresh.owl.carousel"),0<o.length&&C.tcScrollTo(o,300,P.tc_validation_offset)},200)):a.is(".tc-tabs-section")?(c=n.closest(".tc-tab-slide").index(),n.closest(".tc-tabs").find('.tc-tab-headers .tc-tab-header .tab-header[data-id="tc-tab-slide'+c+'"]').trigger("click.tmtabs"),setTimeout(function(){0<o.length&&C.tcScrollTo(o,300,P.tc_validation_offset)},200)):0<o.length&&C.tcScrollTo(o,300,P.tc_validation_offset)),t||(Lt.tcepo.errorObject[e]=!1))}function ot(t,e){var a,i=parseInt(t.attr("data-limit"),10),o=!1;return!(0<i&&(o=0,t.closest(".tm-extra-product-options-checkbox").find("input.tm-epo-field[type='checkbox']:checked").toArray().forEach(function(t){t=Lt(t),a=t.closest("li.tmcp-field-wrap").find("input.tm-qty"),o=0<a.length?((a=parseInt(a.val(),10))<=0&&(a=1),parseInt(o,10)+a):parseInt(o,10)+1}),i<o)&&(e&&t.prop("checked","").trigger("change"),1))}function rt(t,e){var a,i=parseInt(t.attr("data-exactlimit"),10),o=!1;return!(0<i&&(o=0,t.closest(".tm-extra-product-options-checkbox").find("input.tm-epo-field[type='checkbox']:checked").toArray().forEach(function(t){t=Lt(t),a=t.closest("li.tmcp-field-wrap").find("input.tm-qty"),o=0<a.length?((a=parseInt(a.val(),10))<=0&&(a=1),parseInt(o,10)+a):parseInt(o,10)+1}),i<o)&&(e&&t.prop("checked","").trigger("change"),1))}function ct(l,d,p){Lt.tcepo.formSubmitEvents[p][Lt.tcepo.formSubmitEvents[p].length]={trigger:function(){return e=d,t=p,n=!(c=!0),l.toArray().forEach(function(t){t=Lt(t),(r=t.find("[type='checkbox'][data-limit]")).length&&q(r)&&(r=parseInt(r.attr("data-limit"),10),a=0,t.find("input.tm-epo-field[type='checkbox']:checked").toArray().forEach(function(t){t=Lt(t),i=t.closest("li.tmcp-field-wrap").find("input.tm-qty"),a=0<i.length?((i=parseInt(i.val(),10))<=0&&(i=1),parseInt(a,10)+i):parseInt(a,10)+1}),o=t.closest(".cpf-element"),o=o.find("div.tm-error-min"),r<a?(c=!1,n=t,r=(1===r?Rt.tm_epo_global_validator_messages.epolimitsingle:Rt.tm_epo_global_validator_messages.epolimit).replace("{0}",r),o.length&&o.remove(),"before"===Rt.tm_epo_global_error_label_placement?t.closest(".tc-element-container").before('<div class="tm-error-min tm-error tc-cell tcwidth tcwidth-100">'+r+"</div>"):t.closest(".tc-element-container").after('<div class="tm-error-min tm-error tc-cell tcwidth tcwidth-100">'+r+"</div>"),e.find(Mt.addToCartButtonSelector).first().removeClass("disabled loading fpd-disabled").prop("disabled",!1)):o.remove())}),n&&(Lt.tcepo.errorObject[t]=n),c;var e,t,a,i,o,r,c,n},on_true:function(){return!0},on_false:function(){return m(Lt(l).find(".tm-epo-field").first(),p),!0}}}function nt(l,d,p){Lt.tcepo.formSubmitEvents[p][Lt.tcepo.formSubmitEvents[p].length]={trigger:function(){return e=d,t=p,n=!(c=!0),l.toArray().forEach(function(t){t=Lt(t),(r=t.find("[type='checkbox'][data-exactlimit]")).length&&q(r)&&(r=parseInt(r.attr("data-exactlimit"),10),a=0,t.find("input.tm-epo-field[type='checkbox']:checked").toArray().forEach(function(t){t=Lt(t),i=t.closest("li.tmcp-field-wrap").find("input.tm-qty"),a=0<i.length?((i=parseInt(i.val(),10))<=0&&(i=1),parseInt(a,10)+i):parseInt(a,10)+1}),o=t.closest(".cpf-element"),o=o.find("div.tm-error-min"),r!==a?(c=!1,n=t,r=(1===r?Rt.tm_epo_global_validator_messages.epoexactsingle:Rt.tm_epo_global_validator_messages.epoexact).replace("{0}",r),o.length&&o.remove(),"before"===Rt.tm_epo_global_error_label_placement?t.closest(".tc-element-container").before('<div class="tm-error-min tm-error tc-cell tcwidth tcwidth-100">'+r+"</div>"):t.closest(".tc-element-container").after('<div class="tm-error-min tm-error tc-cell tcwidth tcwidth-100">'+r+"</div>"),e.find(Mt.addToCartButtonSelector).first().removeClass("disabled loading fpd-disabled").prop("disabled",!1)):o.remove())}),n&&(Lt.tcepo.errorObject[t]=n),c;var e,t,a,i,o,r,c,n},on_true:function(){return!0},on_false:function(){return m(Lt(l).find(".tm-epo-field").first(),p),!0}}}function lt(e,l){Lt.tcepo.formSubmitEvents[l][Lt.tcepo.formSubmitEvents[l].length]={trigger:function(){return t=l,n=!(c=!0),e.toArray().forEach(function(t){var e;(e=(t=Lt(t)).find("[type='checkbox'][data-minimumlimit]")).length&&q(e)&&(r=parseInt(e.attr("data-minimumlimit"),10),a=0,t.find("input.tm-epo-field[type='checkbox']:checked").toArray().forEach(function(t){t=Lt(t),i=t.closest("li.tmcp-field-wrap").find("input.tm-qty"),a=0<i.length?((i=parseInt(i.val(),10))<=0&&(i=1),parseInt(a,10)+i):parseInt(a,10)+1}),o=t.closest(".cpf-element"),o=o.find("div.tm-error-min"),a<r?(c=!1,n=t,r=(1===r?Rt.tm_epo_global_validator_messages.epominsingle:Rt.tm_epo_global_validator_messages.epomin).replace("{0}",r),o.length&&o.remove(),"before"===Rt.tm_epo_global_error_label_placement?t.closest(".tc-element-container").before('<div class="tm-error-min tm-error tc-cell tcwidth tcwidth-100">'+r+"</div>"):t.closest(".tc-element-container").after('<div class="tm-error-min tm-error tc-cell tcwidth tcwidth-100">'+r+"</div>")):o.remove())}),n&&(Lt.tcepo.errorObject[t]=n),c;var t,a,i,o,r,c,n},on_true:function(){return!0},on_false:function(){return m(!1,l),!0}}}function dt(t){return null!==t&&("object"==typeof t&&(t=t[0]),Number.isFinite(parseFloat(t)))?t:0}function M(t,e,a,i){return t=dt(t),t=a?Lt.epoAPI.applyFilter("tc_apply_dpd",t,e,a,i):t}function re(t,e){var a=0;return 0<t.length&&(a=t.data("regular-price")),a=Lt.epoAPI.applyFilter("tc_calculate_product_regular_price",a,t),(!e||!1!==a)&&(a=parseFloat(a),Number.isFinite(a)?a:0)}function ce(t,e){var a=0;return 0<t.length&&(a=t.data("price")),a=Lt.epoAPI.applyFilter("tc_calculate_product_price",a,t),(!e||!1!==a)&&(a=parseFloat(a),Number.isFinite(a)?a:0)}function pt(e,a,i,o,t,r,c,n){var l,d,p,s,m,_,f,u,g,h=e.toString(),v=0,e=0,y=a.closest(".cpf-element").attr("data-uniqid"),b=a.closest(".tmcp-ul-wrap"),w=i.this_epo_totals_container.data("totalsHolder_tc_totals_ob"),x=b.find(".tmcp-field, .tmcp-fee-field, .tmcp-sub-fee-field").filter(":checked").index(a),k=b.find(".tmcp-field, .tmcp-fee-field, .tmcp-sub-fee-field").index(a),F=i.is_associated?i.this_epo_container:i.this_epo_container.not(Mt.epoSelector+" "+Mt.associatedEpoSelector),A=Lt.epoAPI.util.parseJSON(Rt.tm_epo_math)||{};-1===x&&a.is(".tmcp-checkbox, .tmcp-radio"),-1!==k||a.is(".tmcp-checkbox, .tmcp-radio")||(k=0),a.is(".tcdisabled")||o||a.data("addedtcEpoBeforeOptionPriceCalculation")||(Qt.on("tcEpoBeforeOptionPriceCalculation.math"+y,function(){Gt(i,a,void 0,void 0,void 0,!0)}),Qt.on("tcEpoAfterNormalOptionPriceCalculation.math"+y,function(){a.data("fetchOptionPrices",!1),a.data("fetchOptionPrices-forced",!1),a.data("fetchOptionPrices-fee",!1),a.data("fetchOptionPrices-fee-forced",!1),a.data("fetchOptionPrices-sub-fee",!1),a.data("fetchOptionPrices-sub-fee-forced",!1)}),a.data("addedtcEpoBeforeOptionPriceCalculation",1)),a.is(".tmcp-field")?a.data("fetchOptionPrices")?(_=a.data("fetchOptionPrices"),f=a.data("fetchOptionPrices-forced")):(_=Yt(i,b,".tmcp-field",0,0,[],!0,void 0,void 0,void 0,void 0,void 0,!0),f=Yt(i,b,".tmcp-field",0,0,[],!0,!0,void 0,void 0,void 0,void 0,!0),a.data("fetchOptionPrices",_),a.data("fetchOptionPrices-forced",f)):a.is(".tmcp-fee-field")?a.data("fetchOptionPrices-fee")?(_=a.data("fetchOptionPrices-fee"),f=a.data("fetchOptionPrices-fee-forced")):(_=Yt(i,b,".tmcp-fee-field",0,0,[],!0,void 0,void 0,void 0,void 0,void 0,!0),f=Yt(i,b,".tmcp-fee-field",0,0,[],!0,!0,void 0,void 0,void 0,void 0,!0),a.data("fetchOptionPrices-fee",_),a.data("fetchOptionPrices-fee-forced",f)):a.is(".tmcp-sub-fee-field")&&(a.data("fetchOptionPrices-sub-fee")?(_=a.data("fetchOptionPrices-sub-fee"),f=a.data("fetchOptionPrices-sub-fee-forced")):(_=Yt(i,b,".tmcp-sub-fee-field",0,0,[],!0,void 0,void 0,void 0,void 0,void 0,!0),f=Yt(i,b,".tmcp-sub-fee-field",0,0,[],!0,!0,void 0,void 0,void 0,void 0,!0),a.data("fetchOptionPrices-sub-fee",_),a.data("fetchOptionPrices-sub-fee-forced",f))),Object.keys(A).forEach(function(t){var e,a;""!==A[t].name&&""!==A[t].value&&(e=A[t].name,a=A[t].value,h=e.startsWith("{")?h.replace(e,a):A[t].name.isNumeric()?h.replace("{"+e+"}",a):(e=new RegExp("{"+e+"}","g"),a.startsWith("{")?h.replace(e,a):h.replace(e,Lt.epoAPI.math.unformat(a.replace(",",".")))))}),x=void 0!==w?(h=h.replace(/{quantity}/g,Lt.epoAPI.math.unformat(w.qty)),u=t&&void 0!==w.original_product_price?Lt.epoAPI.math.unformat(w.original_product_price):Lt.epoAPI.math.unformat(w.product_price),void 0!==w.dynamic_product_price?Lt.epoAPI.math.unformat(w.dynamic_product_price):0):(h=h.replace(/{quantity}/g,0),u=0),u=Lt.epoAPI.math.toFloat(u),h=(h=h.replace(/{product_price}/g,u)).replace(/{dynamic_product_price}/g,x),r=Lt.epoAPI.math.toFloat(r=r||0),c=Lt.epoAPI.math.toFloat(c=c||0),h=(h=(h=(h=h.replace(/{options_total}/g,r)).replace(/{product_price_plus_options_total}/g,u+r)).replace(/{cumulative_total}/g,c)).replace(/{product_price_plus_cumulative_total}/g,u+c),(h=(h=void 0!==f.floatingBoxData&&void 0!==f.floatingBoxData[k]?(h=(h=(h="number"===f.floatingBoxData[k].input_type||"hidden"===f.floatingBoxData[k].input_type?h.replace(/{this.value}/g,Lt.epoAPI.math.toFloat(Lt.epoAPI.math.unformat(f.floatingBoxData[k].valueText))):h.replace(/{this.value}/g,Lt.epoAPI.math.toFloat(Lt.epoAPI.math.unformat(f.floatingBoxData[k].valueText,Mt.localDecimalSeparator)))).replace(/{this.rawvalue}/g,f.floatingBoxData[k].valueText)).replace(/{this.text}/g,f.floatingBoxData[k].valueText)).replace(/{this.value.length}/g,f.floatingBoxData[k].valueText.length):h.replace(/{this.value}/g,0).replace(/{this.rawvalue}/g,"").replace(/{this.text}/g,"").replace(/{this.value.length}/g,0)).replace(/{this.count}/g,_.floatingBoxData.length).replace(/{this.count.quantity}/g,_.floatingBoxData.map(function(t){return t.quantity}).reduce(function(t,e){return Lt.epoAPI.math.toFloat(t)+Lt.epoAPI.math.toFloat(e)},0)).replace(/{this.quantity}/g,a.data("tm-quantity"))).match(/\{(\s)*?field\.([^}]*)}/)&&h.match(/\{(\s)*?field\.([^}]*)}/g).forEach(function(t){if(void 0!==(l=t.match(/\{(\s)*?field\.([^}]*)}/))[2]&&"string"==typeof l[2]&&-1!==(p=l[2].lastIndexOf("."))&&(m=l[2].substring(0,p),s=l[2].substring(p+1),-1!==Lt.inArray(s,["price","value","value.length","rawvalue","text","text.length","quantity","count","count.quantity"]))){if((p=F.find("[data-uniqid='"+Lt.epoAPI.util.escapeSelector(m)+"']")).length){switch(m=p.find(".tmcp-field, .tmcp-fee-field, .tmcp-sub-fee-field"),d=m.first(),a.is(".tcdisabled")||o||a.data("addedfieldtcEpoBeforeOptionPriceCalculation")||(Qt.on("tcEpoBeforeOptionPriceCalculation.math"+y,function(){Gt(i,a,void 0,void 0,void 0,!0),a.trigger("tm-math-select-change-html-all")}),a.data("addedfieldtcEpoBeforeOptionPriceCalculation",1)),v=0,s){case"text":case"rawvalue":v=""}if(p.is(".tc-container-enabled")){switch(n||m.toArray().forEach(function(t){t=Lt(t),a.attr("id")!==t.attr("id")&&(a.is(".tmcp-dynamic")||t.is(".tmcp-dynamic"))&&Gt(i,t,void 0,void 0,void 0,!0,void 0,void 0,!0),o||t.data("addedmathevent")||(t.on("input.mathevent",function(){a.is(".tcdisabled")||a.trigger("change.cpf",{calculateMathPrice:1})}),t.data("addedmathevent",1))}),d.is(".tmcp-field")?v=Yt(i,p,".tmcp-field",0,0,[],!0,void 0,void 0,!0,void 0,void 0,!0):d.is(".tmcp-fee-field")?v=Yt(i,p,".tmcp-fee-field",0,0,[],!0,void 0,void 0,!0,void 0,void 0,!0):d.is(".tmcp-sub-fee-field")&&(v=Yt(i,p,".tmcp-sub-fee-field",0,0,[],!0,void 0,void 0,!0,void 0,void 0,!0)),s){case"price":v=v.total,a.is(".tmcp-dynamic")&&(g=ne(i,d,"price"),"math"===ne(i,d,"price_type"))&&g.includes("{dynamic_product_price}")&&(v=0);break;case"value":case"text":case"rawvalue":v.floatingBoxData&&(v=v.floatingBoxData.map(function(t){return"number"===t.input_type||"hidden"===t.input_type?"text"===s||"rawvalue"===s?t.valueText:Lt.epoAPI.math.unformat(t.valueText):"text"===s||"rawvalue"===s?t.valueText:Lt.epoAPI.math.unformat(t.valueText,Mt.localInputDecimalSeparator)}).reduce(function(t,e){return"text"===s||"rawvalue"===s?t+e:Lt.epoAPI.math.toFloat(t)+Lt.epoAPI.math.toFloat(e)},"text"===s||"rawvalue"===s?"":0),"text"!==s&&"rawvalue"!==s||(""===v?v="''":v.toString().isNumeric()||(v="'"+v.replace("'","\\'")+"'")));break;case"value.length":case"text.length":v.floatingBoxData&&(v=v.floatingBoxData.map(function(t){return t.valueText}).reduce(function(t,e){return Lt.epoAPI.math.toFloat(t)+e.length},0));break;case"quantity":case"count.quantity":v.floatingBoxData&&(v=v.floatingBoxData.map(function(t){return t.quantity}).reduce(function(t,e){return Lt.epoAPI.math.toFloat(t)+Lt.epoAPI.math.toFloat(e)},0));break;case"count":v.floatingBoxData&&(v=v.floatingBoxData.length)}"text"!==s&&"rawvalue"!==s&&(v=Lt.epoAPI.math.toFloat(v),Number.isFinite(v)||(v=0))}}else switch(v=0,s){case"text":case"rawvalue":v=""}m=new RegExp(l[0]),h="text"===s||"rawvalue"===s?""===v?h.replace(m,"''"):h.replace(m,v):Number.isFinite(v)?h.replace(m,v):h.replace(m,"'"+v.replace("'","\\'")+"'")}});try{e=H.evaluate(h)}catch(t){e=0}return e}function ne(t,e,a){var i,o,r,c,e=Lt(e),n=e,t=t.main_cart,l="input[name^='variation_id']";return 0<t.find("input.variation_id").length&&(l="input.variation_id"),t=(t=t.find(l).val())||0,e.is("select")&&(n=e.find("option:selected")),l=Lt.epoAPI.util.parseJSON(n.attr("data-rules")),n=Lt.epoAPI.util.parseJSON(n.attr("data-rulestype")),o="","object"==typeof l?(c=t in l?l[t]:"object"==typeof(c=Lt.epoAPI.util.parseJSON(e.closest(".tmcp-ul-wrap").attr("data-rules")))&&t in c?c[t]:l[0],"object"==typeof n?o=t in n?n[t]:"object"==typeof(i=Lt.epoAPI.util.parseJSON(e.closest(".tmcp-ul-wrap").attr("data-rulestype")))&&t in i?i[t]:n[0]:"object"==typeof(n=Lt.epoAPI.util.parseJSON(e.closest(".tmcp-ul-wrap").attr("data-ulestype")))&&(o=t in n?n[t]:n[0])):(r=e.closest(".tmcp-ul-wrap"),"object"==typeof(l=Lt.epoAPI.util.parseJSON(r.attr("data-rules")))&&(c=t in l?l[t]:l[0],"object"==typeof n?o=t in n?n[t]:"object"==typeof(i=Lt.epoAPI.util.parseJSON(r.attr("data-rulestype")))&&t in i?i[t]:n[0]:"object"==typeof(n=Lt.epoAPI.util.parseJSON(r.attr("data-rulestype")))&&(o=t in n?n[t]:n[0]))),"object"==typeof c&&(c=c[0]),"object"==typeof o&&(o=o[0]),e.is(".tmcp-fee-field")&&-1!==Lt.inArray(o,["fee","stepfee","currentstepfee"])&&(o=""),"price"===a?c:o}function R(t){for(var e,a=new RegExp(/[\p{L}\d!@#$%^&*()_+=\{[\}\]|\\"':;?/>.<,-]+/,"gu"),i=0;null!==(e=a.exec(t));)e.index===a.lastIndex&&a.lastIndex++,i+=e.length;return i}function Gt(e,t,a,i,D,H,o,r,c){var n,l,d,p,s,m,_,f,u,g,h,v,y,b,w,x,k,F,A,P,I,E=t instanceof Lt?t:Lt(t),t=E,C=E.is(".tmcp-range"),q="",N=e.main_product,S=e.epoEventId,T=!0,j=0,O=0,z=!1;E.data("associated_price_set")||(a?(n=a.cart,l=a.current_variation,d=a.bundleid,p=a.epoTotalsContainer,m=a.product_price,_=a.product_original_price,s=a.apply_dpd,T=a.per_product_pricing):(void 0!==(n=e.main_cart).data("per_product_pricing")&&(T=n.data("per_product_pricing")),a="input[name^='variation_id']",0<n.find("input.variation_id").length&&(a="input.variation_id"),l=n.find(a).val(),d=Lt.epoAPI.applyFilter("tc_get_bundleid",n.attr("data-product_id"),n,e),l=l||0,p=Lt.epoAPI.applyFilter("tc_get_totals_container",e.this_epo_totals_container,E,N,d),m=ce(p),_=re(p),s=p.data("fields-price-rules")),m=Lt.epoAPI.applyFilter("tc_alter_product_price",m,E,n,p,d),_=Lt.epoAPI.applyFilter("tc_alter_product_original_price",_,E,n,p),!1!==m&&T&&(E.is("select")&&(t=E.find("option:selected")),(t=i?i:t).toArray().forEach(function(t){switch(t=Lt(t),I=Lt.epoAPI.util.parseJSON(t.attr("data-rules")),y=Lt.epoAPI.util.parseJSON(t.attr("data-rulestype")),v=Lt.epoAPI.util.parseJSON(t.attr("data-original-rules")),E.is(".tmcp-dynamic")&&(I=Lt.epoAPI.util.parseJSON(t.attr("data-formula")),v=Lt.epoAPI.util.parseJSON(t.attr("data-formula")),y=Lt.epoAPI.util.parseJSON(t.attr("data-calculation-type"))),void 0===v&&(v=I),u="","object"==typeof I?(h=l in I?(g=I[l],v[l]):(x=Lt.epoAPI.util.parseJSON(E.closest(".tmcp-ul-wrap").attr("data-rules")),F=E.closest(".tmcp-ul-wrap").data("original-rules"),g="object"==typeof x&&l in x?x[l]:I[0],"object"==typeof F&&l in F?F[l]:v[0]),"object"==typeof y?u=l in y?y[l]:"object"==typeof(f=Lt.epoAPI.util.parseJSON(E.closest(".tmcp-ul-wrap").attr("data-rulestype")))&&l in f?f[l]:y[0]:"object"==typeof(y=Lt.epoAPI.util.parseJSON(E.closest(".tmcp-ul-wrap").attr("data-ulestype")))&&(u=l in y?y[l]:y[0])):(x=E.closest(".tmcp-ul-wrap"),I=Lt.epoAPI.util.parseJSON(x.attr("data-rules")),v=Lt.epoAPI.util.parseJSON(x.attr("data-original-rules")),"object"==typeof I&&(g=l in I?I[l]:I[0],h="object"==typeof v?l in v?v[l]:v[0]:g,"object"==typeof y?u=l in y?y[l]:"object"==typeof(f=Lt.epoAPI.util.parseJSON(x.attr("data-rulestype")))&&l in f?f[l]:y[0]:"object"==typeof(y=Lt.epoAPI.util.parseJSON(x.attr("data-rulestype")))&&(u=l in y?y[l]:y[0]))),"object"==typeof u&&(u=u[0]),E.is(".tmcp-fee-field")&&(-1!==Lt.inArray(u,["fee","stepfee","currentstepfee"])&&(u=""),s=0),void 0===D&&(E.is("select")?E.find("option"):t).removeClass("tm-epo-late-field").removeData("tm-price-for-late islate"),"math"!==u?(g=dt(g),h=dt(h)):"object"==typeof g&&(g=g[0]),F=g,I=h,u){case"":g=M(A=g,p,s);break;case"fixednon":w=parseInt(t.attr("data-freechars"),10),Number.isFinite(w)||(w=0),b=t.val().length-w,g=M(A=g=b<=0?0:g,p,s);break;case"math":h=(A=g)!==h?pt(h,E,e,!0,!0,o,r,c):g,g=M(g=pt(g,E,e,H,Lt.epoAPI.applyFilter("tc_use_undiscounted_price",void 0,E,n,p),o,r,c),p,s);break;case"percent_cart_total":k=parseFloat(Rt.cart_total),Number.isFinite(k)||(k=0),A=g/100*k,g=M(g,p,s)/100*k,h=M(h,p,s)/100*k;break;case"percent":A=g/100*m,g=M(g,p,s)/100*m,h=h/100*_;break;case"percentcurrenttotal":Lt.tcepo.lateFieldsPrices[S].push({setter:t,price:g,original_price:h,bundleid:d,pricetype:u}),t.data("tm-price-for-late",g).data("tm-original-price-for-late",h).data("islate",1).addClass("tm-epo-late-field"),h=g=A=0;break;case"fixedcurrenttotal":g=M(g,p,s),Lt.tcepo.lateFieldsPrices[S].push({setter:t,price:g,original_price:h,bundleid:d,pricetype:u}),t.data("tm-price-for-late",g).data("tm-original-price-for-late",h).data("islate",1).addClass("tm-epo-late-field"),h=g=A=0;break;case"word":A=g*R(t.val()),g=M(g,p,s)*R(t.val()),h*=R(t.val());break;case"wordpercent":A=g/100*m*R(t.val()),g=M(g,p,s)/100*m*R(t.val()),h=h/100*_*R(t.val());break;case"wordnon":w=parseInt(t.attr("data-freechars"),10),Number.isFinite(w)||(w=0),b=R(t.val())-w,A=g*(b=b<0?0:b),g=M(g,p,s)*b,h*=b;break;case"wordpercentnon":w=parseInt(t.attr("data-freechars"),10),Number.isFinite(w)||(w=0),b=R(t.val())-w,A=g/100*m*(b=b<0?0:b),g=M(g,p,s)/100*m*b,h=h/100*_*b;break;case"char":A=g*t.val().length,g=M(g,p,s)*t.val().length,h*=t.val().length;break;case"charpercent":A=g/100*m*t.val().length,g=M(g,p,s)/100*m*t.val().length,h=h/100*_*t.val().length;break;case"charnospaces":A=g*t.val().replace(/\s/g,"").length,g=M(g,p,s)*t.val().replace(/\s/g,"").length,h*=t.val().replace(/\s/g,"").length;break;case"charnofirst":b=t.val().length-1,A=g*(b=b<0?0:b),g=M(g,p,s)*b,h*=b;break;case"charnon":w=parseInt(t.attr("data-freechars"),10),Number.isFinite(w)||(w=0),b=t.val().length-w,A=g*(b=b<0?0:b),g=M(g,p,s)*b,h*=b;break;case"charpercentnon":w=parseInt(t.attr("data-freechars"),10),Number.isFinite(w)||(w=0),b=t.val().length-w,A=g/100*m*(b=b<0?0:b),g=M(g,p,s)/100*m*b,h=h/100*_*b;break;case"charnonnospaces":w=parseInt(t.attr("data-freechars"),10),Number.isFinite(w)||(w=0),b=t.val().replace(/\s/g,"").length-w,A=g*(b=b<0?0:b),g=M(g,p,s)*b,h*=b;break;case"charpercentnonnospaces":w=parseInt(t.attr("data-freechars"),10),Number.isFinite(w)||(w=0),b=t.val().replace(/\s/g,"").length-w,A=g/100*m*(b=b<0?0:b),g=M(g,p,s)/100*m*b,h=h/100*_*b;break;case"charpercentnofirst":b=t.val().length-1,A=g/100*m*(b=b<0?0:b),g=M(g,p,s)/100*m*b,h=h/100*_*b;break;case"step":g=C?(A=g*t.val(),M(g,p,s)*t.val()):(A=g*Lt.epoAPI.math.toFloat(t.val()),M(g,p,s)*Lt.epoAPI.math.toFloat(t.val())),h*=Lt.epoAPI.math.toFloat(t.val());break;case"currentstep":h=C?(A=t.val(),g=M(t.val(),p,s),M(t.val(),p,s)):(A=Lt.epoAPI.math.toFloat(t.val()),g=M(Lt.epoAPI.math.toFloat(t.val()),p,s),M(Lt.epoAPI.math.toFloat(t.val()),p,s));break;case"intervalstep":C&&(k=parseFloat(Lt('.tm-range-picker[data-field-id="'+t.attr("id")+'"]').attr("data-min")),A=g*(t.val()-k),g=M(g,p,s)*(t.val()-k),h*=t.val()-k);break;case"row":A=g*((t.val().match(/(\r\n|\n|\r)/gm)||[]).length+1),g=M(g,p,s)*((t.val().match(/(\r\n|\n|\r)/gm)||[]).length+1),h*=(t.val().match(/(\r\n|\n|\r)/gm)||[]).length+1}v=g,F=A,I=P=y=h,E.data("tm-quantity")&&(A*=parseFloat(E.data("tm-quantity")),P*=parseFloat(E.data("tm-quantity")),F*=parseFloat(E.data("tm-quantity")),I*=parseFloat(E.data("tm-quantity")),g*=parseFloat(E.data("tm-quantity")),h*=parseFloat(E.data("tm-quantity")),v*=parseFloat(E.data("tm-quantity")),y*=parseFloat(E.data("tm-quantity"))),j+=parseFloat(g),O+=parseFloat(h),E.data("price_set",1),t.data("price_set",1),t.data("undiscounted_raw_price",F),t.data("undiscounted_raw_original_price",I),t.data("undiscounted_price",$t(A,p,t)),t.data("undiscounted_original_price",$t(P,p,t)),t.data("raw_price",v),t.data("raw_original_price",y),t.data("price",$t(g,p,t)),t.data("original_price",$t(h,p,t)),i||(E.is(".tc-epo-field-product")&&(I=!1,!E.is("select")&&(E.is(":checkbox")||E.is(":radio"))?E.is(":checked")&&(I=!0):""!==E.val()&&(I=!0),I||(q=t.data("price-html"),z=!0)),L({epoObject:e,obj:t.closest(".tmcp-field-wrap").find(".tc-price"),price:B(j,p,!1,t),formatted_price:q,original_price:B(O,p,!1,t),force:!1,useFormattedPrice:z}),E.data("price-changed",1))})))}function le(e,t){var a,i,o,r,c,n,l,d,p,s,m,_,f=!0,u=e.main_product,g=e.epoEventId,h=e.this_epo_container,v=e.this_epo_totals_container,t=t||u.find(".cart");t.length<=0||(Lt.tcepo.lateFieldsPrices[g]=[],t.toArray().forEach(function(t){if(t=Lt(t),s="input[name^='variation_id']",0<t.find("input.variation_id").length&&(s="input.variation_id"),void 0!==t.data("per_product_pricing")&&(f=t.data("per_product_pricing")),a=t.find(s).val(),s=Lt.epoAPI.applyFilter("tc_get_bundleid",t.attr("data-product_id"),t,e),a=a||0,i=Lt.epoAPI.applyFilter("tc_get_epo_container",h,t,u,s),o=Lt.epoAPI.applyFilter("tc_get_totals_container",v,t,u,s),r=o.data("fields-price-rules"),i.data("tm_rules_init_done")||(o.data("force-quantity")&&t.find(Mt.qtySelector).val(o.data("force-quantity")),i.toArray().forEach(function(t){Lt(t).closest(".tmcp-field-wrap").find(".tm-epo-field").data("tm-quantity",Lt(t).val())}),i.find(".tmcp-attributes, .tmcp-elements").toArray().forEach(function(t){t=Lt(t),c=Lt.epoAPI.util.parseJSON(t.attr("data-rules")),"object"!=typeof(n=Lt.epoAPI.util.parseJSON(t.attr("data-original-rules")))&&(n={0:"0"}),"object"==typeof(c="object"!=typeof c?{0:"0"}:c)&&(l=M(c[Lt.epoAPI.math.toFloat(a)],o,r),d=M(n[Lt.epoAPI.math.toFloat(a)],o,r),t.find(".tmcp-field, .tmcp-fee-field ").toArray().forEach(function(t){t=Lt(t),f?("1"===t.attr("data-no-price")&&(d=l=0),t.data("raw_price",l),t.data("raw_original_price",d),t.data("price",$t(l,o,t)),t.data("original_price",$t(d,o,t)),L({epoObject:e,obj:t.closest(".tmcp-field-wrap").find(".tc-price"),price:B(l,o),original_price:B(d,o),force:!1,useFormattedPrice:!1})):(t.data("price",0),t.data("original_price",0),t.closest(".tmcp-field-wrap").find(".amount").empty())}))}),i.data("tm_rules_init_done",1)),!f)return!0;m=ce(o),p=re(o),_={cart:t,current_variation:a,bundleid:s,epoTotalsContainer:o,product_price:m,product_original_price:p,apply_dpd:r,per_product_pricing:f},s=i.find(".tmcp-field,.tmcp-sub-fee-field,.tmcp-fee-field"),e.is_associated||(s=s.not(Mt.associatedEpoSelector+" .tmcp-field,"+Mt.associatedEpoSelector+" .tmcp-sub-fee-field,"+Mt.associatedEpoSelector+" .tmcp-fee-field")),m=s.filter(".tcenabled"),(!Lt.tcepo.initialActivation[g]||0===m.length&&0<s.length)&&(s.toArray().forEach(function(t){q(Lt(t))}),i.find(".cpf-type-divider,.cpf-type-header").toArray().forEach(function(t){q(Lt(t))}),Lt.tcepo.initialActivation[g]=!0),s.filter(".tcenabled").toArray().forEach(function(t){Gt(e,t,_)}),s.toArray().forEach(function(t){Lt(t).on("tc_element_epo_rules",function(){Gt(e,t,_)})})}))}function de(e,t,a,i,o,r,c,n){var l,d,p,s,m,_,f,u,g,h,v=0,y=0,b=0,w=0,x=e.epoEventId,k=void 0!==n?n:e.this_epo_totals_container.data("fields-price-rules"),F=t,A=a;return Lt.tcepo.lateFieldsPrices[x].forEach(function(t){l=t.price,d=t.original_price,p=t.pricetype,s=t.setter,g=t.bundleid,h="percentcurrenttotal"===p?"_hidden":"_hiddenfixed",(_=s).is("option")&&(_=s.closest("select")),F=parseFloat(Lt.epoAPI.applyFilter("tc_alter_product_price",F,_,c,e.this_epo_totals_container,r)),A=parseFloat(Lt.epoAPI.applyFilter("tc_alter_original_product_price",A,_,c,e.this_epo_totals_container,r)),m=Lt.epoAPI.dom.id(_.attr("name")),f=Lt(".tc-totals-form.tm-totals-form-"+c.attr("data-cart-id")).attr("data-product-id"),u=Lt(".tc-totals-form.tm-totals-form-"+c.attr("data-cart-id")).attr("data-epo-id"),f=Lt(Mt.epoSelector+".tm-product-id-"+f+"[data-epo-id='"+u+"']").find("#"+m+h),g===r?("percentcurrenttotal"===p?(l=parseFloat(l)/100*(M(parseFloat(F),e.this_epo_totals_container,k)+parseFloat(i)),d=parseFloat(d)/100*(parseFloat(A)+parseFloat(o))):"fixedcurrenttotal"===p&&(l=parseFloat(l)+parseFloat(i),d=parseFloat(d)+parseFloat(o)),_.data("tm-quantity")&&(l*=parseFloat(_.data("tm-quantity")),d*=parseFloat(_.data("tm-quantity"))),1===s.data("isset")&&q(s)&&(_.is(".tmcp-field")?(v+=l,y+=d):_.is(".tmcp-fee-field")&&(b+=l,w+=d)),u=$t(l,c,s),g=$t(d,c,s),s.data("price",u),s.data("pricew",u),s.data("original_price",g),s.data("original_pricew",g),L({epoObject:e,obj:s.closest(".tmcp-field-wrap").find(".tc-price"),price:B(u,c,!1,s),original_price:B(g,c,!1,s),force:!1,useFormattedPrice:!1}),0===f.length&&_.before('<input type="hidden" id="'+m+h+'" name="'+m+h+'" value="'+j(l,c)+'">'),(s.is(".tm-epo-field.tmcp-radio")||s.is(".tm-epo-field.tmcp-checkbox"))&&!s.is(":checked")||f.val(j(l,c))):void 0!==s.data("pricew")&&L({epoObject:e,obj:s.closest(".tmcp-field-wrap").find(".tc-price"),price:s.data("pricew"),original_price:void 0!==s.data("original_pricew")?s.data("original_pricew"):s.data("pricew"),force:!1,useFormattedPrice:!1})}),{normal:[v,y],fees:[b,w]}}function st(){var t;"yes"!==Rt.tm_epo_no_lazy_load&&((t=g?Lt(g).find("img.tmlazy"):Lt(Mt.epoSelector+" img.tmlazy, .tc-styled-variations img.tmlazy")).lazyLoadXT(),t.on("lazyshow",function(){Qt.trigger("lazyLoadXToncomplete")}))}function mt(t){var e,a;t&&(e=Lt(".cart"),(a=(a=t.find(".tm-owl-slider-section")).length||(a=t).is(".tc-repeater-section")?a:!1)&&a.toArray().forEach(function(t){(t=Lt(t)).find(".tc-slider-content").addClass("tm-owl-slider"),(t=t.find(".tm-owl-slider")).length&&(t.addClass("tcowl-carousel-show").addClass("tcowl-carousel").on("changed.owl.carousel",function(){e.css("display","block").addClass("slider-setup")}).tmowlCarousel(Object.assign({rtl:"1"===Rt.isRTL,dots:!1,nav:!0,items:1,autoHeight:!0,mouseDrag:!1,touchDrag:!0,navText:[Rt.i18n_prev_text,Rt.i18n_next_text],navClass:["owl-prev button","owl-next button"],navElement:"a",loop:!1,navRewind:!1},P.tmowlCarouselSettings||{})),t.removeClass("tcowl-carousel-show"))}),Lt.fn.tcTabs)&&t.find(".tc-tabs").tcTabs({headers:"tc-tab-headers",header:"tab-header",dataopenattribute:"data-tab",sortabletabs:!1})}function _t(a,t){var e,i=t.closest(".cpf-element"),o=i.data("repeater-max-rows"),i=i.data("repeater-min-rows")||1,r=t.find(".tc-repeater-element"),c=r.length,r=r.last(),n=r.find(".tmcp-ul-wrap"),l=a.data("tc-repeater-init");return!(o&&o<=c)&&(o<=c+1&&a.is(".tc-repeater-add")&&a.closest(".tc-repeater-wrap").addClass("tc-hidden"),n.is(".tm-element-ul-date, .tm-element-ul-time")&&(n.find(".tm-epo-field").tm_datepicker("destroy"),n.find(".tmcp-date-select").off()),n.is(".tm-element-ul-color")&&n.find(".tm-epo-field").spectrum("destroy"),(o=r.tcClone(!0)).find(".tm-epo-field").attr("id",function(t,e){return e.replace(/\_\d+$/g,"")+"_"+l}),o.find("[data-for]").attr("data-for",function(t,e){return e.replace(/\_\d+$/g,"")+"_"+l}),o.find("[for]:not(:has(.tmcp-date-select))").attr("for",function(t,e){return e.replace(/\_\d+$/g,"")+"_"+l}),o.find("[data-field-id]").attr("data-field-id",function(t,e){return e.replace(/\_\d+$/g,"")+"_"+l}),o.find(".tmcp-date-select").attr("id",function(t,e){return Lt(this).attr("data-tm-date")+"_"+l+"_"+e.substring(e.lastIndexOf("_")+1)}),o.find("[data-tm-date]").attr("data-tm-date",function(t,e){return e.replace(/\_\d+$/g,"")+"_"+l}),o.find("[for]:has(.tmcp-date-select)").attr("for",function(t,e){return Lt(this).find(".tmcp-date-select").attr("data-tm-date")+"_"+e.substring(e.lastIndexOf("_")+1)}),o.find(".tm-epo-field").attr("name",function(t,e){return e.replace(/\[\d+\]/g,"["+l+"]")}),o.find(".tm-qty").attr("name",function(t,e){return e.replace(/\[\d+\]/g,"["+l+"]")}),o.find(".tmcp-date-select").attr("name",function(t,e){return e.replace(/\[\d+\]/g,"["+l+"]")}),e=o.find(".tmcp-ul-wrap"),i<=c&&1<=t.find(".tc-repeater-element").length&&(t.find(".tc-repeater-delete").removeClass("tc-hidden"),o.find(".tc-repeater-delete").removeClass("tc-hidden")),e.is(".tm-element-ul-checkbox")?(o.find("li.tmcp-field-wrap").removeClass("tc-active"),o.find(".tm-epo-field.tmcp-checkbox").prop("checked",!1),o.find(".tm-epo-field.tmcp-checkbox").filter(function(t,e){return-1!==Lt.inArray(Lt(e).val(),a.data("repeater-init-value"))}).prop("checked",!0).closest("li.tmcp-field-wrap").addClass("tc-active")):e.is(".tm-element-ul-radio")?(o.find("li.tmcp-field-wrap").removeClass("tc-active"),o.find(".tm-epo-field.tmcp-radio").filter(function(t,e){return Lt(e).val()===a.data("repeater-init-value")}).prop("checked",!0).closest("li.tmcp-field-wrap").addClass("tc-active")):o.find(".tm-epo-field").val(a.data("repeater-init-value")),e.is(".tm-element-ul-checkbox")||e.is(".tm-element-ul-radio")||o.find(".tm-epo-field").val(a.data("repeater-init-value")),e.is(".tm-element-ul-upload")&&(o.find(".tc-upload-preview").remove(),o.find(".tm-filename").remove()),o.find(".tc-element-qty").toArray().forEach(function(t){var t=Lt(t),e=t.attr("data-default-value");t.val(e).trigger("change")}),a.data("tc-repeater-init",a.data("tc-repeater-init")+1),[o,r,n])}function ft(e,t,a,i){var o=t.find(".tmcp-ul-wrap");o.is(".tm-element-ul-range")&&(t.find(".tm-range-picker").removeData("tc-picker-init").attr("class","tm-range-picker").html(""),qt(t)),o.is(".tm-element-ul-date, .tm-element-ul-time")&&(D(a),D(o)),o.is(".tm-element-ul-color")&&(O(a),O(o)),t.find(".tm-tooltip").removeData("tctooltip").removeData("tm-has-tm-tip"),Lt.tcToolTip(t.find(".tm-tooltip")),t.find(".tm-epo-field").removeData("addedtcEpoBeforeOptionPriceCalculation").toArray().forEach(function(t){q(t=Lt(t),!1,!0),t.is(".tcenabled")&&Gt(e,t),t.on("tc_element_epo_rules",function(){Gt(e,t)})}),i&&(o.is(".tm-element-ul-checkbox")?t.find(".tm-epo-field.tmcp-checkbox").filter(":checked"):o.is(".tm-element-ul-radio")?t.find(".tm-epo-field.tmcp-radio").filter(":checked"):t.find(".tm-epo-field")).trigger("change.cpf")}function ut(t,e,a,i){var o,r=t.closest(".cpf-element").data("repeater-min-rows"),c=t.find(".tc-repeater-element").length,n=e.index();r&&c<=r?Lt.tc_validator&&i&&(o='<div class="tm-error-repeater tm-error tc-cell tcwidth tcwidth-100">'+Lt.tc_validator.messages.repeaterminrows(r)+"</div>",i.tcToolTip({tip:o,onetime:!0,trigger:!0,tipclass:"tc-error"})):1!==c&&((2===c||c-1<=r)&&t.find(".tc-repeater-delete").addClass("tc-hidden"),a.is(".tc-repeater-add")&&a.closest(".tc-repeater-wrap").removeClass("tc-hidden"),e.remove(),a.data("tc-repeater-init",a.data("tc-repeater-init")-1),n+1!==c)&&t.find(".tc-repeater-element").toArray().forEach(function(t,a){(t=Lt(t)).find(".tm-epo-field").attr("id",function(t,e){return e.replace(/\_\d+$/g,"")+(0!==a?"_"+a:"")}),t.find("[data-for]").attr("data-for",function(t,e){return e.replace(/\_\d+$/g,"")+(0!==a?"_"+a:"")}),t.find("[for]").attr("for",function(t,e){return e.replace(/\_\d+$/g,"")+(0!==a?"_"+a:"")}),t.find("[data-field-id]").attr("data-field-id",function(t,e){return e.replace(/\_\d+$/g,"")+(0!==a?"_"+a:"")}),t.find("[data-tm-date]").attr("data-tm-date",function(t,e){return e.replace(/\_\d+$/g,"")+(0!==a?"_"+a:"")}),t.find(".tm-epo-field").attr("name",function(t,e){return e.replace(/\[\d+\]/g,"["+a+"]")}),t.find(".tm-qty").attr("name",function(t,e){return e.replace(/\[\d+\]/g,"["+a+"]")}),t.find(".tmcp-date-select").attr("name",function(t,e){return e.replace(/\[\d+\]/g,"["+a+"]")})})}function gt(t,e,a,i){var o,r=t.closest(".cpf-section"),c=r.data("repeater-min-rows"),n=t.find(".tc-repeater-section").length,l=e.index();c&&n<=c?Lt.tc_validator&&i&&(o='<div class="tm-error-repeater tm-error tc-cell tcwidth tcwidth-100">'+Lt.tc_validator.messages.repeaterminrows(c)+"</div>",i.tcToolTip({tip:o,onetime:!0,trigger:!0,tipclass:"tc-error"})):1!==n&&((2===n||n-1<=c)&&(t.find(".tc-repeater-section-delete").addClass("tc-hidden"),t.find(".tc-repeater-section").removeClass("has-delete"),r.find(".tcowl-carousel").trigger("refresh.owl.carousel")),a.is(".tc-section-repeater-add")&&a.closest(".tc-repeater-wrap").removeClass("tc-hidden"),e.remove(),a.data("tc-repeater-init",a.data("tc-repeater-init")-1),l+1!==n)&&t.find(".tc-repeater-section").toArray().forEach(function(t,a){(t=Lt(t)).find(".tm-epo-field").attr("id",function(t,e){return e.replace(/\_\d+$/g,"")+(0!==a?"_"+a:"")}),t.find("[data-for]").attr("data-for",function(t,e){return e.replace(/\_\d+$/g,"")+(0!==a?"_"+a:"")}),t.find("[for]:not(:has(.tmcp-date-select))").attr("for",function(t,e){return e.replace(/\_\d+$/g,"")+(0!==a?"_"+a:"")}),t.find("[data-field-id]").attr("data-field-id",function(t,e){return e.replace(/\_\d+$/g,"")+(0!==a?"_"+a:"")}),t.find(".tmcp-date-select").attr("id",function(t,e){return Lt(this).attr("data-tm-date")+(0!==a?"_"+a:"")+"_"+e.substring(e.lastIndexOf("_")+1)}),t.find("[data-tm-date]").attr("data-tm-date",function(t,e){return e.replace(/\_\d+$/g,"")+(0!==a?"_"+a:"")}),t.find("[for]:has(.tmcp-date-select)").attr("for",function(t,e){return Lt(this).find(".tmcp-date-select").attr("data-tm-date")+"_"+e.substring(e.lastIndexOf("_")+1)}),t.find(".tm-epo-field").attr("name",function(t,e){return e.replace(/\[\d+\]/g,"["+a+"]")}),t.find(".tm-qty").attr("name",function(t,e){return e.replace(/\[\d+\]/g,"["+a+"]")}),t.find(".tmcp-date-select").attr("name",function(t,e){return e.replace(/\[\d+\]/g,"["+a+"]")})})}function ht(t,e){var a,i=e.closest(".cpf-section"),o=i.data("repeater-max-rows"),r=i.data("repeater-min-rows")||1,c=e.find(".tc-repeater-section"),n=c.length,l=c.last(),d=l.find(".tmcp-ul-wrap"),p=t.data("tc-repeater-init"),s=t.data("repeater-init-value");return!(o&&o<=n)&&(o<=n+1&&t.is(".tc-repeater-add")&&t.closest(".tc-repeater-wrap").addClass("tc-hidden"),d.toArray().forEach(function(t){t=Lt(t);t.is(".tm-element-ul-date, .tm-element-ul-time")&&(t.find(".tm-epo-field").tm_datepicker("destroy"),t.find(".tmcp-date-select").off()),t.is(".tm-element-ul-color")&&t.find(".tm-epo-field").spectrum("destroy")}),(o=l.tcClone(!0)).find(".tm-epo-field").attr("id",function(t,e){return e.replace(/\_\d+$/g,"")+"_"+p}),o.find("[data-for]").attr("data-for",function(t,e){return e.replace(/\_\d+$/g,"")+"_"+p}),o.find("[for]:not(:has(.tmcp-date-select))").attr("for",function(t,e){return e.replace(/\_\d+$/g,"")+"_"+p}),o.find("[data-field-id]").attr("data-field-id",function(t,e){return e.replace(/\_\d+$/g,"")+"_"+p}),o.find(".tmcp-date-select").attr("id",function(t,e){return Lt(this).attr("data-tm-date")+"_"+p+"_"+e.substring(e.lastIndexOf("_")+1)}),o.find("[data-tm-date]").attr("data-tm-date",function(t,e){return e.replace(/\_\d+$/g,"")+"_"+p}),o.find("[for]:has(.tmcp-date-select)").attr("for",function(t,e){return Lt(this).find(".tmcp-date-select").attr("data-tm-date")+"_"+e.substring(e.lastIndexOf("_")+1)}),o.find(".tm-epo-field").attr("name",function(t,e){return e.replace(/\[\d+\]/g,"["+p+"]")}),o.find(".tm-qty").attr("name",function(t,e){return e.replace(/\[\d+\]/g,"["+p+"]")}),o.find(".tmcp-date-select").attr("name",function(t,e){return e.replace(/\[\d+\]/g,"["+p+"]")}),a=o.find(".tmcp-ul-wrap"),r<=n&&1<=e.find(".tc-repeater-section").length&&(e.find(".tc-repeater-section-delete").removeClass("tc-hidden"),o.find(".tc-repeater-section-delete").removeClass("tc-hidden"),c.addClass("has-delete"),o.addClass("has-delete"),i.find(".tcowl-carousel").trigger("refresh.owl.carousel")),a.toArray().forEach(function(t){t=Lt(t);t.is(".tm-element-ul-checkbox")?(t.find("li.tmcp-field-wrap").removeClass("tc-active"),t.find(".tm-epo-field.tmcp-checkbox").prop("checked",!1),t.find(".tm-epo-field.tmcp-checkbox").filter(function(t,e){var e=Lt(e),a=e.attr("id").replace(/_(\d+)$/,"");return-1!==Lt.inArray(e.val(),s[a])}).prop("checked",!0).closest("li.tmcp-field-wrap").addClass("tc-active")):t.is(".tm-element-ul-radio")?(t.find("li.tmcp-field-wrap").removeClass("tc-active"),t.find(".tm-epo-field.tmcp-radio").filter(function(t,e){var e=Lt(e),a=e.attr("id").replace(/_(\d+)$/,"");return e.val()===s[a]}).prop("checked",!0).closest("li.tmcp-field-wrap").addClass("tc-active")):t.find(".tm-epo-field").each(function(){var t=Lt(this),e=t.attr("id").replace(/_(\d+)$/,"");s.hasOwnProperty(e)&&t.val(s[e])}),t.is(".tm-element-ul-checkbox")||t.is(".tm-element-ul-radio")||t.find(".tm-epo-field").each(function(){var t=Lt(this),e=t.attr("id").replace(/_(\d+)$/,"");s.hasOwnProperty(e)&&t.val(s[e])}),t.is(".tm-element-ul-upload")&&(t.find(".tc-upload-preview").remove(),t.find(".tm-filename").remove())}),o.find(".tc-element-qty").toArray().forEach(function(t){var t=Lt(t),e=t.attr("data-default-value");t.val(e).trigger("change")}),t.data("tc-repeater-init",t.data("tc-repeater-init")+1),[o,l,d])}function vt(e,t,a,i){var o,r;t.find(".tmcp-ul-wrap").toArray().forEach(function(t){t=Lt(t);t.is(".tm-element-ul-range")&&(t.find(".tm-range-picker").removeData("tc-picker-init").attr("class","tm-range-picker").html(""),qt(t)),t.is(".tm-element-ul-date, .tm-element-ul-time")&&(o=!0,D(t)),t.is(".tm-element-ul-color")&&(r=!0,O(t)),i&&(t.is(".tm-element-ul-checkbox")?t.find(".tm-epo-field.tmcp-checkbox").filter(":checked"):t.is(".tm-element-ul-radio")?t.find(".tm-epo-field.tmcp-radio").filter(":checked"):t.find(".tm-epo-field")).trigger("change.cpf")}),o&&D(a),r&&O(a),t.find(".tm-tooltip").removeData("tctooltip").removeData("tm-has-tm-tip"),Lt.tcToolTip(t.find(".tm-tooltip")),t.find(".tm-epo-field").removeData("addedtcEpoBeforeOptionPriceCalculation").toArray().forEach(function(t){q(t=Lt(t),!1,!0),t.is(".tcenabled")&&Gt(e,t),t.on("tc_element_epo_rules",function(){Gt(e,t)})}),t.find(".tc-tabs").removeData("tctabs"),t.find(".tcowl-carousel").removeData("owl.carousel"),t.find(".owl-nav, .owl-dots").remove(),mt(t)}function yt(g,h){var v,y,b;g&&(g=Lt(g)).length&&(v=h.main_cart,y=te(v),y=Lt.epoAPI.applyFilter("qtyElementForRepeaterQuantity",y,{epo:h,currentCart:v,obj:g,qtyElement:y}),(b=g.find(".tc-repeater-quantity")).toArray().forEach(function(t,p){var e,s,m=Lt(t),_=m.data("repeater-max-rows");m.data("tc-repeater-init")||(e=(t=m.find(".tc-repeater-element")).length,(t=t.first().find(".tm-epo-field")).is(":checkbox")?m.data("repeater-init-value",t.filter(":checked").toArray().map(function(t){return Lt(t).val()})):t.is(":radio")?m.data("repeater-init-value",t.filter(":checked").val()):m.data("repeater-init-value",t.val()),m.data("tc-repeater-init",e),m.data("tc-repeater-name",t.attr("name")),y.length&&(s=m.find(".tc-element-inner-wrap"),y.off("change.r"+p+"cpf input.r"+p+"cpf").on("change.r"+p+"cpf input.r"+p+"cpf",function(t){var e,a,i,o,r,c=Lt(this),n=c.data("tm-prev-value"),l=Lt.epoAPI.applyFilter("qtyElementForRepeaterQuantityValue",c.val(),{epo:h,currentCart:v,obj:g,qtyElement:y,field:c}),d=l-n;if(void 0===n&&(d=l-(n=l-1)),void 0!==t.isTrigger&&(d=l-(n=m.find(".tc-element-inner-wrap").find(".tc-repeater-element").length)),0!==(d=_&&_<d?_-1:d)){if((t=Lt.epoAPI.applyFilter("qtyElementForRepeaterQuantity_tm-prev-value",c.val(),{epo:h,currentCart:v,obj:g,qtyElement:y,field:c}))<=0&&(t=1),p===b.length&&c.data("tm-prev-value",t),0<d){if((e=s.find(".tc-repeater-element").eq(l-1)).length)return;for(a=0;a<d;a++)(o=_t(m,s))&&(i=i?i.add(o[0]):o[0],0===a)&&(r=o[2]);i&&(i.appendTo(s.find(".tc-element-container")),ft(h,i,r))}else for(a=l-d;l<a;--a)e=s.find(".tc-repeater-element").eq(a-1),ut(s,e,m);v.trigger({type:"tm-epo-update",norules:2})}}),y.data("tm-prev-value",Lt.epoAPI.applyFilter("qtyElementForRepeaterQuantityValue",y.val(),{epo:h,currentCart:v,obj:g,qtyElement:y,field:y})).trigger("change")))}),g.find(".tc-repeater-add").toArray().forEach(function(t){var e,a,i=Lt(t);i.data("tc-repeater-init")||(a=(t=(e=i.closest(".tc-element-inner-wrap")).find(".tc-repeater-element")).length,t=t.first().find(".tm-epo-field"),1<e.find(".tc-repeater-element").length&&e.find(".tc-repeater-delete").removeClass("tc-hidden"),t.is(":checkbox")?i.data("repeater-init-value",t.filter(":checked").toArray().map(function(t){return Lt(t).val()})):t.is(":radio")?i.data("repeater-init-value",t.filter(":checked").val()):i.data("repeater-init-value",t.val()),i.data("tc-repeater-init",a),i.data("tc-repeater-name",t.attr("name")),i.on("click.repeater",function(){var t=_t(i,e);t&&(t[0].appendTo(e.find(".tc-element-container")),ft(h,t[0],t[2],!0))}))}),g.find(".tc-repeater-delete .delete").on("click",function(){var t=Lt(this),e=t.closest(".tc-element-inner-wrap");ut(e,t.closest(".tc-repeater-element"),e.find(".tc-repeater-add"),t)}),g.find(".tc-section-repeater-add").toArray().forEach(function(t){var e,a,i,o=Lt(t),r=[];o.data("tc-repeater-init")||(i=(t=(a=o.closest(".tc-section-inner-wrap")).find(".tc-repeater-section")).length,e=a.find(".sections_repeater"),1<a.find(".tc-repeater-section").length&&a.find(".tc-section-repeater-delete").removeClass("tc-hidden"),t.first().find(".tm-epo-field").toArray().forEach(function(t){var t=Lt(t),e=t.attr("id");t.is(":checkbox")?r[e]=t.filter(":checked").toArray().map(function(t){return Lt(t).val()}):t.is(":radio")?r[e]=t.filter(":checked").val():r[e]=t.val()}),o.data("repeater-init-value",r),o.data("tc-repeater-init",i),o.data("tc-repeater-name",e.attr("name")),o.on("click.repeater",function(){var t=ht(o,a);t&&(t[1].after(t[0]),vt(h,t[0],t[2],!0),e.val(function(t,e){return e?parseInt(e,10)+1:2}))}))}),g.find(".tc-section-repeater-quantity").toArray().forEach(function(t,s){var m,_,e,f=Lt(t),a=[],u=f.closest(".cpf-section").data("repeater-max-rows");f.data("tc-repeater-init")||(e=(t=(_=f.find(".tc-section-inner-wrap")).find(".tc-repeater-section")).length,m=_.find(".sections_repeater"),t.first().find(".tm-epo-field").toArray().forEach(function(t){var t=Lt(t),e=t.attr("id");t.is(":checkbox")?a[e]=t.filter(":checked").toArray().map(function(t){return Lt(t).val()}):t.is(":radio")?a[e]=t.filter(":checked").val():a[e]=t.val()}),f.data("repeater-init-value",a),f.data("tc-repeater-init",e),f.data("tc-repeater-name",m.attr("name")),y.length&&(y.off("change.rs"+s+"cpf input.rs"+s+"cpf").on("change.rs"+s+"cpf input.rs"+s+"cpf",function(t){var e,a,i,o,r,c,n=Lt(this),l=n.data("tm-prev-valuers"+s),d=Lt.epoAPI.applyFilter("qtyElementForRepeaterQuantityValue",n.val(),{epo:h,currentCart:v,obj:g,qtyElement:y,field:n}),p=d-l;if(void 0===l&&(p=d-(l=d-1)),void 0!==t.isTrigger&&(l=f.find(".tc-section-inner-wrap").find(".tc-repeater-section").length,p=d-l),0!==(p=u&&u<p?u-1:p)){if((t=Lt.epoAPI.applyFilter("qtyElementForRepeaterQuantity_tm-prev-value",n.val(),{epo:h,currentCart:v,obj:g,qtyElement:y,field:n}))<=0&&(t=1),s===b.length&&n.data("prev-valuers"+s,t),0<p){if((e=_.find(".tc-repeater-section").eq(d-1)).length)return;for(a=0;a<p;a++)(o=ht(f,_))&&(c=c||o,i=i?i.add(o[0]):o[0],0===a)&&(r=o[2]);i&&(m.val(function(t,e){return e?parseInt(e,10)+parseInt(p,10):2}),c[1].after(i),vt(h,i,r))}else{for(a=d-p;d<a;--a)e=_.find(".tc-repeater-section").eq(a-1),gt(_,e,f);m.val(_.find(".tc-repeater-section").length)}v.trigger({type:"tm-epo-update",norules:2})}}),y.data("tm-prev-value"+s,Lt.epoAPI.applyFilter("qtyElementForRepeaterQuantityValue",y.val(),{epo:h,currentCart:v,obj:g,qtyElement:y,field:y})).trigger("change")))}),g.find(".tc-repeater-section-delete .delete").on("click",function(){var t=Lt(this),e=t.closest(".tc-section-inner-wrap"),a=t.closest(".tc-repeater-section"),i=e.find(".sections_repeater");gt(e,a,e.find(".tc-section-repeater-add"),t),i.val(function(t,e){return e?parseInt(e,10)-1:2})}))}function O(t){t&&(t=Lt(t).find(".tm-color-picker")).length&&(t.spectrum({type:"color",theme:"epo",showButtons:!0,allowEmpty:!0,showInitial:!0,showInput:!0,clickoutFiresChange:!1,chooseText:Rt.closeText,cancelText:Rt.i18n_cancel,clearText:""}),t.spectrum("enable"))}function bt(t){t&&Lt(t).length&&Lt(function(){Lt(t).tclightbox()})}function wt(t){var e=t.closest(".tmcp-field-wrap").find("label img"),a=Lt(e).first().attr("data-original");return t.is("select.tm-product-image")&&(t=t.children("option:selected")),a=(a=a||Lt(e).first().attr("src"))||t.attr("data-image"),!(t.attr("data-imagep")?!t.attr("data-imagep"):!a)}function xt(t){var i,o,r,c,t=t.is_associated?t.this_epo_container.find(".tm-epo-field.tmcp-upload"):t.this_epo_container.find(".tm-epo-field.tmcp-upload").not(Mt.epoSelector+" "+Mt.associatedEpoSelector+" .tm-epo-field.tmcp-upload");try{t.not(Mt.epoSelector+" "+Mt.associatedEpoSelector+" .tm-epo-field.tmcp-upload").toArray().forEach(function(t){var e,a;return c=[],""!==(i=Lt(t)).attr("data-file")&&0!==(e=i.attr("data-file").split("|")).length&&((k||F)&&(o=new k("").clipboardData||new F),e.forEach(function(t){a=Lt.epoAPI.util.basename(t),(k||F)&&o.items.add(new File([t],a)),c.push(t)}),o&&(t.files=o.files),c=c.join("|"),r=i.attr("name"),i.trigger("tcupload"),i.after('<input type="hidden" class="tmcp-upload-hidden" name="'+r+'" value="'+c+'">'),void i.removeAttr("data-file"))})}catch(t){P.console.log(t),Lt(".tm-epo-field.tmcp-upload").not(".tm-multiple-file-upload").addClass("tc-nodt"),b=t}}function kt(t,e,a){var i=a.find(".flex-control-nav li:eq(0) img"),a=a.find(".woocommerce-product-gallery__wrapper ").find(".woocommerce-product-gallery__image, .woocommerce-product-gallery__image--placeholder").eq(0),o=e,e=e.closest("a"),r=e.next(".zoomImg");t&&t.image_link&&t.image_link&&1<t.image_link.length?(null!==t.full_src&&""!==t.full_src||(t.full_src=t.image_link),null!==t.full_src_w&&""!==t.full_src_w||(t.full_src_w=o.attr("data-large_image_width")),null!==t.full_src_h&&""!==t.full_src_h||(t.full_src_h=o.attr("data-large_image_height")),o.length&&(t.image_srcset||(t.image_sizes=!1),t.image_sizes||(t.image_srcset=!1),o.tc_set_attr("src",t.image_link,0),o.tc_set_attr("srcset",t.image_srcset,0),o.tc_set_attr("sizes",t.image_sizes,0),o.tc_set_attr("title",t.image_title,0),o.tc_set_attr("alt",t.image_alt,0),o.tc_set_attr("data-src",t.full_src,0),o.tc_set_attr("data-large_image",t.full_src,0),o.tc_set_attr("data-large_image_width",t.full_src_w,0),o.tc_set_attr("data-large_image_height",t.full_src_h,0),a.tc_set_attr("data-thumb",t.image_link,1)),i.length&&i.tc_set_attr("src",t.image_link,2),e.length&&(e.tc_set_attr("href",t.full_src,3),e.tc_set_attr("title",t.image_caption,3)),r.length&&r.tc_set_attr("src",t.full_src,4)):(o.length&&(o.tc_reset_attr("src",0),o.tc_reset_attr("srcset",0),o.tc_reset_attr("sizes",0),o.tc_reset_attr("title",0),o.tc_reset_attr("alt",0),o.tc_reset_attr("data-src",0),o.tc_reset_attr("data-large_image",0),o.tc_reset_attr("data-large_image_width",0),o.tc_reset_attr("data-large_image_height",0),a.tc_reset_attr("data-thumb",1)),i.length&&i.tc_reset_attr("src",2),e.length&&(e.tc_reset_attr("href",3),e.tc_reset_attr("title",3)),r.length&&r.tc_reset_attr("src",4))}function Ft(t,e){var a;return t.is_associated?a=e.find(".tc-product-image .wp-post-image").first():""!==Rt.tm_epo_global_product_image_selector?a=Lt(Rt.tm_epo_global_product_image_selector):0===(a=0===(a=0===(a=0===(a=0===(a=e.find(".woocommerce-product-gallery__image:not(.clone), .woocommerce-product-gallery__image--placeholder:not(.clone)").eq(0).find(".wp-post-image").first()).length?e.find("a.woocommerce-main-image img, img.woocommerce-main-image,a img").not(".thumbnails img,.product_list_widget img").first():a).length?e.find("img.wp-post-image").not(".thumbnails img,.product_list_widget img").first():a).length?e.find(".elementor-widget-wd_single_product_gallery img.wp-post-image").first():a).length?e.find(".elementor-widget-ae-post-image .wp-post-image").first():a).length&&(a=Lt(".woocommerce div.product div.images").not(".thumbnails img,.product_list_widget img").first()),a=1<Lt(a).length?Lt(a).first():a}function At(t){var e,a;return t.is_associated?t.main_product.closest(".tc-epo-element-product-container"):(e=t.main_product,t=t.product_id,(a=e.closest("#product-"+t)).length<=0?e.closest(".post-"+t):a)}function Pt(t,e,a,i,o,r,c){var n,l,d,p;for(n in t)if(Object.prototype.hasOwnProperty.call(t,n)&&(n=t[n]).enabled)switch(n.type){case"yith":e?(e.attr("srcset",a).attr("src-orig",a),n.element.data("yith_magnifier")&&n.element.yith_magnifier("destroy"),l={elements:{zoom:Lt(".yith_magnifier_zoom"),zoomImage:e,gallery:Lt(".yith_magnifier_gallery li a")}},n.element.yith_magnifier(Lt.extend(!0,{},P.yith_magnifier_options,l))):(i?n.yith_wcmg_zoom.attr("href",n.yith_wcmg_default_zoom):n.yith_wcmg_zoom.attr("href",n._yith_wcmg_default_zoom),n.element.data("yith_magnifier")&&n.element.yith_magnifier("destroy"),n.element.yith_magnifier(P.yith_magnifier_options));break;case"iosslider":setTimeout(function(t){t.element.iosSlider("update")}.bind(null,n),150);break;case"flexslider":Qt.trigger("resize");break;case"elevatezoom":n.element.each(function(t,e){e=e(this).data("elevateZoom");void 0!==e&&e.swaptheimage(t,t)}.bind(null,a,Lt));break;case"easyzoom":n.element.swap(null,a);break;case"easyzoom-flatsome":n.element.swap(a,a);break;case"woocommerce":e&&(n.element.flexslider(0),n.element.trigger("woocommerce_gallery_reset_slide_position"),l=n.element,P.setTimeout(function(t,e){t.trigger("woocommerce_gallery_init_zoom"),e.trigger("resize")}.bind(null,l,Qt),10));break;case"zoom":c&&(p=c.find(".woocommerce-product-gallery--with-images").width(),d=!1,(d=n.element.find("img.wp-post-image").attr("data-large_image_width")>p?!0:d)?(p={touch:!1},"ontouchstart"in P&&(p.on="click"),n.element.trigger("zoom.destroy"),n.element.zoom(p)):n.element.trigger("zoom.destroy"))}Qt.trigger("tm_gallery_compatibility_actions",{event_data:o,product_element:c,form:r})}function It(t,e,a){var i,o,r,c,n,l,d,p,s,m,_,f,u,g,h,v,y,b,w;return t.is_associated?{}:(t=!1,i=Lt(".images"),o=Lt(".yith_magnifier_zoom"),r=i.find(".yith_magnifier_zoom").first().attr("href"),c=i.find(".yith_magnifier_zoom img").first().attr("src"),n=!1,l=Lt(".iosSlider.product-gallery-slider,.iosSlider.product-slider"),d=!1,p=a.find(".images .fusion-flexslider"),s=e.data("elevateZoom")||!1,m=a.find("div.product-images .woocommerce-main-image"),_=!1,f=a.find(".images .easyzoom"),u=!1,g=a.find(".images .easyzoom"),h=!1,v=a.find(".woocommerce-product-gallery"),y=P.wc_single_product_params,b="function"==typeof Lt.fn.zoom&&y&&y.zoom_enabled,w=!1,P.yith_magnifier_options&&i.data("yith_magnifier")&&(t=!0),l.length&&l.iosSlider&&(n=!0),p.length&&p.flexslider&&(d=!0),f.length&&f.filter(".images .easyzoom.first").data("easyZoom")&&(f=f.filter(".images .easyzoom.first").data("easyZoom"),_=!0),_||(g=a.find(".images .has-image-zoom .slide")).length&&g.filter(".images .has-image-zoom .slide.first").data("easyZoom")&&(g=g.filter(".images .has-image-zoom .slide.first").data("easyZoom"),u=!0),"complete"===x.readyState?setTimeout(function(){f.length&&f.data("easyZoom")&&(f=f.data("easyZoom"),_=!0),g.length&&g.data("easyZoom")&&(g=g.data("easyZoom"),u=!0)},150):Qt.on("load",function(){setTimeout(function(){f.length&&f.data("easyZoom")&&(f=f.data("easyZoom"),_=!0),g.length&&g.data("easyZoom")&&(g=g.data("easyZoom"),u=!0)},150)}),v.length&&v.data("flexslider")&&(h=!0,"function"==typeof Lt.fn.zoom)&&y&&y.zoom_enabled&&0<(y=e.closest(".woocommerce-product-gallery__image")).length&&e.width()>Lt(".woocommerce-product-gallery").width()&&(e.data.wc27_zoom_target=y),!h&&b&&(w=a.find(".woocommerce-product-gallery .woocommerce-product-gallery__image")),{is_yith_wcmg:{type:"yith",enabled:t,element:i,yith_wcmg_zoom:o,_yith_wcmg_default_zoom:r,yith_wcmg_default_image:c},is_iosSlider:{type:"iosslider",enabled:n,element:l},is_flexslider:{type:"flexslider",enabled:d,element:p},is_elevateZoom:{type:"elevatezoom",enabled:s,element:m},is_easyzoom:{type:"easyzoom",enabled:_,element:f},is_easyzoom_flatsome:{type:"easyzoom-flatsome",enabled:u,element:g},is_wc27_gallery:{type:"woocommerce",enabled:h,element:v},is_zoom_enabled:{type:"zoom",enabled:!h&&b,element:w}})}function Et(c){var i,o,r,t,n=c.is_associated?c.this_epo_container:c.this_epo_container.not(Mt.epoSelector+" "+Mt.associatedEpoSelector),l=c.variations_form,e=c.main_product,d=c.form,p=At(c),s=[],a=c.is_associated?"tc_":"",m=Ft(c,p),_=It(c,m,p);0<Lt(m).length&&(d.on(a+"reset_image.tcpi",function(){setTimeout(function(){"yes"===Rt.tm_epo_global_image_recalculate&&(m=Ft(c,p),Lt.tc_product_image_store=t),Lt.tc_product_image=Lt.tc_replace_object_values(Lt.tc_product_image,Lt.tc_product_image_store),s=[],Lt(n.find(".tm-product-image:checked,select.tm-product-image")).add(l.find(".tm-epo-variation-section").first().find(".tm-product-image:checked,select.tm-product-image")).toArray().forEach(function(t){q(t=Lt(t))&&""!==t.val()&&s.push(t)}),s.length?s[s.length-1].trigger("tm_trigger_product_image"):Lt.tc_product_image_store=Lt.tc_populate_store(m,p)},P.tc_epo_product_image_change_delay||0)}),d.on(a+"found_variation.tcpi",function(){setTimeout(function(){var t,e,a,i,o,r;"yes"===Rt.tm_epo_global_image_recalculate&&(m=Ft(c,p)),a=m,t=(i=p).find(".flex-control-nav li:eq(0) img"),r=i.find(".woocommerce-product-gallery__wrapper ").find(".woocommerce-product-gallery__image, .woocommerce-product-gallery__image--placeholder").eq(0),e=(o=a).closest("a"),Lt.isEmptyObject(Lt.tc_product_image)?Lt.tc_product_image_store=Lt.tc_populate_store(a,i):(Lt.tc_product_image_store=Lt.tc_pre_populate_store(),Lt.tc_product_image_store=Lt.tc_maybe_copy_object_values(Lt.tc_product_image_store,Lt.tc_product_image)),o.tc_update_attr("src",0),o.tc_update_attr("srcset",0),o.tc_update_attr("sizes",0),o.tc_update_attr("title",0),o.tc_update_attr("alt",0),o.tc_update_attr("data-src",0),o.tc_update_attr("data-large_image",0),o.tc_update_attr("data-large_image_width",0),o.tc_update_attr("data-large_image_height",0),r.tc_update_attr("data-thumb",1),t.tc_update_attr("src",2),e.tc_update_attr("href",3),e.tc_update_attr("title",3),s=[],Lt(n.find(".tm-product-image:checked,select.tm-product-image")).add(l.find(".tm-epo-variation-section").first().find(".tm-product-image:checked,select.tm-product-image")).toArray().forEach(function(t){q(t=Lt(t))&&""!==t.val()&&s.push(t)}),s.length&&(a=m,o=(i=p).find(".flex-control-nav li:eq(0) img"),i=i.find(".woocommerce-product-gallery__wrapper ").find(".woocommerce-product-gallery__image, .woocommerce-product-gallery__image--placeholder").eq(0),a=(r=a).closest("a"),r.attr("data-o_src",Lt.tc_product_image_store[0].src),r.attr("data-o_srcset",Lt.tc_product_image_store[0].srcset),r.attr("data-o_sizes",Lt.tc_product_image_store[0].sizes),r.attr("data-o_title",Lt.tc_product_image_store[0].title),r.attr("data-o_alt",Lt.tc_product_image_store[0].alt),r.attr("data-o_data-src",Lt.tc_product_image_store[0]["data-src"]),r.attr("data-o_data-large_image",Lt.tc_product_image_store[0]["data-large_image"]),r.attr("data-o_data-large_image_width",Lt.tc_product_image_store[0]["data-large_image_width"]),r.attr("data-o_data-large_image_height",Lt.tc_product_image_store[0]["data-large_image_height"]),i.attr("data-o_data-thumb",Lt.tc_product_image_store[1]["data-thumb"]),Lt.tc_product_image_store[2]&&o.attr("data-o_src",Lt.tc_product_image_store[2].src),a.attr("data-o_href",Lt.tc_product_image_store[3].href),a.attr("data-o_title",Lt.tc_product_image_store[3].title),s[s.length-1].trigger("tm_trigger_product_image"))},P.tc_epo_product_image_change_delay||0)}),Lt.tc_product_image_store=Lt.tc_maybe_copy_object_values_from_img(Lt.tc_product_image_store,m,p),t=Lt.epoAPI.util.deepCopyArray(Lt.tc_product_image_store),e.off("tm_change_product_image").on("tm_change_product_image",function(t,e){var a;t.stopImmediatePropagation(),i=e.element,o=e.element_current,i&&o&&(o=i.data("imagep"),(r="")!==o?r="imagep":"images"===i.data("changes-product-image")&&(r="image"),void 0!==(a=(a=e.element_current.data("image-variations"))&&a[r]))&&(s=[],Lt(n.find(".tm-product-image:checked,select.tm-product-image")).add(l.find(".tm-epo-variation-section").first().find(".tm-product-image:checked,select.tm-product-image")).toArray().forEach(function(t){""!==(t=(t=Lt(t)).is("option")?t.closest("select"):t).val()&&q(t)&&s.push(t)}),!s.length||s[s.length-1].is(i))&&setTimeout(function(){"yes"===Rt.tm_epo_global_image_recalculate&&(m=Ft(c,p)),kt(a,m,p),Pt(_,m,a.image_link,!1,e,d,p)},P.tc_epo_product_image_change_delay||0)}),e.off("tm_restore_product_image").on("tm_restore_product_image",function(t,e){t.stopImmediatePropagation(),i=!!e&&e.element,s=[],i&&(Lt(n.find(".tm-product-image:checked,select.tm-product-image")).add(l.find(".tm-epo-variation-section").first().find(".tm-product-image:checked,select.tm-product-image")).toArray().forEach(function(t){q(t=Lt(t))&&""!==t.val()&&s.push(t)}),s.length)&&!s[s.length-1].is(i)?s[s.length-1].trigger("tm_trigger_product_image"):(kt(!1,m,p),Pt(_,!1,m.attr("src"),!1,e,d,p))}),s=[],Lt(n.find(".tm-product-image:checked,select.tm-product-image")).add(l.find(".tm-epo-variation-section").first().find(".tm-product-image:checked,select.tm-product-image")).toArray().forEach(function(t){q(t=Lt(t))&&""!==t.val()&&s.push(t)}),s.length)&&s[s.length-1].trigger("tm_trigger_product_image"),Qt.trigger("tm_product_image_loaded")}function Ct(r){var c;setTimeout(function(){var t,u,g,f,h,e,a,v,y,i,o,b,w;"inline"===Rt.tm_epo_global_product_image_mode?(e=(t=r).is_associated?t.this_epo_container:t.this_epo_container.not(Mt.epoSelector+" "+Mt.associatedEpoSelector),a=t.main_product,v=t.product_id,y=t.form,i=At(t),o=[],b=Ft(t,i),w=It(t,b,i),0<Lt(b).length&&(b.data("tm-current-image",!1),u=b.closest("a"),g=b.attr("src"),f=b.width(),h=b.height(),a.off("tm_change_product_image").on("tm_change_product_image",function(t,e){var a,i,o,r=[],c=e.element.closest(".cpf-section"),n=c.is(".tm-epo-variation-section"),l=e.epo_holder,n=(l=n?c:l).find(".tm-product-image:checked,select.tm-product-image"),r=[],d=e.element.attr("id"),c=!0,l=e.main_product,p=l.closest("#product-"+v),s=f,m=h,_=Lt("<div class='blockUI blockOverlay tm-preloader-img'></div>");0===(l=(p=p.length<=0?l.closest(".post-"+v):p).find("#"+d+"_tmimage")).length&&(l=b),o=function(){_.remove(),y.tc_image_update(!1),b.data("tm-current-image",!1),p.find(".tm-clone-product-image").hide(),b.show()},e.src===l.attr("src")&&l.is(":visible")||(!1===e.src?o():(_.css({width:s,height:m}),n.toArray().forEach(function(t){q(t=Lt(t))&&wt(t)&&Z({element:t.closest(".cpf-element"),rule:{operator:"isnotempty",value:""},type:"element"})&&r.push(t)}),(n=r.length?r[r.length-1]:n).attr("id")!==e.element.attr("id")&&(c=!1),a=b.tcClone(),i=new Image,a.removeAttr("data-o_src").removeAttr("data-o_title").removeAttr("data-o_alt").removeAttr("data-o_srcset").removeAttr("data-o_sizes").removeAttr("srcset").removeAttr("sizes"),c&&b.before(_),w.is_yith_wcmg.yith_wcmg_default_zoom=w.is_yith_wcmg.element.find(".yith_magnifier_zoom").first().attr("href"),w.is_yith_wcmg.yith_wcmg_default_image=w.is_yith_wcmg.element.find(".yith_magnifier_zoom img").first().attr("src"),i.onerror=function(){o()},i.onload=function(){if("naturalHeight"in this){if(this.naturalHeight+this.naturalWidth===0)return void this.onerror()}else if(this.width+this.height===0)return void this.onerror();p.find("#"+d+"_tmimage").remove(),p.find(".tm-clone-product-image").hide(),a.prop("src",i.src).hide(),b.hide().after(a),a.css("opacity",0).show(),Pt(w,a,i.src),_.animate({opacity:0},750,"easeOutExpo",function(){_.remove()}),a.animate({opacity:1},P.tc_epo_image_animation_delay||1500,"easeOutExpo",function(){}),Qt.trigger("tm_change_product_image_loaded",{src:e.src,element:e.element,main_product:e.main_product,epo_holder:e.epo_holder})},a.attr("id",d+"_tmimage").addClass("tm-clone-product-image").hide(),a.attr("src-orig")&&a.attr("src-orig",e.src),c?(i.src=e.src,y.tc_image_update(e.element,a),b.data("tm-current-image",d),Qt.trigger("tm_change_product_image_show",{src:e.src,element:e.element,main_product:e.main_product,epo_holder:e.epo_holder})):(a.prop("src",e.src).hide(),b.after(a)),Qt.trigger("tm_change_product_image_end",{src:e.src,element:e.element,main_product:e.main_product,epo_holder:e.epo_holder})))}),a.off("tm_restore_product_image").on("tm_restore_product_image",function(t,e){var a,i,o,r,c,n,l,d,p,s,m,_;if(!e||!e.element)return!1;if(Qt.trigger("tm_restore_product_image_pre",{element:e.element,main_product:e.main_product,epo_holder:e.epo_holder}),a=e.element.attr("id"),o=(i=e.main_product).closest("#product-"+v),l=(d=e.element.closest(".cpf-section")).is(".tm-epo-variation-section"),n=!1,s=g,m=e.epo_holder,l&&(m=d),l=(o=o.length<=0?i.closest(".post-"+v):o).find("#"+a+"_tmimage").is(":visible"),o.find("#"+a+"_tmimage").remove(),0===o.find(".tm-clone-product-image").length)b.show(),b.data("tm-current-image",!1),y.tc_image_update(!1);else{if(!l)return void Qt.trigger("tm_restore_product_image_loaded_exit",{element:e.element,main_product:e.main_product,epo_holder:e.epo_holder});for(d=o.find(".tm-clone-product-image").length,a=b.data("tm-current-image"),_=d-1;0<=_;--_){if(r=(c=o.find(".tm-clone-product-image").eq(_)).attr("id").replace("_tmimage",""),(p=m.find("[id='"+r+"']")).is(":checked")&&p.closest(".cpf-element").is(":visible")){o.find(".tm-clone-product-image").eq(_).show(),u.attr("href",o.find(".tm-clone-product-image").eq(_).prop("src")),b.data("tm-current-image",r),n=!0;break}o.find(".tm-clone-product-image").eq(_).hide()}n?o.find("#"+a+"_tmimage").remove():(b.show(),b.data("tm-current-image",!1),y.tc_image_update(!1))}n&&(s=c.attr("src")),Pt(w,!1,s,o.find(".tm-clone-product-image").filter(":visible").length),Qt.trigger("tm_restore_product_image_loaded",{element:e.element,main_product:e.main_product,epo_holder:e.epo_holder})}),a.off("tm_attempt_product_image").on("tm_attempt_product_image",function(t,e){var a,i,o,r,c,n=e.main_product,l=n.closest("#product-"+v),d=e.element?e.element.closest(".cpf-section"):Lt(n.find(".tm-epo-variation-section").first(),e.epo_holder),p=d.is(".tm-epo-variation-section"),s=e.epo_holder,p=(s=p?d:s).find(".tm-product-image:checked,select.tm-product-image"),d="",m=!(a=[]),_=b.data("tm-current-image"),f=g;if(l.length<=0&&(l=n.closest(".post-"+v)),(p=(s=n.find(".tm-epo-variation-section").first().add(e.epo_holder)).find(".tm-product-image:checked,select.tm-product-image")).toArray().forEach(function(t){q(t=Lt(t))&&wt(t)&&Z({element:t.closest(".cpf-element"),rule:{operator:"isnotempty",value:""},type:"element"})&&a.push(t)}),a.length&&(d=(p=a[a.length-1]).attr("id")),!a.length||!p.length||_&&d===_){if(n=s.find("[id='"+_+"']").closest(".cpf-element"),_&&(!1===n.data("isactive")||!1===n.closest(".cpf-section").data("isactive"))){if(l.find("#"+_+"_tmimage").remove(),0===(e=l.find(".tm-clone-product-image").length))b.show(),b.data("tm-current-image",!1),y.tc_image_update(!1);else{for(c=e-1;0<=c;--c){if(o=(i=l.find(".tm-clone-product-image").eq(c)).attr("id").replace("_tmimage",""),(r=s.find("[id='"+o+"']")).is(":checked")&&r.closest(".cpf-element").is(":visible")){l.find(".tm-clone-product-image").eq(c).show(),u.attr("href",l.find(".tm-clone-product-image").eq(c).prop("src")),b.data("tm-current-image",o),m=!0;break}l.find(".tm-clone-product-image").eq(c).hide()}m||(b.show(),b.data("tm-current-image",!1),y.tc_image_update(!1))}m&&(f=i.attr("src")),Pt(w,!1,f,l.find(".tm-clone-product-image").filter(":visible").length)}}else p.last().trigger("tm_trigger_product_image")}),Lt(e.find(".tm-product-image:checked,select.tm-product-image")).add(a.find(".tm-epo-variation-section").first().find(".tm-product-image:checked,select.tm-product-image")).toArray().forEach(function(t){q(t=Lt(t))&&""!==t.val()&&o.push(t)}),o.length)&&o[o.length-1].trigger("tm_trigger_product_image"),Qt.trigger("tm_product_image_loaded")):Et(r),Lt.fn.wc_product_gallery&&(c=r.this_epo_container,(c=r.is_associated?r.main_product:c).find(".cpf-type-product-custombundle .tc-associated-product-image").tclightbox())},P.tc_epo_product_image_setup_delay||0)}function qt(m){_&&m.find(".tm-range-picker").toArray().forEach(function(t){var a,t=Lt(t),i=t.attr("data-step").split("."),o=m.find("#"+Lt.epoAPI.dom.id(t.attr("data-field-id"))),e=parseFloat(t.attr("data-min")),r=parseFloat(t.attr("data-max")),c=parseFloat(t.attr("data-start")),n=parseFloat(t.attr("data-step")),l=t.attr("data-show-picker-value"),d=t.closest("li").find(".tm-show-picker-value"),p=parseFloat(t.attr("data-noofpips")),s=null;t.data("tc-picker-init")||(t.data("tc-picker-init",1),i=1===i.length?0:i[1].length,Number.isFinite(e)||(e=0),(r=Number.isFinite(r)?r:0)<=e&&(r=parseFloat(r)+1),c=Lt.epoAPI.math.unformat(c,Mt.localDecimalSeparator),c=Jt(c=Number.isFinite(c)?c:0,{precision:i}),Number.isFinite(n)||(n=0),(p=Number.isFinite(p)?p:10)<2&&(p=2),"yes"===t.attr("data-pips")&&(s={mode:"count",values:p,filter:function(t,e){return t=parseFloat(Lt.epoAPI.math.toFixed(t,i)),n<=0?0:1!==e||Number.isInteger(t)?e:2},format:{from:function(t){return Lt.epoAPI.math.unformat(t,Mt.localInputDecimalSeparator)},to:function(t){return Jt(t,{precision:i})}},density:2}),_.create(t.get(0),{direction:Rt.text_direction,start:c,step:n,connect:"lower",behaviour:"tap",format:{from:function(t){return Lt.epoAPI.math.unformat(t,Mt.localDecimalSeparator)},to:function(t){return Jt(t,{precision:i})}},range:{min:[e],max:[r]},pips:s,tooltips:{from:function(t){return Lt.epoAPI.math.unformat(t,Mt.localInputDecimalSeparator)},to:function(t){return Jt(t,{precision:i})}}}),a=t.find(".noui-handle-lower"),t.get(0).noUiSlider.on("slide",function(){o.trigger("change.cpf")}),t.get(0).noUiSlider.on("update",function(t,e){t[e]=Lt.epoAPI.math.unformat(t[e],Mt.localDecimalSeparator),e=0,"left"!==l&&"right"!==l&&a.attr("title",Jt(t[e],{precision:i})),o.val(t[e]).trigger("change"),""!==l&&d.html(Jt(t[e],{precision:i}))}),""!==l&&d.html(c),"left"!==l&&"right"!==l&&(a.attr("title",c),t.addClass("noui-show-tooltip")))})}function St(){_&&!E.data("setRangePickersEvents")&&(E.on("click",".tm-show-picker-value",function(){var t=Lt(this),e=t.closest(".tmcp-field-wrap"),a=e.find(".tmcp-range").val(),i=t.closest(".tmcp-field-wrap").find(".tm-range-picker");t.addClass("tc-hidden").after(Lt('<input type="number" class="tm-show-picker-value-edit">')),(t=e.find(".tm-show-picker-value-edit")).focus().val(a).wrap('<div class="tm-show-picker-value-edit-wrap"></div>'),t.attr("step",i.attr("data-step")),t.attr("min",i.attr("data-min")),t.attr("max",i.attr("data-max")),E.data("range-picker-edit",e.find(".tm-show-picker-value-edit"))}),E.on("change input",".tm-show-picker-value-edit",function(){var t=Lt(this),e=t.closest(".tmcp-field-wrap").find(".tm-range-picker"),a=e.attr("data-step").split("."),t=t.val(),a=1===a.length?0:a[1].length;e.get(0).noUiSlider.set([Jt(t,{precision:a}),null])}),E.on("keydown",".tm-show-picker-value-edit",function(t){13===t.which&&t.preventDefault()}),E.on("click",function(t){E.data("range-picker-edit")&&!Lt(t.target).is(".tm-show-picker-value")&&0===Lt(t.target).closest(".tm-show-picker-value-edit-wrap").length&&((t=E.data("range-picker-edit")).closest(".tmcp-field-wrap").find(".tm-show-picker-value").data("has-edit",0).removeClass("tc-hidden"),t.closest(".tm-show-picker-value-edit-wrap").remove(),E.removeData("range-picker-edit"))}),E.data("setRangePickersEvents",1))}function Tt(t){var e,a,i,o,r;if(t.toString().isNumeric()&&0!==(e=0===t?t:0<t?1:-1)){for(a=new Date,o=!(i=1),r=Math.abs(t);i<=r;)!1===o&&(o=0),a.setDate(a.getDate()+ +e),o++,0!==a.getDay()&&6!==a.getDay()&&i++;!1!==o&&(t=o*e)}return t}function D(y){var h,t,e=".tm-epo-timepicker";Lt.tm_datepicker&&(h=Lt("input").map(function(){return this.id}).get().join(" "),(t=x.createElement("input")).setAttribute("type","date"),"text"===t.type&&(e=".tm-epo-system-timepicker"),y.find(e).toArray().forEach(function(t){var a=Lt(t),t=null,e=null,i=a.attr("data-time-format").trim(),o=a.attr("data-time-theme").trim(),r=a.attr("data-time-theme-size").trim(),c=a.attr("data-time-theme-position").trim(),n=a.attr("data-tranlation-hour").trim(),l=a.attr("data-tranlation-minute").trim(),d=a.attr("data-tranlation-second").trim();a.attr("type","text"),""!==a.attr("data-min-time").trim()&&(t=a.attr("data-min-time").trim()),""!==a.attr("data-max-time").trim()&&(e=a.attr("data-max-time").trim()),""!==a.attr("data-custom-time-format").trim()&&(i=a.attr("data-custom-time-format").trim()),n=n||Rt.hourText,l=l||Rt.minuteText,d=d||Rt.secondText,a.tm_timepicker(Object.assign({isRTL:Rt.isRTL,hourText:n,minuteText:l,secondText:d,timeFormat:i,minTime:t,maxTime:e,closeText:Rt.closeText,showOn:"both",buttonText:"",beforeShow:function(t,e){Lt(e.dpDiv).removeClass(h).removeClass("tm-ui-skin-epo tm-ui-skin-epo-black tm-datepicker-medium tm-datepicker-small tm-datepicker-large tm-datepicker-normal tm-datepicker-top tm-datepicker-bottom").addClass(this.id+" tm-bsbb-all tm-ui-skin-"+o+" tm-timepicker tm-datepicker tm-datepicker-"+c+" tm-datepicker-"+r).appendTo("body"),E.off("click",".tm-ui-dp-overlay").on("click",".tm-ui-dp-overlay",function(){a.tm_timepicker("hide")}),I.addClass("tm-static"),a.prop("readonly",!0),Qt.trigger({type:"tm-timepicker-beforeShow",input:t,inst:e})},onClose:function(){I.removeClass("tm-static"),a.prop("readonly",!1),a.trigger("change")}},P.tmTimepickerSettings||P.timepicker_settings||{})),Lt("#ui-tm-datepicker-div").hide()}),y.find(".tm-epo-datepicker").toArray().forEach(function(t){var e,l=Lt(t),t=parseInt(l.attr("data-start-year").trim(),10),a=parseInt(l.attr("data-end-year").trim(),10),i=l.attr("data-min-date").trim(),o=l.attr("data-max-date").trim(),d=l.attr("data-disabled-dates").trim(),p=l.attr("data-enabled-only-dates").trim(),r=l.attr("data-exlude-disabled").trim(),s=l.attr("data-disabled-weekdays").trim().split(","),m=l.attr("data-disabled-months").trim().split(","),_=l.attr("data-date-format").trim(),c=l.attr("data-date-showon").trim(),n=l.attr("data-date-defaultdate").trim(),f=l.attr("data-date-theme").trim(),u=l.attr("data-date-theme-size").trim(),g=l.attr("data-date-theme-position").trim();""!==d&&(e=d.split(","),-1!==d.indexOf(","))&&0<e.length&&(d=e),""!==p&&(e=p.split(","),-1!==p.indexOf(","))&&0<e.length&&(p=e),""===i?i=""===t?null:new Date(t,0,1):r&&(i=Tt(i)),""===o?o=""===a?null:new Date(a,11,31):r&&(o=Tt(o)),l.data("tc-enabled_only_dates",p),l.data("tc-disabled_weekdays",s),l.data("tc-disabled_months",m),l.data("tc-disabled_dates",d),l.data("tc-format",_),l.tm_datepicker(Object.assign({monthNames:Rt.monthNames,monthNamesShort:Rt.monthNamesShort,dayNames:Rt.dayNames,dayNamesShort:Rt.dayNamesShort,dayNamesMin:Rt.dayNamesMin,isRTL:Rt.isRTL,showOtherMonths:!0,selectOtherMonths:!0,showOn:c,defaultDate:n,buttonText:"",showButtonPanel:!0,firstDay:Rt.first_day,closeText:Rt.closeText,currentText:Rt.currentText,dateFormat:_,minDate:i,maxDate:o,onSelect:function(){var t,e=Lt(this),a="#"+Lt.epoAPI.dom.id(e.attr("id")),i=e.tm_datepicker("getDate"),o="",r="",c="",n=y.find(a+"_day"),l=y.find(a+"_month"),a=y.find(a+"_year");i&&(o=i.getDate(),r=i.getMonth()+1,c=i.getFullYear(),t=Lt.tm_datepicker.formatDate(_,i),-1!==m.indexOf(r.toString())||-1!==s.indexOf(i.getDay().toString())||-1!==d.indexOf(t)||""!==p&&-1===p.indexOf(t))&&(t=e.data("tm-last-date"),t=e.data("tm-last-date")?e.data("tm-last-date"):"",e.val(t),e.tm_datepicker("setDate",t),c=t?(o=(i=e.tm_datepicker("getDate")).getDate(),r=i.getMonth()+1,i.getFullYear()):r=o=""),n.val(o),l.val(r),a.val(c),e.data("tm-last-date",e.val()),e.tm_datepicker("hide")},beforeShow:function(t,n){Lt(n.dpDiv).removeClass(h).removeClass("tm-datepicker-normal tm-datepicker-top tm-datepicker-bottom").addClass(this.id+" tm-bsbb-all tm-ui-skin-"+f+" tm-datepicker tm-datepicker-"+g+" tm-datepicker-"+u).appendTo("body"),E.off("click",".tm-ui-dp-overlay").on("click",".tm-ui-dp-overlay",function(){l.tm_datepicker("hide")}),E.off("click",".ui-tm-datepicker-current").on("click",".ui-tm-datepicker-current",function(){var t,e=new Date,e=Lt.tm_datepicker._daylightSavingAdjust(new Date(e.getFullYear(),e.getMonth(),e.getDate())),a=e.getDay(),i=e.getMonth()+1,o="#"+n.id.replace(/\\\\/g,"\\"),r=!1,c=l.tm_datepicker("getDate");if(""!==p)t=Lt.tm_datepicker.formatDate(_,c),r=-1!==p.indexOf(t);else if(-1!==m.indexOf(i.toString())||-1!==s.indexOf(a.toString()))r=!1;else{if(""!==d)return t=Lt.tm_datepicker.formatDate(_,c),[-1===d.indexOf(t),""];r=!0}r&&(Lt.tm_datepicker._setDate(n,e),Lt.tm_datepicker._gotoToday(o))}),I.addClass("tm-static"),Qt.trigger({type:"tm-datepicker-beforeShow",input:t,inst:n})},onClose:function(){I.removeClass("tm-static"),l.trigger("change")},beforeShowDay:function(t){var e,a=t.getDay(),i=t.getMonth()+1;return""!==p?(e=Lt.tm_datepicker.formatDate(_,t),[-1!==p.indexOf(e),""]):-1!==m.indexOf(i.toString())||-1!==s.indexOf(a.toString())?[!1,""]:""!==d?(e=Lt.tm_datepicker.formatDate(_,t),[-1===d.indexOf(e),""]):[!0,""]}},P.tmDatepickerSettings||{})),Lt("#ui-tm-datepicker-div").hide()}),y.find(".tmcp-date-select").on("change.cpf",function(){var t="#"+Lt.epoAPI.dom.id(Lt(this).attr("data-tm-date")),e=y.find(t),a=e.attr("data-date-format"),i=y.find(t+"_day").val(),o=y.find(t+"_month").val(),t=y.find(t+"_year").val(),a=Lt.tm_datepicker.formatDate(a,new Date(t,parseInt(o,10)-1,i));0<i&&0<o&&0<t?(e.tm_datepicker("setDate",a),e.trigger("change")):(e.val(""),e.trigger("change.cpf"))}).on("focus.cpf",function(){var t="#"+Lt.epoAPI.dom.id(Lt(this).attr("data-tm-date")),f=y.find(t),e=y.find(t+"_day"),a=y.find(t+"_month"),t=y.find(t+"_year"),u=e.val(),g=a.val(),h=t.val(),v=Lt(this);""!==h&&""!==g&&""!==u||""!==h&&""!==g&&""===u||""!==u&&""!==h&&""===g||""!==u&&""!==g&&""===h?v.find("option").toArray().forEach(function(e){var t,a,i,o,r,c,n,l,d,p,s,e=Lt(e),m=e.val(),_=h+"-"+g+"-"+u;if(v.is(".tmcp-date-day")){if(""===h||""===g)return;_=h+"-"+g+"-"+m}else if(v.is(".tmcp-date-month")){if(""===h||""===u)return;_=h+"-"+m+"-"+u}else if(v.is(".tmcp-date-year")){if(""===u||""===g)return;_=m+"-"+g+"-"+u}if(""!==m)try{(t=Lt.tm_datepicker.parseDate("yy-mm-dd",_))&&(a=t,i=Lt(i=f),r=Lt.tm_datepicker._getInst(i[0]),c=i.data("tc-enabled_only_dates"),n=i.data("tc-disabled_weekdays"),l=i.data("tc-disabled_months"),d=i.data("tc-disabled_dates"),i=i.data("tc-format"),p=a.getDay(),s=a.getDay()+1,!Lt.tm_datepicker._isInRange(r,a)||(""!==c?(o=Lt.tm_datepicker.formatDate(i,a),-1===c.indexOf(o)):-1!==n.indexOf(p.toString())||-1!==l.indexOf(s.toString())||""!==d&&(o=Lt.tm_datepicker.formatDate(i,a),-1!==d.indexOf(o)))?e.prop("disabled",!0):e.prop("disabled",!1))}catch(t){P.console.log(t),e.prop("disabled",!0),b=t}}):(e.find("option").prop("disabled",!1),a.find("option").prop("disabled",!1),t.find("option").prop("disabled",!1))}),Qt.on("resizestart",function(){var t=Lt(x.activeElement);t.is(".hasDatepicker")&&(t.data("resizestarted",!0),Lt(P).width()<768?t.data("resizewidth",!0):t.tm_datepicker("hide"))}),Qt.on("resizestop",function(){var t=Lt(x.activeElement);t.is(".hasDatepicker")&&t.data("resizestarted")&&(t.data("resizewidth")&&t.tm_datepicker("hide"),t.tm_datepicker("show")),t.data("resizestarted",!1),t.data("resizewidth",!1)}))}function jt(t){var e=t.epoEventId,a=t.main_product,i=!Lt.tcepo.formSubmitEvents[e].some(function(t){return typeof t&&"function"==typeof t.trigger&&!t.trigger()});return Lt.tcepo.formSubmitEvents[e].forEach(function(t){"object"==typeof t&&(i?t.on_true():t.on_false())}),i||setTimeout(function(){a.find(Mt.addToCartButtonSelector).first().removeClass("disabled").removeClass("loading").prop("disabled",!1).removeClass("fpd-disabled")},100),Qt.trigger("tm-apply-submit-events",{epo:{form_is_submit:i}}),i}function Ot(e){var c,n,a=e.form,t=e.this_epo_container,i=e.main_product,o=e.epoEventId;return"yes"===Rt.tm_epo_global_enable_validation&&(c={},t.find(".tmcp-ul-wrap").toArray().forEach(function(i){var o,t,e,a,r;i=Lt(i),(n=i.data("tm-validation"))&&"object"===Lt.tmType(n)&&(t=(o=i.find(".tm-epo-field")).first().attr("name"),i.is(".tm-extra-product-options-radio.tm-element-ul-radio")?(t=o.last().attr("name"),c[t]=n):i.is(".tm-extra-product-options-checkbox.tm-element-ul-checkbox")?o.toArray().forEach(function(t){"required"in n&&(n.required=function(t){var e=i.find("input.tm-epo-field.tmcp-checkbox:checked").length;return 0===e?o.last().attr("name")===Lt(t).attr("name"):e<=0}),c[Lt(t).attr("name")]=n}):i.is(".tm-extra-product-options-product.tm-element-ul-product")?(o=o.filter(".tc-epo-field-product")).is(":checkbox")?o.toArray().forEach(function(t){"required"in n&&(r=Lt(t)).is(":checkbox")&&(n.required=function(t){var e=i.find("input.tm-epo-field.tmcp-checkbox:checked"),a=e.length;return 0===a?o.last().attr("name")===Lt(t).attr("name"):(t=e.map(function(){return Lt(this)}).get().some(function(t){return t.closest(".tc-epo-element-product-holder").find(".tm-qty").first().val()<=0}),0<a?t:a<=0)},"variable"===r.attr("data-type"))&&(e=r.closest(".tc-epo-element-product-holder").find(".product-variation-id").first().attr("name"),a={required:function(t){t=Lt(t).closest(".tc-epo-element-product-holder").find(".tc-epo-field-product");return!(!q(t,!0)||!t.is(":checked"))}},c[e]=a),c[r.attr("name")]=n}):o.is(":radio")?(n.product_element_radio_qty=!0,c[o.attr("name")]=n,e=o.closest(".tc-element-container").find(".product-variation-id").first().attr("name"),a={required:function(t){t=Lt(t).closest(".tc-element-container").find(".tc-epo-field-product:checked");return!!(t.length&&"variable"===t.attr("data-type")&&q(t,!0)&&t.is(":checked"))}},c[e]=a):o.is("select")&&(n.product_element_select_qty=!0,c[o.attr("name")]=n,e=o.closest(".tc-element-container").find(".product-variation-id").first().attr("name"),a={required:function(t){t=Lt(t).closest(".tc-element-container").find(".tc-epo-field-product");return!(!t.length||"variable"!==t.children(":selected").attr("data-type")||!q(t,!0))}},c[e]=a):c[t]=n)}),a.removeData("tc_validator"),a.tc_validate({focusInvalid:!1,ignore:Mt.qtySelector+',.tcdisabled,.tmcp-upload-hidden,#wc_bookings_field_duration,input.tm-qty:hidden[type="number"],input.input-text.qty,.ignore,.variations select,.tc-epo-variable-product-selector,.tm-extra-product-options-variations input,.tm-extra-product-options-variations select,input:not('+Mt.epoSelector+" input),select:not("+Mt.epoSelector+" select)",rules:c,errorClass:"tm-error",validClass:"tm-valid",errorElement:"label",errorPlacement:function(t,e){return t.addClass("tc-cell tcwidth tcwidth-100"),"before"===Rt.tm_epo_global_error_label_placement?e.closest(".tc-element-container").before(t):e.closest(".tc-element-container").after(t),!1},invalidHandler:function(t,e){Qt.trigger("tm-invalidHandler",{epo:{validator:e}}),setTimeout(function(){i.find(Mt.addToCartButtonSelector).first().is(".disabled")||(i.find(Mt.addToCartButtonSelector).first().removeClass("loading").prop("disabled",!1).removeClass("fpd-disabled"),i.find(Mt.addToCartButtonSelector).first().removeClass("disabled").removeClass("loading").prop("disabled",!1).removeClass("fpd-disabled"))},100),e.errorList&&e.errorList[0]&&e.errorList[0].element&&m(Lt(e.errorList[0].element),o)},submitHandler:function(){var t;return e.is_quickview||(i.find(Mt.addToCartButtonSelector).first().addClass("disabled"),t=function(){i.find(Mt.addToCartButtonSelector).first().removeClass("disabled"),E.off("ajaxSuccess",t)},E.on("ajaxSuccess",t)),jt(e)}}),a.find(Mt.addToCartButtonSelector).on("click",function(t){a.tc_validate().form()||(t.preventDefault(),t.stopImmediatePropagation())}),!0)}function Yt(g,t,h,v,y,b,w,x,k,e,F,A,a,P){var I,E,C,q,S,T,j,i="none",O=0;return"none"!==(i=a?i:t.attr("class")+t.attr("data-uniqid")+h+g.is_associated+k+x+k+e||"none")&&!0!==z&&!1!==z&&void 0!==z[i]?z[i]:(I=e?"undiscounted_":"",a=t.find(h),!1===g.is_associated&&(a=a.not(Mt.associatedEpoSelector+" "+h+",.cpf-type-variations "+h)),x||(a=a.filter(".tcenabled")),E=j=T=v=v||0,C=y=y||0,b=b||[],q=g.this_epo_totals_container,a.length&&a.toArray().forEach(function(t){var e,a,i,o,r,c,n,l=Lt(t),d="",t=l.closest(".cpf-element"),p=l.closest(".tmcp-field-wrap"),s=t.attr("data-fblabelshow"),m=t.attr("data-fbvalueshow"),_="",p=p.find(".tm-qty").val(),f="",u=!1;".tc-epo-field-product"===h&&(t.is(".cpf-type-product-thumbnailmultiple")||t.is(".cpf-type-product-checkbox")||t.is(".cpf-type-product-custombundle")?S=l.closest(".tc-epo-element-product-holder").find(Mt.associatedEpoSelector):t.is(".cpf-type-product-thumbnail")||t.is(".cpf-type-product-radio")||t.is(".cpf-type-product-dropdown")?S=t.find('.tc-epo-element-product-container[data-product_id="'+l.val()+'"]').find(Mt.associatedEpoSelector):t.is(".cpf-type-product-single")&&(S=t.find(Mt.associatedEpoSelector)),q=Lt(".tc-epo-totals.tm-product-id-"+S.attr("data-product-id")+'[data-epo-id="'+S.attr("data-epo-id")+'"]')),q.length&&(""===s&&(_=t.find(".tc-epo-element-label-text").html()),void 0===p&&(p=""),F&&Gt(g,l,void 0,void 0,void 0,void 0,T,j),l.is(":checkbox, :radio, :input"))&&(o=i=a=e=0,l.is(".tmcp-checkbox, .tmcp-radio")?x||l.is(":checked")?(e=l.data(I+"raw_price"),a=l.data(I+"price"),i=l.data(I+"raw_original_price"),o=l.data(I+"original_price"),w=!0,l.data("isset",1),t=l.closest("li.tmcp-field-wrap").find(".tc-image"),f=d="",(r=l.closest("li.tmcp-field-wrap").find(".tc-label-text")).length&&(d=r.html(),f=d),t.length&&((t=t.closest(".tc-label-wrap").clone().addClass("tc-img-floating")).find(".tc-label, .tc-epo-style-wrapper, .tc-input-wrap").remove(),d=t[0].outerHTML+'<span class="tc-label-text">'+d+"</span>"),u=!0):l.data("isset",0):l.is(".tmcp-select")?(n=l.find("option:selected"),e=n.data(I+"raw_price"),a=n.data(I+"price"),i=n.data(I+"raw_original_price"),o=n.data(I+"original_price"),""===(c=l.children("option:selected")).val()&&""===c.attr("data-rulestype")||(w=!0),l.find("option").data("isset",0),n.data("isset",1),""===n.val()&&""===n.attr("data-rulestype")||(d=n.attr("data-text"),u=!0,f=d)):l.is(".tmcp-selectmultiple")?(n=l.find("option:selected")).toArray().forEach(function(t){t=Lt(t),e+=Lt.epoAPI.math.toFloat(t.data(I+"raw_price")),a+=Lt.epoAPI.math.toFloat(t.data(I+"price")),i+=Lt.epoAPI.math.toFloat(t.data(I+"raw_original_price")),o+=Lt.epoAPI.math.toFloat(t.data(I+"original_price")),""===(c=l.children("option:selected")).val()&&""===c.attr("data-rulestype")||(w=!0),l.find("option").data("isset",0),t.data("isset",1),""===t.val()&&""===t.attr("data-rulestype")||(d=t.attr("data-text"),u=!0,f=d)}):(r=l.val(),!(r=l.is("[type='file']")?r.replace("C:\\fakepath\\",""):r)||l.is(".tmcp-range")&&"0"===r?l.data("isset",0):(e=l.data(I+"raw_price"),a=l.data(I+"price"),i=l.data(I+"raw_original_price"),o=l.data(I+"original_price"),w=!0,l.data("isset",1),d=r,l.is(".tmcp-range")&&(t=1===(t=l.closest(".tmcp-field-wrap").find(".tm-range-picker").attr("data-step").split(".")).length?0:t[1].length,d=Jt(d,{precision:t})),u=!0,l.is(".tmcp-dynamic")&&(m=s="hidden"),f=r)),e=e||0,i=i||0,a=a||0,o=o||0,u&&b.push({title:_,value:d,valueText:f,price:a,original_price:o,quantity:p,label_show:s,value_show:m,input_type:l.attr("type")}),void 0!==P&&0<P&&l.is(".tc-is-dnmpbq")&&(e/=P),a=$t(e,q,l,0,void 0,void 0,!0),o=$t(i,q,l,0,void 0,void 0,!0),k&&(e=a,i=o),v=Lt.epoAPI.math.toFloat(v)+Lt.epoAPI.math.toFloat(e),v=Lt.epoAPI.math.toFloat(Lt.epoAPI.math.round(v,10)),y=Lt.epoAPI.math.toFloat(y)+Lt.epoAPI.math.toFloat(i),y=Lt.epoAPI.math.toFloat(Lt.epoAPI.math.round(y,10)),E=Lt.epoAPI.math.toFloat(E)+Lt.epoAPI.math.toFloat(a),E=Lt.epoAPI.math.toFloat(Lt.epoAPI.math.round(E,10)),O+=Lt.epoAPI.math.toFloat(Ut(a,q)),C=Lt.epoAPI.math.toFloat(C)+Lt.epoAPI.math.toFloat(o),C=Lt.epoAPI.math.toFloat(Lt.epoAPI.math.round(C,10)),A)&&(j=v)}),e={total:v,original_total:y,total_taxed:E,original_total_taxed:C,vat_total:O,floatingBoxData:b,showTotal:w,elementsLength:a.length},!0===z?(z={})[i]=e:!0!==z&&!1!==z&&(z[i]=e),e)}function pe(t,e,a,i,o,r,c,n,l){var d,p=Lt.extend(!0,{},t),s=a.find(Mt.associatedEpoSelector),m=a,_=!0;o.removeData("triggeredforced"),m.closest(".cpf-element").is(".tc-hidden")||(c.addClass("tm-hidden"),c.length&&w(c,!0),"variable"===i?a.is(".tc-init-variations")?a.trigger("refresh.tc-variation-form"):(a.addClass("variations_form"),setTimeout(function(){d=h(m,!1,s.attr("data-product-id"),s.attr("data-epo-id"),o,p),a.addClass("tc-init-variations"),a.tc_product_variation_form(o,r,c,d)},40),_=!1):a.is(".tc-init-product")||(a.addClass("tc-init-product"),c.find(".tc-epo-element-variable-product").removeClass("variations_form"),c.find(".tc-epo-element-variations").removeClass("variations"),setTimeout(function(){h(m,!1,s.attr("data-product-id"),s.attr("data-epo-id"),o,p)},20),_=!1),setTimeout(function(){c.length&&w(a,!1),a.find(":checkbox:checked, :radio:checked").toArray().forEach(function(t){Lt(t).closest(".tmcp-field-wrap").addClass("tc-active")})},10),setTimeout(function(){l.length&&l.trigger("change"),0===a.find(Mt.epoSelector).length&&a.addClass("no-epo"),a.removeClass("tm-hidden"),_&&(Qt.trigger("cpflogicdone"),a.find(".tm-quantity").trigger("showhide.cpfcustom")),void 0===n&&"yes"===Rt.tm_epo_global_product_element_scroll&&Qt.tcScrollTo(a,200,Lt.epoAPI.math.toFloat(Rt.tm_epo_global_product_element_scroll_offset))},210))}function zt(Ft,At,Pt){var It,Et,Ct,qt,t,St,y,Tt,jt,Ot,e,a,i,o,r,c,n,l,d,p,s=Ft.product_id,zt=Ft.main_product,Dt=Ft.main_cart,m=Ft.this_epo_container,_=Ft.this_totals_container,Ht=Ft.this_epo_totals_container,Nt=Ft.epoEventId,Bt=Ft.main_epo_inside_form,f=Ft.epo_id_selector,b=Ft.epo_id,w=Ft.product_id_selector,u="main",g=Ft.is_associated?"tc-variation-form":"wc-variation-form",h=Ft.is_associated?"tc_":"",v=Pt&&At?(u=Lt.epoAPI.applyFilter("tc_get_item_id",At.attr("data-item_id"),At),It=zt.find(".tm-extra-product-options.tm-cart-"+u),Et=zt.find(".tm-totals-form-"+u),Ct=zt.find(".tm-epo-totals.tm-cart-"+u),At.find(".variations_form").first()):(Dt&&0!==Dt.length||(Dt=m.is(".tc-shortcode")?zt:it(zt,zt,"form",s)),At=Dt.parent(),It=m,Et=_,Ct=Ht,Ft.variations_form);Ft.is_associated&&(u=It.attr("data-cart-id")),qt=Pt||Dt,Ct.data("tm_for_cart",qt),t=Kt(qt),y=te(qt),Ct.data("variationIdElement",(l=".wceb_picker_wrap "+t,d=Kt(n=qt),p=n.find(d),p=n.is(".tc-epo-element-product-container-cart")?n.closest(".tc-epo-element-product-li-container").find(d):n.find(d).not(".tc-epo-element-product-container-variation-id "+d),p=l?p.not(l):p)),Ct.data("qty_element",y),St=Ct.data("type"),v.data("tc_product_id",s),Tt=Ct.attr("data-tm-epo-final-total-box"),jt=Ct.attr("data-tm-epo-show-final-total"),Ot=Ct.attr("data-tm-epo-show-options-total"),Qt.trigger("epoEventHandlersStart",{epo:Ft,cart:qt,alternativeCart:Pt,cartContainer:At,totalsHolderContainer:Et,totalsHolder:Ct,epoHolder:It}),Qt.on("epoCalculateRules",function(t,e){t&&e&&e.currentCart&&le(Ft,e.currentCart)}),qt.is("form")&&qt.on("reset",function(){var t=Lt(this);setTimeout(function(){Lt(t.data("epo_id_selector")).find(".tm-epo-field").trigger("change")},1)}),le(Ft,qt),n=It.find(".tm-epo-field"),Ft.is_associated||(n=n.not(Mt.epoSelector+" "+Mt.associatedEpoSelector+" .tm-epo-field")),d=It.find(".tm-epo-field.tmcp-textarea,.tm-epo-field.tmcp-textfield"),Ft.is_associated||(d=d.not(Mt.epoSelector+" "+Mt.associatedEpoSelector+" .tm-epo-field")),l=It.find(".tm-epo-reset-radio"),Ft.is_associated||(l=l.not(Mt.epoSelector+" "+Mt.associatedEpoSelector+" .tm-epo-reset-radio")),p=It.find(".tm-epo-field.tmcp-upload"),Ft.is_associated||(p=p.not(Mt.epoSelector+" "+Mt.associatedEpoSelector+" .tm-epo-field.tmcp-upload")),o=It.find(".tm-has-clearbutton .tm-epo-field"),Ft.is_associated||(o=o.not(Mt.epoSelector+" "+Mt.associatedEpoSelector+" .tm-has-clearbutton .tm-epo-field")),r=It.find(".tm-quantity .tm-qty"),Ft.is_associated||(r=r.not(Mt.epoSelector+" "+Mt.associatedEpoSelector+" .tm-quantity .tm-qty")),c=It.find(".tm-quantity"),Ft.is_associated||(c=c.not(Mt.epoSelector+" "+Mt.associatedEpoSelector+" .tm-quantity")),i=It.find("select.tm-epo-field"),(i=Ft.is_associated?i:i.not(Mt.epoSelector+" "+Mt.associatedEpoSelector+" select.tm-epo-field")).off("tm-select-change-html").on("tm-select-change-html",function(){var t,e,a,i=Lt(this);i.is(".tc-epo-field-product")||i.is(".tmcp-selectmultiple")||Dt&&void 0!==Dt.data("per_product_pricing")&&!Dt.data("per_product_pricing")||(a=Zt(i.find("option:selected").data("price"),Ct,!0,i),t=i.closest(".tmcp-field-wrap").find(".tc-tooltip"),e=i.closest(".tmcp-field-wrap").find(".tc-inline-description"),L({epoObject:Ft,obj:i.closest(".tmcp-field-wrap").find(".tc-price"),price:i.find("option:selected").data("price"),original_price:i.find("option:selected").data("original_price"),force:!1,useFormattedPrice:!1}),0<t.length&&t.attr("data-tm-tooltip-html",i.find("option:selected").attr("data-tm-tooltip-html")).trigger("tc-tooltip-html-changed"),0<e.length&&(i.find("option:selected").attr("data-tm-tooltip-html")?e.html(i.find("option:selected").attr("data-tm-tooltip-html")):e.html("")),("0"===i.find("option:selected").attr("data-hide-amount")||"yes"===Rt.tm_epo_show_price_inside_option_hidden_even)&&"yes"===Rt.tm_epo_show_price_inside_option&&i.find("option:selected").attr("data-text")&&(i.find("option:selected").data("price")||"yes"===Rt.tm_epo_no_hide_price_if_original_not_zero&&i.find("option:selected").data("original_price"))&&("yes"===Rt.tm_epo_auto_hide_price_if_zero&&!1===Lt.epoAPI.util.isEmpty(i.find("option:selected").data("price"))||"yes"!==Rt.tm_epo_auto_hide_price_if_zero&&""!==i.find("option:selected").attr("data-price")?i.find("option:selected").html(i.find("option:selected").attr("data-text")+" ("+a+")"):i.find("option:selected").html(i.find("option:selected").attr("data-text"))),""!==i.val()&&i.find("option:selected").attr("data-tm-tooltip-html")?t.removeClass("tm-hidden"):t.addClass("tm-hidden"))}).off("tm-math-select-change-html-all tm-select-change-html-all tm-select-change-html-all-math").on("tm-math-select-change-html-all tm-select-change-html-all tm-select-change-html-all-math",function(e){var t,a,i,o=Lt(this);o.is(".tc-epo-field-product")||(t=o.closest(".tmcp-field-wrap").find(".tc-tooltip"),a=o.closest(".tmcp-field-wrap").find(".tc-inline-description"),0<t.length&&t.attr("data-tm-tooltip-html",o.find("option:selected").attr("data-tm-tooltip-html")).trigger("tc-tooltip-html-changed"),""!==o.val()&&o.find("option:selected").attr("data-tm-tooltip-html")?t.removeClass("tm-hidden"):t.addClass("tm-hidden"),0<a.length&&(o.find("option:selected").attr("data-tm-tooltip-html")?a.html(o.find("option:selected").attr("data-tm-tooltip-html")):a.html("")),Dt&&void 0!==Dt.data("per_product_pricing")&&!Dt.data("per_product_pricing"))||"yes"===Rt.tm_epo_show_price_inside_option&&o.find("option").toArray().forEach(function(t){if(!(t=Lt(t)).val())return!0;"tm-select-change-html-all"===e.type?(t.removeClass("tm-epo-late-field").removeData("tm-price-for-late islate"),Gt(Ft,o,void 0,t,1)):"tm-math-select-change-html-all"===e.type?Gt(Ft,o,void 0,t,1,!0):"tm-select-change-html-all-math"===e.type&&(t.removeClass("tm-epo-late-field").removeData("tm-price-for-late islate"),Gt(Ft,o,void 0,t,1,!0)),i=1,i=(i="yes"!==Rt.tm_epo_multiply_price_inside_option?o.data("tm-quantity"):i)||1,"yes"===Rt.tm_epo_auto_hide_price_if_zero&&!1===Lt.epoAPI.util.isEmpty(t.data("price"))||"yes"!==Rt.tm_epo_auto_hide_price_if_zero&&""!==t.attr("data-price")?(i=Zt(t.data("price")/i,Ct,!0,o),"0"!==t.attr("data-hide-amount")&&"yes"!==Rt.tm_epo_show_price_inside_option_hidden_even||!t.attr("data-text")||t.html(t.attr("data-text")+" ("+i+")")):t.html(t.attr("data-text"))})}).off("tm-select-price-update-html-all").on("tm-select-price-update-html-all",function(){var e,a=Lt(this);a.is(".tc-epo-field-product")||Dt&&void 0!==Dt.data("per_product_pricing")&&!Dt.data("per_product_pricing")||"yes"===Rt.tm_epo_show_price_inside_option&&a.find("option").toArray().forEach(function(t){if(!(t=Lt(t)).val())return!0;e=1,e=(e="yes"!==Rt.tm_epo_multiply_price_inside_option?a.data("tm-quantity"):e)||1,"yes"===Rt.tm_epo_auto_hide_price_if_zero&&!1===Lt.epoAPI.util.isEmpty(t.data("price"))||"yes"!==Rt.tm_epo_auto_hide_price_if_zero&&""!==t.attr("data-price")?(e=Zt(t.data("price")/e,Ct,!0,a),"0"!==t.attr("data-hide-amount")&&"yes"!==Rt.tm_epo_show_price_inside_option_hidden_even||!t.attr("data-text")||t.html(t.attr("data-text")+" ("+e+")")):t.html(t.attr("data-text"))})}).off("tm-select-change").on("tm-select-change",function(){var t=Lt(this),e=t.closest(".cpf-element").attr("data-uniqid");t.is(".tc-epo-field-product")||Dt&&void 0!==Dt.data("per_product_pricing")&&!Dt.data("per_product_pricing")||(t.removeData("addedtcEpoBeforeOptionPriceCalculation"),t.removeData("addedfieldtcEpoBeforeOptionPriceCalculation"),Qt.off("tcEpoBeforeOptionPriceCalculation.math"+e),Qt.off("tcEpoAfterNormalOptionPriceCalculation.math"+e),t.trigger("tm-select-change-html"),t.trigger("tm-select-change-html-all"),qt.trigger({type:"tm-epo-update",norules:1,element:t}))}).trigger("tm-select-change-html-all"),r.off("focus.cpf").on("focus.cpf",function(){var t=Lt(this),e=t.closest(".tmcp-field-wrap").find(".tm-epo-field"),a=parseFloat(t.val()),i=parseFloat(t.attr("max")),o=parseFloat(t.attr("min")),r=t.attr("step"),c=ot(e,!1),e=rt(e,!1),n=!0;a&&""!==a&&"NaN"!==a||(a=0),""!==i&&"NaN"!==i||(i=""),""!==o&&"NaN"!==o||(o=0),"any"!==r&&""!==r&&void 0!==r&&parseFloat(r),(a<o||i<a)&&(n=!1),c&&e&&n?t.data("tm-prev-value",a):t.data("tm-prev-value",o)}).off("change.cpf").on("change.cpf",function(t,e){var a=Lt(this),i=a.closest(".tmcp-field-wrap").find(".tm-epo-field"),o=parseFloat(a.val()),r=parseFloat(a.attr("max")),c=parseFloat(a.attr("min")),n=a.attr("step"),l=ot(i,!1),d=rt(i,!1),p=!0;o&&""!==o&&"NaN"!==o||(o=0),""!==r&&"NaN"!==r||(r=""),""!==c&&"NaN"!==c||(c=0),"any"!==n&&""!==n&&void 0!==n&&parseFloat(n),(o<c||r<o)&&(p=!1),l&&d&&p?(Ft.noEpoUpdate?i.data("tm-quantity",a.val()).trigger("change.cpf",e).trigger("change.cpfproduct",e):i.data("tm-quantity",a.val()).trigger("change",e),i.trigger("tm-select-change-html-all")):a.data("tm-prev-value")?a.val(a.data("tm-prev-value")):a.val(c),a.trigger("cpf-changed")}).off("tmaddquantity").on("tmaddquantity",function(){var t=Lt(this);t.closest(".tmcp-field-wrap").find(".tm-epo-field").data("tm-quantity",t.val())}),a=It.find(".tmcp-textfield.tm-epo-field[maxlength],textarea.tm-epo-field[maxlength]"),(a=Ft.is_associated?a:a.not(Mt.epoSelector+" "+Mt.associatedEpoSelector+" .tm-epo-field")).toArray().forEach(function(t){var e;(t=Lt(t)).data("tcmaxlength")||(t.data("tcmaxlength",1),e=t.closest(".tmcp-field-wrap-inner"),t=Lt.epoAPI.template.html(Mt.templateEngine.tc_chars_remanining,{maxlength:t.attr("maxlength"),characters_remaining:Rt.i18n_characters_remaining}),e.append(Lt(t)))}),a.off("change.tc_maxlen input.tc_maxlen").on("change.tc_maxlen input.tc_maxlen",function(){var t=Lt(this);t.closest(".tmcp-field-wrap").find(".tc-chars-remanining").html(parseInt(t.attr("maxlength"),10)-parseInt(t.val().length,10))}),n.off("tm_trigger_product_image").on("tm_trigger_product_image",function(){var t,e,a,i,o=Lt(this);o.is(".tm-product-image:checkbox, .tm-product-image:radio, select.tm-product-image")?(e=o.closest(".tmcp-field-wrap").find("label img"),a=o.closest(".cpf-section").is(".tm-epo-variation-section"),(t=o).is("select.tm-product-image")&&(t=o.children("option:selected")),(0<Lt(e).length||a&&void 0!==t.attr("data-image")||void 0!==t.attr("data-image")&&""!==t.attr("data-image")||void 0!==t.attr("data-imagep")&&""!==t.attr("data-imagep"))&&(o.is(":checked")||o.is("select.tm-product-image")&&""!==o.val()&&(""!==o.find("option:selected").attr("data-rules")||o.is(".tm-epo-variation-element")))?(i=(i=(i=Lt(e).first().attr("data-original"))||a?i:Lt(e).first().attr("src"))||t.attr("data-image"),(i=t.attr("data-imagep")?t.attr("data-imagep"):i)?zt.trigger("tm_change_product_image",{src:i,element:o,element_current:t,main_product:zt,epo_holder:It}):zt.trigger("tm_change_product_image",{src:!1,element:o,element_current:t,main_product:zt,epo_holder:It})):zt.trigger("tm_restore_product_image",{element:o,element_current:t,main_product:zt,epo_holder:It})):zt.trigger("tm_attempt_product_image",{element:o,element_current:t,main_product:zt,epo_holder:It})}),c.off("showhide.cpfcustom").on("showhide.cpfcustom",function(){var t,e,a,i=Lt(this),o=i.closest(".tmcp-field-wrap").find(".tm-epo-field"),r=!1;o.is(".tm-epo-variation-element")||(o.is("select")?""!==o.val()&&(r=!0):o.is(":checkbox")?o.is(":checked")&&(r=!0):o.is(":radio")?o.is(":checked")&&(r=!0,"yes"===Rt.tm_epo_show_only_active_quantities)&&o.closest(".tc-element-inner-wrap").find(".tm-epo-field.tmcp-radio").toArray().forEach(function(t){Lt(t).closest(".tmcp-field-wrap").find(".tm-quantity").hide()}):o.val()&&(r=!0),o=i.find(".tm-qty"),a=i.find(".tc-qty-button"),t=o.val(),e=o.attr("min")||"",r?("yes"===Rt.tm_epo_show_only_active_quantities&&i.show(),o.removeClass("ignore").prop("disabled",!1),a.prop("disabled",!1)):("yes"===Rt.tm_epo_show_only_active_quantities&&(i.hide(),t||o.val(e)),o.addClass("ignore").prop("disabled",!0),a.prop("disabled",!0)),It.is(".tc-show")&&setTimeout(function(){i.closest(".tcowl-carousel").trigger("refresh.owl.carousel")},200))}),n.off("change.cpfcustom").on("change.cpfcustom",function(){Lt(this).closest(".tmcp-field-wrap").find(".tm-quantity").trigger("showhide.cpfcustom")}),n.off("change.cpf").on("change.cpf",function(t,e){var a=Lt(this),i=a.closest(".tmcp-field-wrap"),o=a.closest(".tmcp-ul-wrap"),r=o.attr("data-tm-connector");a.is(":checkbox, :radio")&&(a.is(":radio")&&(e||(void 0!==r?Lt('[data-tm-connector="'+r+'"]').find(".tmcp-field-wrap").removeClass("tc-active").find(".tm-epo-reset-radio").addClass("tm-hidden"):o.find(".tmcp-field-wrap").removeClass("tc-active")),void 0!==r)&&Lt('[data-tm-connector="'+r+'"]').find(".tmcp-field-wrap").removeClass("tc-active").find(".tm-epo-reset-radio").addClass("tm-hidden"),a.is(":checked")?i.addClass("tc-active"):i.removeClass("tc-active")),a.is(".tm-epo-variation-element")||(a.is(".use_images:checkbox, .use_images:radio")&&a.attr("data-imagec")&&0<(o=i.find(".radio-image,.checkbox-image").first()).length&&(a.is(":checked")?o.prop("src",a.attr("data-imagec")):o.prop("src",a.attr("data-image"))),a.is(".use_images:radio")&&!e&&a.closest(".cpf-type-radio").find(".use_images:radio").not(a).toArray().forEach(function(t){(t=Lt(t)).closest(".tmcp-field-wrap").find(".radio-image").first().prop("src",t.attr("data-image"))}),a.is(".tmcp-range")&&a.trigger("change.cpflogic"),a.is("select")?a.trigger("tm-select-change"):(a.is(".tmcp-radio")&&a.closest(".cpf-element").find(".tm-quantity .tm-qty").toArray().forEach(function(t){(t=Lt(t)).closest("li.tmcp-field-wrap").find(".tmcp-radio").is(":checked")?t.prop("disabled",!1):t.attr("disabled","disabled")}),z=!0,qt.trigger({type:"tm-epo-update",norules:1,element:a}),z=!1)),a.trigger("tm_trigger_product_image"),It.is(".tc-show")&&setTimeout(function(){Lt(".tm-owl-slider").toArray().forEach(function(t){Lt(t).trigger("refresh.owl.carousel")})},200),zt.trigger("tm_attempt_product_image",{element:a,main_product:zt,epo_holder:It})}),n.filter('.tm-epo-field:text,input.tm-epo-field[type="number"],textarea.tm-epo-field').off("input.cpf").on("input.cpf",function(){Lt(this).trigger("change.cpf",{autoload:1})}),n.filter(":checkbox:checked, :radio:checked").toArray().forEach(function(t){Lt(t).closest(".tmcp-field-wrap").addClass("tc-active").trigger("change.cpf",{autoload:1})}),o.off("change.cpfclearbutton").on("change.cpfclearbutton cpfclearbutton",function(){var t,e=Lt(this),a=e.closest(".tmcp-field-wrap");e.is(":checked")&&((t=(t=(t=(t=e.closest(".tc-element-inner-wrap")).find(".tc-epo-element-product-li-container").length?t.find(".tmcp-ul-wrap").first().children(".tmcp-field-wrap").not(".tc-epo-element-product-li-container"):t).find(".tm-epo-reset-radio")).length?t:e.closest(".tc-element-inner-wrap").find(".tm-epo-reset-radio").first()).removeClass("tm-hidden"),a.append(t))}),l.off("click.cpf").on("click.cpf",function(){var t=Lt(this),e=t.closest(".tc-element-inner-wrap").find(".tm-epo-field.tmcp-radio:checked");e.length&&(e.prop("checked",!1),e.trigger("change",{forced:1})),t.addClass("tm-hidden")}),N&&N.debounce&&d.on("keyup",N.debounce(function(){var t=Lt(this),e=qt;Ft.is_associated&&(e=Ft.mainEpoObject.form),"yes"===Rt.tm_epo_global_enable_validation&&Lt.tc_validator&&t.closest(".tmcp-ul-wrap").data("tm-validation")&&t.tc_rules()&&e.tc_validate().element(t),t.trigger("change.cpf"),t.closest(".tmcp-field-wrap").find(".tm-quantity").trigger("showhide.cpfcustom")},10)),p.off("change.cpfv tcupload").on("change.cpfv tcupload",function(){var i,t,o,r,c,n=Lt(this),e=n.closest("label"),a=n.closest(".tmcp-field-wrap"),l=a.find(".cpf-upload-container"),d=a.find(".tm-filename"),p=n.val().replace("C:\\fakepath\\",""),s=[],m=P.URL||P.webkitURL,_=a.find(".tc-upload-preview");l.length&&d.length<=0&&(d=Lt('<span class="tm-filename"></span>'),e.after(d)),void 0!==p&&"undefined"!==p||(p=""),n.next(".tmcp-upload-hidden").remove(),s=(s=n.attr("data-file"))?s.split("|"):[],this.files?t=Array.from(this.files):0<s.length&&(t=s),1<t.length?d.html(t.length+" "+(1===t.length?Rt.i18n_file:Rt.i18n_files)):1===t.length?d.html(p):d.empty(),_.length||(_=Lt('<div class="tc-upload-preview tc-hidden"></div>'),a.append(_)),_.empty(),i=(i=It.data("num_uploads"))||[],c=n.closest(".cpf-element").attr("data-uniqid"),i[c]||(i[c]=[]),(p||0<t.length)&&m&&m.createObjectURL?("yes"===Rt.tm_epo_upload_inline_image_preview&&(1<t.length?_.addClass("multiple"):_.removeClass("multiple"),_.removeClass("tc-hidden")),r=function(t,e,a,i,o){var a=n[0].files&&n[0].files[a]&&n[0].files[a].size?n[0].files[a].size:0,r='<div class="tc-upload-image">';e?r=r+'<img src="'+e+'">':r+='<div class="tc-file-ext-overlay"></div>',r=r+'<div class="tc-file-name">'+t.name+"</div>",(k||F)&&(r+='<button type="button" class="tc-upload-remove"><svg width="26" height="26" viewBox="0 0 26 26" xmlns="http://www.w3.org/2000/svg"><path d="M11.586 13l-2.293 2.293a1 1 0 0 0 1.414 1.414L13 14.414l2.293 2.293a1 1 0 0 0 1.414-1.414L14.414 13l2.293-2.293a1 1 0 0 0-1.414-1.414L13 11.586l-2.293-2.293a1 1 0 0 0-1.414 1.414L11.586 13z" fill="currentColor" fill-rule="nonzero"/></svg></button>'),r=(r=o?r+'<div class="tc-file-ext">'+o+"</div>":r)+'<div class="tc-file-size">'+(e=a,a=(o=(t=Math).log)(e)/o(1024)|0,(e/t.pow(1024,a)).toFixed(a?2:0))+" "+(a?"KMGTPEZY"[--a]+"B":"bytes")+"</div>",i.append(r+="</div>")},t.forEach(function(t,e){var a;"yes"===Rt.tm_epo_upload_inline_image_preview&&(a=Lt('<div class="tc-upload-file"></div>'),_.append(a),(o=new Image).onload=function(){r(t,this.src,e,a)},o.onerror=function(){r(t,!1,e,a,t.name.split(".").pop())},0<s.length?o.src=s[e]:(o.src=m.createObjectURL(t),m.revokeObjectURL(t))),i[c].push(t.name)}),It.data("num_uploads",i)):delete i[c],i[c]&&0===i[c].length&&delete i[c]}),E.on("click",".tc-upload-remove",function(){var t,e,a,i,o,r,c,n,l=Lt(this);(k||F)&&(e=(t=l.closest(".cpf-element")).find(".tm-epo-field"),c=l.closest(".tc-upload-file"),r=(l=l.closest(".tmcp-field-wrap")).find(".tc-upload-preview"),l=l.find(".tm-filename"),a=c.index(),void 0!==(n=e.val().replace("C:\\fakepath\\",""))&&"undefined"!==n||(n=""),(o=Array.from(e[0].files)).splice(a,1),i=new k("").clipboardData||new F,o.forEach(function(t){i.items.add(t)}),1<o.length?r.addClass("multiple"):r.removeClass("multiple"),e[0].files=i.files,c.remove(),1<i.files.length?l.html(i.files.length+" "+(1===i.files.length?Rt.i18n_file:Rt.i18n_files)):1===i.files.length?l.html(n):l.empty(),(o=(o=It.data("num_uploads"))||[])[r=t.closest(".cpf-element").attr("data-uniqid")]||(o[r]=[]),o[r].splice(a,1),0===o[r].length&&(delete o[r],e.val("")),(c=e.next(".tmcp-upload-hidden")).length&&(0<(n=c.val().split("|")).length&&n.splice(a,1),0===n.length?c.remove():c.val(n.join("|"))),It.data("num_uploads",o))}),y.off("change.cpf input.cpf").on("change.cpf input.cpf",function(){var t=Lt(this);qt.trigger("tm-epo-check-dpd"),t.data("tm-prev-value",t.val()),qt.trigger({type:"tm-epo-update",norules:2})}).data("tm-prev-value",y.val()),It.find(".cpf-type-product").off("tc-logic").on("tc-logic",function(){var t=Lt(this);t.find(".tc-init").length||t.data("isactive")&&!t.data("donetclogic")&&(t.data("donetclogic",!0),t.find(".tc-epo-field-product").trigger("change.cpfproduct",{forced:3}))}),It.find(".cpf-type-product .tc-epo-field-product.tc-epo-field-product-checkbox").off("change.cpfrequired").on("change.cpfrequired",function(){var t,e,a=Lt(this).closest(".cpf-element");a.is(".tc-is-required")&&(e=(t=a.find(".tmcp-field.tc-epo-field-product-checkbox")).not(":checked"),(0<(a=a.find(".tmcp-field.tc-epo-field-product-checkbox:checked")).length?(e.prop("required",!1),a):(t.attr("required",!0),t)).prop("required",!0))}),It.find(".cpf-type-product .tc-epo-field-product").off("change.cpfproduct").on("change.cpfproduct",function(t,e){var a,i,o,r,c,n,l=Lt(this),d=l.closest(".cpf-element"),p=d.find(".tc-epo-element-product-container-wrap"),s=l.closest(".tmcp-field-wrap").find(".tc-epo-element-product-container-wrap"),m=0<s.length,_=!1,f=1e3,u=l,g=d.find(".tm-epo-field").not(".tc-epo-element-product-li-container .tm-epo-field"),h=g.filter(":checked"),v=l.attr("data-counter");if(!1!==d.data("isactive")&&(!e||2!==e.forced)&&(void 0===t.isTrigger||!l.data("triggeredonce")||e&&e.forced)&&3!==l.data("triggeredforced")){if(l.data("triggeredonce",1),l.is(":checkbox")||(f=t.isTrigger),g.is(":radio")?0<h.length&&(n=h.closest(".tmcp-field-wrap").find("input.tm-qty")):g.is(":checkbox")?0<h.length&&(n=l.closest(".tmcp-field-wrap").find("input.tm-qty")):n=g.closest(".tmcp-field-wrap").find("input.tm-qty"),l.is(":checkbox"))if(l.is(".tc-epo-field-product-hidden"))l.is(":checked")?p.addClass("tc-active-product"):p.removeClass("tc-active-product"),a=l.val(),i=l.attr("data-type"),d.find(".tc-epo-element-product-li-container").removeClass("tm-hidden");else{if(l.is(":checked"))m&&s.removeClass("tm-hidden");else{if(m&&s.addClass("tm-hidden"),!e||!e.forced)return;_=!0}_||(a=l.val(),i=l.attr("data-type"),d.find(".tc-epo-element-product-li-container").removeClass("tm-hidden"))}else if(l.is(":radio")){if(l.is(":checked"))m&&(p.addClass("tm-hidden"),s.removeClass("tm-hidden"));else{if(m&&s.addClass("tm-hidden"),!e||!e.forced)return;_=!0}_||(a=l.val(),i=l.attr("data-type"),d.find(".tc-epo-element-product-li-container").removeClass("tm-hidden"))}else l.is("select")&&(v=(u=t=l.children(":selected")).index(),""===l.children(":first").val()&&v--,a=l.val(),i=t.attr("data-type"),d.find(".tc-epo-element-product-li-container").removeClass("tm-hidden"));if(o=(l.is(".tc-epo-field-product-checkbox")?s:d).find(".tc-epo-element-product-container"),r=o.filter('[data-product_id="'+a+'"]'),c=r.find(Mt.associateQtySelector),""!==p.html()&&n&&0<n.length&&0===c.length&&n.val(0),l.is(":checkbox"))l.is(".tc-epo-field-product-hidden")&&(l.is(":checked")?"0"===c.val()&&"0"!==c.attr("min")&&c.val(c.attr("min")).trigger("change"):(c.val(0),c.closest(".tm-quantity-alt").removeClass("tm-hidden"),1!==e.forced&&c.closest(".tm-quantity-alt").find(".single_add_to_cart_product").trigger("cpfqtybutton"),p.find(Mt.associatedEpoCart).trigger("tm-epo-update")));else{if(!l.is(":radio")&&!l.is("select"))return;l.val()&&!l.data("set_initial")&&"0"===c.val()&&("0"!==c.attr("min")&&c.val(c.attr("min")).trigger("change"),l.data("set_initial",1))}a?0===r.length?(e&&3===e.forced&&l.data("triggeredforced",3),h={action:"wc_epo_get_associated_product_html",product_id:a,parent_id:It.attr("data-product-id"),mode:d.attr("data-mode"),layout_mode:d.attr("data-product-layout-mode"),uniqid:d.attr("data-uniqid"),name:l.attr("name"),counter:v,quantity_min:d.attr("data-quantity-min"),quantity_max:d.attr("data-quantity-max"),priced_individually:d.attr("data-priced-individually"),discount:d.attr("data-discount"),discount_type:d.attr("data-discount-type"),discount_exclude_addons:d.attr("data-discount-exclude-addons"),show_image:d.attr("data-show-image"),show_title:d.attr("data-show-title"),show_title_link:d.attr("data-show-title-link"),show_price:d.attr("data-show-price"),show_description:d.attr("data-show-description"),show_meta:d.attr("data-show-meta"),disable_epo:d.attr("data-disable-epo")},d.block({message:null,overlayCSS:{background:"#fff",opacity:.6}}),Lt.ajax({url:Rt.ajax_url,type:"POST",data:h,dataType:"json",success:function(t){200===t.result&&(r=Lt(t.html),(m?l.closest(".tmcp-field-wrap").find(".tc-epo-element-product-container-wrap").empty():d.find(".tc-epo-element-product-container-wrap")).append(r),pe(Ft,0,r,i,l,qt,o,f,c),r.find(Mt.associateQtySelector).trigger("change"),Qt.trigger("tc_apply_validation"))},complete:function(){d.unblock()}})):(pe(Ft,0,r,i,l,qt,o,f,c),r.find(Mt.associateQtySelector).trigger("change")):(o.addClass("tm-hidden"),g=Lt.epoAPI.util.parseJSON(u.attr("data-rules"))[0]||0,_=Lt.epoAPI.util.parseJSON(u.attr("data-original-rules"))||0,u.is(".tcenabled")&&u.data("associated_price_set",1),u.data("price_set",1),u.data("raw_price",g),u.data("raw_original_price",_),u.data("price",g),u.data("original_price",_),t=!1,(s=(s=u).is("option")?u.closest("select"):s).is(".tc-epo-field-product")&&(!s.is("select")&&(s.is(":checkbox")||s.is(":radio"))?s.is(":checked")&&(t=!0):""!==s.val()&&(t=!0)),ae(Ft,u.closest(".tmcp-field-wrap").find(".tc-price").not(Mt.associatedEpoSelector+" .tc-price"),g,t?Wt(g):u.data("price-html"),_,!t),y.trigger("change.cpf"))}}),E.off("click.cpfqtybutton cpfqtybutton",".cpf-type-product .single_add_to_cart_product").on("click.cpfqtybutton cpfqtybutton",".cpf-type-product .single_add_to_cart_product",function(){var t,e,a=Lt(this),i=a.closest(".tm-quantity-alt").find(Mt.associateQtySelector),o=a.is(".alt"),r=a.closest(".cpf-element").find(".tc-epo-element-product-container-wrap");a.data("inittriggeredonce")&&(t=Lt.epoAPI.math.toInt(i.attr("data-min")),e=Lt.epoAPI.math.toInt(i.attr("data-max")),o?(r.addClass("tc-active-product"),i.attr("min",t),e&&i.attr("max",e),"0"===i.val()&&("0"===i.attr("min")?i.val(1):i.val(i.attr("min"))).trigger("change"),a.removeClass("alt").text(a.attr("data-remove"))):(r.removeClass("tc-active-product"),i.val(0).trigger("change"),i.closest(".tm-quantity-alt").removeClass("tm-hidden"),a.addClass("alt").text(a.attr("data-add")))),a.data("inittriggeredonce",1),r.find(Mt.associatedEpoCart).trigger("tm-epo-update")}),E.off("change.cpfqtyalt input.cpfqtyalt",".cpf-type-product "+Mt.associateQtySelector).on("change.cpfqtyalt input.cpfqtyalt",".cpf-type-product "+Mt.associateQtySelector,function(){var t,e=Lt(this),a=e.closest(".cpf-element").find(".tm-epo-field").not(".tc-epo-element-product-li-container .tm-epo-field"),i=e.closest(".tm-quantity-alt").find(".single_add_to_cart_product"),o=a.filter(":checked"),r=Lt.epoAPI.math.toInt(e.attr("min")),c=Lt.epoAPI.math.toInt(e.attr("max"));if(a.is(".tc-epo-field-product-hidden")&&a.is(":checkbox")&&(0===o.length&&"0"!==e.val()?(a.prop("checked",!0).trigger("change"),o=a.filter(":checked")):"0"===e.val()&&o.length&&a.prop("checked",!1).trigger("change")),a.is(":radio")){if(0===o.length)return;t=o.closest(".tmcp-field-wrap").find("input.tm-qty").not(".tc-element-qty")}else if(a.is(":checkbox")){if(0===o.length)return;t=e.closest(".tmcp-field-wrap").find("input.tm-qty").not(".tc-element-qty")}else t=a.closest(".tmcp-field-wrap").find("input.tm-qty").not(".tc-element-qty");0!==t.length&&(t.attr("min",r),c&&t.attr("max",c),(o=e.closest(".tc-epo-element-product-container").find(Mt.associatedEpoCart)).trigger("tm-epo-update"),t.val(e.val()),0<Lt.epoAPI.math.toFloat(e.val())?(o.find(".tm-epo-field.tcenabled").removeClass("ignore"),e.removeClass("ignore")):(o.find(".tm-epo-field.tcenabled").addClass("ignore"),e.addClass("ignore")),a.trigger("change.cpfproduct",{forced:2}),i.data("inittriggeredonce")&&("0"===e.val()?i.removeClass("alt"):i.addClass("alt")),i.trigger("cpfqtybutton"))}),E.on("click.cbsmel",".tc-choice-button-selector",function(){var t=Lt(this).closest(".tmcp-field-wrap").find(".tm-epo-field");t.length&&t.trigger("click")}),qt.off("tm-epo-update").on("tm-epo-update",function(t){var D,H,e,a,N,B,L,M,R,Q,U,$,i,J,o,r,Z,c,W,X,V,G,n,l,Y,K,tt,et,at,d,p,it,ot,s,rt,m,_,ct,nt,lt,dt,pt,st,mt,_t,f,u,ft,g,h=Lt(this),v=!1,y=0,b=!1,w=0,x=0,k=0,F=!1,ut=!0,A=[],P=0,I=0,E={},C=0,gt=!1,ht=!1,vt=!1,yt="",bt=!1,wt=!1,xt="",kt="",q=0,S=0,T=0,j=0,O=0,z=t.epoObject?Lt.extend(!0,{},t.epoObject):Lt.extend(!0,{},Ft);z&&!z.noEpoUpdate&&(Qt.trigger("tcEpoUpdateStart",{epo:z,alternativeCart:z,this_product_type:St,cart:h,totalsHolder:Ct,fetchOptionPrices:Yt,epoHolder:It}),D=Lt.epoAPI.applyFilter("tc_get_bundleid",h.attr("data-product_id"),h,z),H=Ct.attr("data-price-override"),f=h,f=Lt.epoAPI.applyFilter("tc_getCurrentQty",Lt.epoAPI.math.toFloat(te(f).val()),f),ft=(u=(u=h).is(".tc-epo-element-product-container-cart")&&((ft=u.closest(".cpf-element")).is(".cpf-type-product-thumbnailmultiple")||ft.is(".cpf-type-product-checkbox")||ft.is(".cpf-type-product-custombundle")?g=u.closest(".tc-epo-element-product-holder").find(".tc-epo-element-product-container-variation-id"):(ft.is(".cpf-type-product-thumbnail")||ft.is(".cpf-type-product-radio")||ft.is(".cpf-type-product-dropdown")||ft.is(".cpf-type-product-single"))&&(g=ft.find(".tc-epo-element-product-container-variation-id")),g)&&g.length?g:u).find(Kt(u)).val()||0,z.associated_connect&&1===z.associated_connect.length&&(f=parseFloat(z.main_product.find(Mt.associateQtySelector).not(Mt.associatedEpoSelector+" "+Mt.qtySelector).last().val())),t.stopImmediatePropagation(),y=v=Lt.epoAPI.applyFilter("tcGetCurrentProductPrice",ce(Ct,!0),qt,Ct),w=b=Lt.epoAPI.applyFilter("tcGetCurrentProductRegularPrice",re(Ct,!0),qt,Ct),v=Lt.epoAPI.applyFilter("tcCalculateCurrentProductPrice",v,{epo:z,alternativeCart:Pt,cart:h,main_product:zt}),Number.isFinite(f)&&!Ct.attr("data-is-sold-individually")&&0!==te(h).length||(f=1),g={qty:f="yes"===Rt.tm_epo_total_price_as_unit_price?1:f,product_price:y,original_product_price:w},Ct.data("totalsHolder_tc_totals_ob",g),t.norules?t.norules&&(1===t.norules&&Gt(z,t.element),Lt.tcepo.lateFieldsPrices[Nt]=[],It.find(".tm-epo-late-field").toArray().forEach(function(t){(t=Lt(t)).data("price",0),Lt.tcepo.lateFieldsPrices[Nt].push({setter:t,price:t.data("tm-price-for-late"),original_price:t.data("tm-original-price-for-late"),bundleid:D,pricetype:ne(z,t,"price_type")})})):le(z,h),u=It.find(".tmcp-dynamic.dynamic-product-price:not(.tc-is-math-special, .tc-is-math-cumulative)"),0<(u=(u=!1===z.is_associated?u.not(Mt.associatedEpoSelector+" .tmcp-dynamic.dynamic-product-price:not(.tc-is-math-special, .tc-is-math-cumulative)"):u).filter(".tcenabled")).length&&(v=(n=Yt(z,It,".tmcp-dynamic.dynamic-product-price:not(.tc-is-math-special, .tc-is-math-cumulative)",0,0,A,F,void 0,void 0,void 0,!0,void 0,void 0,f)).total,O=v,w=n.original_total,b=y=O,Et.find(".cpf-dynamic-product-price").val(O),g.dynamic_product_price=O,Ct.data("totalsHolder_tc_totals_ob",g)),z.associated_connect&&1===z.associated_connect.length&&(l=z.associated_connect,z.associated_connect.is("select"))&&(l=z.associated_connect.find("option:selected")),!1===v?(Ct.data("tm-floating-box-data",[]),Ct.empty(),z.associated_connect&&1===z.associated_connect.length&&ae(Ft,l.closest(".tmcp-field-wrap").find(".tc-price").not(Mt.associatedEpoSelector+" .tc-price"),0,"",0),Dt.trigger("tm-epo-short-update",{container:At})):(c=Lt.epoAPI.applyFilter("tcAlterElementQty",1,{epo:z,alternativeCart:Pt,currentCart:qt,main_product:zt}),void 0!==qt.data("per_product_pricing")&&(ut=qt.data("per_product_pricing")),ut=Lt.epoAPI.applyFilter("tcCalculatePerProductPricing",ut,{epo:z,alternativeCart:Pt,cart:h,main_product:zt}),!Bt||"woocommerce_before_add_to_cart_button"!==Rt.tm_epo_totals_box_placement||"variable"!==St&&"variable-subscription"!==St||Ct.data("moved_inside")||Ct.data("moved_inside",1),Qt.trigger("tcEpoBeforeOptionPriceCalculation",{epo:z,alternativeCart:z,this_product_type:St,cart:h,totalsHolder:Ct,fetchOptionPrices:Yt,epoHolder:It,total:x,original_total:k,floatingBoxData:A,showTotal:F,cart_fee_options_total:0,cart_fee_options_original_total:0}),z.associated_connect||t.noassociated||"yes"!==Rt.tm_epo_global_product_element_quantity_sync||h.is(Lt.tcAPI().associatedEpoCart)||h.find(Lt.tcAPI().associatedEpoCart).filter(":visible").toArray().forEach(function(t){Lt(t).trigger({type:"tm-epo-update",noassociated:1})}),n=Yt(z,It,".tmcp-field:not(.tmcp-dynamic,.tc-epo-field-product, .tc-is-math-special, .tc-is-math-cumulative)",x,k,A,F,void 0,void 0,void 0,void 0,void 0,void 0,f),x=n.total,k=n.original_total,A=n.floatingBoxData,F=n.showTotal,p=n.elementsLength,it=(n=Yt(z,It,".tc-epo-field-product",0,0,A,F,void 0,void 0,void 0,void 0,void 0,void 0,f)).total,ot=n.original_total,s=n.total_taxed,rt=n.original_total_taxed,mt=n.vat_total,A=n.floatingBoxData,F=n.showTotal,p+=n.elementsLength,Ct.data("tm-floating-box-data",A),P=(n=Yt(z,It,".tmcp-fee-field",0,0,A,F,!1,!0,void 0,void 0,void 0,void 0,f)).total,I=n.original_total,A=n.floatingBoxData,F=n.showTotal,p+=n.elementsLength,Qt.trigger("tcEpoAfterNormalOptionPriceCalculation",{epo:z,alternativeCart:z,this_product_type:St,cart:h,totalsHolder:Ct,fetchOptionPrices:Yt,epoHolder:It,total:x,original_total:k,floatingBoxData:A,showTotal:F,cart_fee_options_total:P,cart_fee_options_original_total:I}),e=x,a=k,m=de(z,parseFloat(v),parseFloat(w),parseFloat(e+it),parseFloat(a+ot),D,Ct),n=Yt(z,It,".tmcp-field.tc-is-math-special:not(.tmcp-dynamic)",x,k,A,F,void 0,void 0,void 0,!0,void 0,void 0,f),x=n.total,k=n.original_total,A=n.floatingBoxData,F=n.showTotal,p+=n.elementsLength,e=x,a=k,e+=m.normal[0],a+=m.normal[1],P+=m.fees[0],I+=m.fees[1],x=(n=Yt(z,It,".tmcp-field.tc-is-math-cumulative:not(.tmcp-dynamic)",x=e,k=a,A,F,void 0,void 0,void 0,!0,!0,void 0,f)).total,k=n.original_total,A=n.floatingBoxData,F=n.showTotal,p+=n.elementsLength,e=x,a=k,u=It.find(".tmcp-dynamic.dynamic-product-price.tc-is-math-special"),0<(u=(u=!1===z.is_associated?u.not(Mt.associatedEpoSelector+" .tmcp-dynamic.dynamic-product-price.tc-is-math-special"):u).filter(".tcenabled")).length&&(n=Yt(z,It,".tmcp-field.tmcp-dynamic.dynamic-product-price.tc-is-math-special",O+x,O+k,A,F,void 0,void 0,void 0,!0,void 0,void 0,f),v=O=Lt.epoAPI.math.toFloat(n.total)-Lt.epoAPI.math.toFloat(x),w=Lt.epoAPI.math.toFloat(n.original_total)-Lt.epoAPI.math.toFloat(k),b=y=O,Et.find(".cpf-dynamic-product-price").val(O),g.dynamic_product_price=O,Ct.data("totalsHolder_tc_totals_ob",g)),u=It.find(".tmcp-dynamic.dynamic-product-price.tc-is-math-cumulative"),0<(u=(u=!1===z.is_associated?u.not(Mt.associatedEpoSelector+" .tmcp-dynamic.dynamic-product-price.tc-is-math-cumulative"):u).filter(".tcenabled")).length&&(n=Yt(z,It,".tmcp-field.tmcp-dynamic.dynamic-product-price.tc-is-math-cumulative",O+x,O+k,A,F,void 0,void 0,void 0,!0,void 0,void 0,f),v=O=Lt.epoAPI.math.toFloat(n.total)-Lt.epoAPI.math.toFloat(x),w=Lt.epoAPI.math.toFloat(n.original_total)-Lt.epoAPI.math.toFloat(k),b=y=O,Et.find(".cpf-dynamic-product-price").val(O),g.dynamic_product_price=O,Ct.data("totalsHolder_tc_totals_ob",g)),u=It.find(".tmcp-dynamic.dynamic-product-price"),0<!(u=(u=!1===z.is_associated?u.not(Mt.associatedEpoSelector+" .tmcp-dynamic.dynamic-product-price"):u).filter(".tcenabled")).length&&Et.find(".cpf-dynamic-product-price").val(""),O=0,u=It.find(".tmcp-dynamic.calculation:not(.tc-is-math-special, .tc-is-math-cumulative)"),0<(u=(u=!1===z.is_associated?u.not(Mt.associatedEpoSelector+" .tmcp-dynamic.calculation:not(.tc-is-math-special, .tc-is-math-cumulative)"):u).filter(".tcenabled")).length&&u.toArray().forEach(function(t){var e=(t=Lt(t)).closest(".tmcp-ul-wrap"),a=Yt(Ft,e,".tmcp-dynamic.calculation:not(.tc-is-math-special, .tc-is-math-cumulative)",O,O,[],!0,!0,void 0,void 0,void 0,!0,void 0,void 0).total;t.is(".result-as-price")&&(a=Wt(a,Ct,!0)),e.find(".tc-result").html(a)}),u=It.find(".tmcp-dynamic.calculation.tc-is-math-special"),0<(u=(u=!1===z.is_associated?u.not(Mt.associatedEpoSelector+" .tmcp-dynamic.calculation.tc-is-math-special"):u).filter(".tcenabled")).length&&u.toArray().forEach(function(t){var e=(t=Lt(t)).closest(".tmcp-ul-wrap"),a=Yt(Ft,e,".tmcp-field.tmcp-dynamic.calculation.tc-is-math-special",O+x,O+k,[],!0,!0,void 0,void 0,!0),a=Lt.epoAPI.math.toFloat(a.total)-Lt.epoAPI.math.toFloat(x);t.is(".result-as-price")&&(a=Wt(a,Ct,!0)),e.find(".tc-result").html(a)}),u=It.find(".tmcp-dynamic.calculation.tc-is-math-cumulative"),0<(u=(u=!1===z.is_associated?u.not(Mt.associatedEpoSelector+" .tmcp-dynamic.calculation.tc-is-math-cumulative"):u).filter(".tcenabled")).length&&u.toArray().forEach(function(t){var e=(t=Lt(t)).closest(".tmcp-ul-wrap"),a=Yt(Ft,e,".tmcp-field.tmcp-dynamic.calculation.tc-is-math-cumulative",O+x,O+k,[],!0,!0,void 0,void 0,!0,void 0,void 0,void 0),a=Lt.epoAPI.math.toFloat(a.total)-Lt.epoAPI.math.toFloat(x);t.is(".result-as-price")&&(a=Wt(a,Ct,!0)),e.find(".tc-result").html(a)}),O=0,u=It.find(".tmcp-dynamic.change-product-weight:not(.tc-is-math-special, .tc-is-math-cumulative)"),0<(u=(u=!1===z.is_associated?u.not(Mt.associatedEpoSelector+" .tmcp-dynamic.change-product-weight:not(.tc-is-math-special, .tc-is-math-cumulative)"):u).filter(".tcenabled")).length&&u.toArray().forEach(function(t){var t=(t=Lt(t)).closest(".tmcp-ul-wrap"),e=Yt(Ft,t,".tmcp-dynamic.change-product-weight:not(.tc-is-math-special, .tc-is-math-cumulative)",O,O,[],!0,!0,void 0,void 0,void 0,void 0,void 0,void 0);t.find(".tc-result").html(e.total)}),u=It.find(".tmcp-dynamic.change-product-weight.tc-is-math-special"),0<(u=(u=!1===z.is_associated?u.not(Mt.associatedEpoSelector+" .tmcp-dynamic.change-product-weight.tc-is-math-special"):u).filter(".tcenabled")).length&&u.toArray().forEach(function(t){var t=(t=Lt(t)).closest(".tmcp-ul-wrap"),e=Yt(Ft,t,".tmcp-field.tmcp-dynamic.change-product-weight.tc-is-math-special",O+x,O+k,[],!0,!0,void 0,void 0,!0,void 0,void 0,void 0);t.find(".tc-result").html(Lt.epoAPI.math.toFloat(e.total)-Lt.epoAPI.math.toFloat(x))}),u=It.find(".tmcp-dynamic.change-product-weight.tc-is-math-cumulative"),0<(u=(u=!1===z.is_associated?u.not(Mt.associatedEpoSelector+" .tmcp-dynamic.change-product-weight.tc-is-math-cumulative"):u).filter(".tcenabled")).length&&u.toArray().forEach(function(t){var t=(t=Lt(t)).closest(".tmcp-ul-wrap"),e=Yt(Ft,t,".tmcp-field.tmcp-dynamic.change-product-weight.tc-is-math-cumulative",O+x,O+k,[],!0,!0,void 0,void 0,!0,void 0,void 0,void 0);t.find(".tc-result").html(Lt.epoAPI.math.toFloat(e.total)-Lt.epoAPI.math.toFloat(x))}),O=0,u=It.find(".tmcp-dynamic.override-product-price:not(.tc-is-math-special, .tc-is-math-cumulative)"),0<(u=(u=!1===z.is_associated?u.not(Mt.associatedEpoSelector+" .tmcp-dynamic.override-product-price:not(.tc-is-math-special, .tc-is-math-cumulative)"):u).filter(".tcenabled")).length&&(n=Yt(z,It,".tmcp-dynamic.override-product-price:not(.tc-is-math-special, .tc-is-math-cumulative)",O,O,A,F,void 0,void 0,void 0,void 0,void 0,void 0,f),v=O=n.total,w=n.original_total,a=e=b=y=O,Et.find(".cpf-override-product-price").val(O),g.override_product_price=O,Ct.data("totalsHolder_tc_totals_ob",g)),u=It.find(".tmcp-dynamic.override-product-price.tc-is-math-special"),0<(u=(u=!1===z.is_associated?u.not(Mt.associatedEpoSelector+" .tmcp-dynamic.override-product-price.tc-is-math-special"):u).filter(".tcenabled")).length&&(n=Yt(z,It,".tmcp-field.tmcp-dynamic.override-product-price.tc-is-math-special",O+x,O+k,A,F,void 0,void 0,void 0,!0,void 0,void 0,f),v=O=Lt.epoAPI.math.toFloat(n.total)-Lt.epoAPI.math.toFloat(x),w=Lt.epoAPI.math.toFloat(n.original_total)-Lt.epoAPI.math.toFloat(k),a=e=b=y=O,Et.find(".cpf-override-product-price").val(O),g.override_product_price=O,Ct.data("totalsHolder_tc_totals_ob",g)),u=It.find(".tmcp-dynamic.override-product-price.tc-is-math-cumulative"),0<(u=(u=!1===z.is_associated?u.not(Mt.associatedEpoSelector+" .tmcp-dynamic.override-product-price.tc-is-math-cumulative"):u).filter(".tcenabled")).length&&(n=Yt(z,It,".tmcp-field.tmcp-dynamic.override-product-price.tc-is-math-cumulative",O+x,O+k,A,F,void 0,void 0,void 0,!0,void 0,void 0,f),v=O=Lt.epoAPI.math.toFloat(n.total)-Lt.epoAPI.math.toFloat(x),w=Lt.epoAPI.math.toFloat(n.original_total)-Lt.epoAPI.math.toFloat(k),a=e=b=y=O,Et.find(".cpf-override-product-price").val(O),g.override_product_price=O,Ct.data("totalsHolder_tc_totals_ob",g)),u=It.find(".tmcp-dynamic.override-product-price"),0<!(u=(u=!1===z.is_associated?u.not(Mt.associatedEpoSelector+" .tmcp-dynamic.override-product-price"):u).filter(".tcenabled")).length?Et.find(".cpf-override-product-price").val(""):a=e=0,Qt.trigger("tcEpoAfterOptionPriceCalculation",{epo:z,alternativeCart:z,this_product_type:St,cart:h,totalsHolder:Ct,fetchOptionPrices:Yt,epoHolder:It,total:x,original_total:k,floatingBoxData:A,showTotal:F,cart_fee_options_total:P,cart_fee_options_original_total:I}),setTimeout(function(){It.find("select.tm-epo-field").trigger("tm-select-price-update-html-all")},1),Lt.tcepo.oneOptionIsSelected[Nt]=F,z=oe(z,Nt,p),ie(zt,z),0<P&&(F=!0),Pt&&!ut&&(F=!1),"enable"!==Tt&&"hideifoptionsiszero"!==Tt&&"hideiftotaliszero"!==Tt||(F=!0),1<f&&(F=!0),"variable"!==St&&"variable-subscription"!==St||Lt.epoAPI.math.toFloat(ft)||(F=!1),"disable"===Tt&&(F=!1),"yes"!==Rt.tm_epo_change_variation_price&&"yes"!==Rt.tm_epo_change_original_price||(F=!0),z.is_associated&&!ut&&(F=!1),n=parseFloat(v*f),Rt.extraFee&&(C=parseFloat(Rt.extraFee),Number.isFinite(C)||(C=0)),!1!==(u=Lt.epoAPI.applyFilter("tcCalculateFinalProductPrice",!1,{alternativeCart:Pt,product_price:v,product_total_price:n,v_product_price:y,tm_set_tax_price:$t,main_product:zt,totalsHolder:Ct,cartQty:f}))&&"object"==typeof u&&Object.prototype.hasOwnProperty.call(u,"productPrice")&&Object.prototype.hasOwnProperty.call(u,"productTotalPrice")&&(v=u.productPrice,n=u.productTotalPrice),e=Lt.epoAPI.applyFilter("tc_adjust_options_price_per_unit",e,n),x=parseFloat(e*f*c),x=Lt.epoAPI.applyFilter("tc_adjust_options_total_price",x,f,c,e,Ct),T="no"===Rt.tm_epo_global_product_element_quantity_sync?(q=parseFloat(it),parseFloat(s)):(q=parseFloat(it*f*c),parseFloat(s*f*c)),q=Lt.epoAPI.applyFilter("tc_adjust_options_productfield_total_price",q,f,c,e,Ct),T=Lt.epoAPI.applyFilter("tc_adjust_options_productfield_total_price_taxed",T,f,c,e,Ct),a=Lt.epoAPI.applyFilter("tc_adjust_options_price_per_unit",a,n),k=parseFloat(a*f*c),k=Lt.epoAPI.applyFilter("tc_adjust_options_original_total_price",k,f,c,a,Ct),j="no"===Rt.tm_epo_global_product_element_quantity_sync?(S=parseFloat(ot),parseFloat(rt)):(S=parseFloat(ot*f*c),parseFloat(rt*f*c)),S=Lt.epoAPI.applyFilter("tc_adjust_options_productfield_original_total_price",S,f,c,a,Ct),j=Lt.epoAPI.applyFilter("tc_adjust_options_productfield_original_total_price_taxed",j,f,c,a,Ct),"1"===H&&0<parseFloat(x)&&(n=y=v=0),n=Lt.epoAPI.applyFilter("tc_adjust_product_total_price_without_options",n),x=Lt.epoAPI.applyFilter("tcAdjustTotal",x,{epo:z,totalsHolder:Ct,cart:h,main_product:zt}),q=Lt.epoAPI.applyFilter("tcAdjustProductFieldTotal",q,{epo:z,totalsHolder:Ct,cart:h,main_product:zt}),T=Lt.epoAPI.applyFilter("tcAdjustProductFieldTotalTaxed",T,{epo:z,totalsHolder:Ct,cart:h,main_product:zt}),k=Lt.epoAPI.applyFilter("tcAdjustOriginalTotal",k,{epo:z,totalsHolder:Ct,cart:h,main_product:zt}),S=Lt.epoAPI.applyFilter("tcAdjustProductFieldOriginalTotal",S,{epo:z,totalsHolder:Ct,cart:h,main_product:zt}),j=Lt.epoAPI.applyFilter("tcAdjustProductFieldOriginalTotalTaxed",j,{epo:z,totalsHolder:Ct,cart:h,main_product:zt}),x=parseFloat(Lt.epoAPI.applyFilter("tc_adjust_total",x,Ct)),P=parseFloat(Lt.epoAPI.applyFilter("tc_adjust_totals_fee",P,Ct)),k=parseFloat(Lt.epoAPI.applyFilter("tc_adjust_original_total",k,Ct)),I=parseFloat(Lt.epoAPI.applyFilter("tc_adjust_original_total_fee",I,Ct)),A=C,p=e,ot=s=(u=x)+(it=P),rt=a,X=$=(c=k)+(W=I),V=n,G=parseFloat(n+s+A),A=parseFloat(w+$+A),v=$t(v,Ct,void 0,0,void 0,void 0,!0),b=$t(b,Ct,void 0,0,void 0,void 0,!0),n=$t(n,Ct,void 0,0,void 0,void 0,!0),x=$t(x,Ct,void 0,0,void 0,void 0,!0),e=$t(e,Ct,void 0,0,void 0,void 0,!0),s=parseFloat(P)+parseFloat(x),k=$t(k,Ct,void 0,0,void 0,void 0,!0),a=$t(a,Ct,void 0,0,void 0,void 0,!0),$=parseFloat(I)+parseFloat(k),C=$t(C,Ct,void 0,0,void 0,void 0,!0),i=n,n=Lt.epoAPI.applyFilter("tc_adjust_product_total_price",parseFloat(n+s+C),i,s,C,x,P,Ct),U=Lt.epoAPI.applyFilter("tc_adjust_product_total_original_price",parseFloat(i+$+C),i,$,C,k,I,Ct),mt="1"===(Ct.attr("data-prices-include-tax")||Rt.prices_include_tax)?(ct=mt+parseFloat(Ut(x,Ct)),nt=mt+parseFloat(Ut(s,Ct)),pt=mt+parseFloat(Ut(n,Ct)),parseFloat(Ut(i,Ct))):(ct=mt+parseFloat(x-u),nt=mt+parseFloat(s-ot),pt=mt+parseFloat(n-G),parseFloat(i-V)),u+=q,p+=q,ot+=q,c+=S,rt+=S,X+=S,G+=q,A+=S,x+=T,e+=T,s+=T,k+=j,a+=j,$+=j,n+=T,U+=j,q=parseFloat(v+parseFloat(e)),S=parseFloat(v+parseFloat(a)),"yes"===Rt.tm_epo_fees_on_unit_price&&(q=parseFloat(v+parseFloat(e)+parseFloat(parseFloat(P)/f)),S=parseFloat(v+parseFloat(a)+parseFloat(parseFloat(I)/f))),T=Wt(q,Ct,!0),j=Wt(S,Ct,!0),C&&(bt=!0,yt=Wt(C,Ct,!0)),R=Wt(n,Ct,!0),Q=Wt(U,Ct,!0),N=Wt(x,Ct,!0),L=Wt(P,Ct,!0),B=Wt(k,Ct,!0),M=Wt(I,Ct,!0),lt=Wt(ct),dt=Wt(nt),st=Wt(pt),_t=Wt(mt),T=Lt.epoAPI.applyFilter("tc_adjust_formatted_unit_price",T,v,e,P,f),N=Lt.epoAPI.applyFilter("tc_adjust_formatted_options_total",N,x,e,f),L=Lt.epoAPI.applyFilter("tc_adjust_formatted_fees_total",L,P),R=Lt.epoAPI.applyFilter("tc_adjust_formatted_final_total",R,n,i,s,C,f),T=Lt.epoAPI.applyFilter("tcAdjustFormattedUnitPrice",T,{epo:z,totalsHolder:Ct,event:t,unit_price:q,productPrice:v,_total:e,total_plcart_fee_options_totals_fee:P,cartQty:f}),j=Lt.epoAPI.applyFilter("tcAdjustFormattedUnitOriginalPrice",j,{epo:z,totalsHolder:Ct,event:t,unit_original_price:S,productPrice:v,_original_total:a,total_plcart_fee_options_totals_fee:P,cartQty:f}),N=Lt.epoAPI.applyFilter("tcAdjustFormattedOptionsTotal",N,{epo:z,totalsHolder:Ct,event:t,total:x,_total:e,total_plus_fee:s,extraFee:C,cartQty:f}),B=Lt.epoAPI.applyFilter("tcAdjustFormattedOptionsOriginalTotal",B,{epo:z,totalsHolder:Ct,event:t,original_total:k,_original_total:a,original_total_plus_fee:$,extraFee:C,cartQty:f}),L=Lt.epoAPI.applyFilter("tcAdjustFormattedFeesTotal",L,{epo:z,totalsHolder:Ct,event:t,cart_fee_options_total:P,extraFee:C,cartQty:f}),M=Lt.epoAPI.applyFilter("tcAdjustFormattedFeesOriginalTotal",M,{epo:z,totalsHolder:Ct,event:t,cart_fee_options_original_total:I,extraFee:C,cartQty:f}),R=Lt.epoAPI.applyFilter("tcAdjustFormattedFinalTotal",R,{epo:z,totalsHolder:Ct,event:t,product_total_price:n,product_total_price_without_options:i,total_plus_fee:s,extraFee:C,cartQty:f}),Q=Lt.epoAPI.applyFilter("tcAdjustFormattedFinalOriginalTotal",Q,{epo:z,totalsHolder:Ct,event:t,product_total_original_price:U,product_total_price_without_options:i,original_total_plus_fee:$,extraFee:C,cartQty:f}),(0<x&&"showtgz"===Ot||"show"===Ot)&&(gt=!0,"yes"===Rt.tm_epo_enable_vat_options_total)&&(ht=!0),0!==P&&(vt=!0),R&&"show"===jt&&(wt=!0),E={qty:f,product_price:v,raw_product_price:y,product_regular_price:b,raw_product_regular_price:w,formatted_product_price:Wt(parseFloat(v)*f),late_total_prices:m,late_total_price:$t(m[0],Ct),late_total_original_price:$t(m[1],Ct),raw_options_price_per_unit:p,raw_options_total_price:u,raw_cart_fee_options_total_price:it,raw_total_plus_fee:ot,raw_options_original_price_per_unit:rt,raw_options_original_total_price:c,raw_cart_fee_options_original_total_price:W,raw_original_total_plus_fee:X,raw_product_total_price:G,raw_product_total_original_price:A,raw_product_total_price_without_options:V,options_price_per_unit:e,options_total_price:x,cart_fee_options_total_price:P,total_plus_fee:s,options_original_price_per_unit:a,options_original_total_price:k,cart_fee_options_total_original_price:I,original_total_plus_fee:$,vat_options_total:ct,vat_options_total_plus_fee:nt,formatted_vat_options_total:lt,formatted_vat_options_total_plus_fee:dt,vat_total:pt,formatted_vat_total:st,vat_product_base:mt,formatted_vat_product_base:_t,product_total_price:n,product_total_original_price:U,product_total_price_without_options:i,product_unit_price:q,product_unit_original_price:S,formatted_unit_price:T,formatted_options_total:N,formatted_fees_total:L,formatted_final_total:R,formatted_unit_original_price:j,formatted_options_original_total:B,formatted_fees_original_total:M,formatted_final_original_total:Q,formatted_extra_fee:yt,show_options_total:gt,show_fees_total:vt,show_extra_fee:bt,show_final_total:wt,show_options_vat:ht,show_unit_price:"yes"===Rt.tm_epo_show_unit_price,unit_price:z.is_associated?Rt.i18n_item_unit_price:Rt.i18n_unit_price,options_total:z.is_associated?Rt.i18n_item_options_total:Rt.i18n_options_total,options_vat_total:z.is_associated?Rt.i18n_item_vat_options_total:Rt.i18n_vat_options_total,final_total:z.is_associated?Rt.i18n_item_final_total:Rt.i18n_final_total,fees_total:Rt.i18n_fees_total,extra_fee:Rt.i18n_extra_fee,totals_box_before_unit_price:Rt.totals_box_before_unit_price,totals_box_after_unit_price:Rt.totals_box_after_unit_price,totals_box_before_vat_options_totals_price:Rt.totals_box_before_vat_options_totals_price,totals_box_after_vat_options_totals_price:Rt.totals_box_after_vat_options_totals_price,totals_box_before_options_totals_price:Rt.totals_box_before_options_totals_price,totals_box_after_options_totals_price:Rt.totals_box_after_options_totals_price,totals_box_before_fee_totals_price:Rt.totals_box_before_fee_totals_price,totals_box_after_fee_totals_price:Rt.totals_box_after_fee_totals_price,totals_box_before_extra_fee_price:Rt.totals_box_before_extra_fee_price,totals_box_after_extra_fee_price:Rt.totals_box_after_extra_fee_price,totals_box_before_final_totals_price:Rt.totals_box_before_final_totals_price,totals_box_after_final_totals_price:Rt.totals_box_after_final_totals_price},Rt.customer_price_format&&(xt=Rt.customer_price_format_wrap_start,kt=Rt.customer_price_format_wrap_end,Z=Rt.customer_price_format),N&&0<=x&&(b=Jt(x),m=Jt(k),Z&&(b=Z.replace("__PRICE__",b).replace("__CODE__",Rt.current_currency),Ct.data("is-on-sale")||(m=Z.replace("__PRICE__",m).replace("__CODE__",Rt.current_currency))),b=Lt.epoAPI.applyFilter("tcFilterFormattedFTotal",b,{epo:z,totalsHolder:Ct,event:t,total:x,_total:e,total_plus_fee:s,extraFee:C,cartQty:f}),m=Lt.epoAPI.applyFilter("tcFilterFormattedFOriginalTotal",m,{epo:z,totalsHolder:Ct,event:t,original_total:k,total:k,_total:e,total_plus_fee:s,extraFee:C,cartQty:f}),"yes"===Rt.tm_epo_enable_original_final_total&&x!==k?(E.formatted_options_total=Lt.epoAPI.util.decodeHTML(Lt.epoAPI.template.html(Mt.templateEngine.tc_formatted_sale_price,{price:m,sale_price:b,customer_price_format_wrap_start:xt,customer_price_format_wrap_end:kt})),E._foriginal_total=m,E._ftotal=b):E.formatted_options_total=Lt.epoAPI.util.decodeHTML(Lt.epoAPI.util.decodeHTML(Lt.epoAPI.template.html(Mt.templateEngine.tc_formatted_price,{price:b,customer_price_format_wrap_start:xt,customer_price_format_wrap_end:kt})))),R&&0<=n&&(o=Jt(n),r="1"===H&&0<parseFloat(x)?parseFloat(c+C):parseFloat(parseFloat(w*f)+c),Z&&(o=Z.replace("__PRICE__",o).replace("__CODE__",Rt.current_currency),Ct.data("is-on-sale")||(r=Z.replace("__PRICE__",r).replace("__CODE__",Rt.current_currency))),o=Lt.epoAPI.applyFilter("tc_adjust_native_price",o,n),r=Jt(r=$t(r,Ct,void 0,0,void 0,void 0,!0)+parseFloat(I)+parseFloat(C)),r=Lt.epoAPI.applyFilter("tc_adjust_native_regular_price",r,n),"yes"===Rt.tm_epo_enable_original_final_total&&(Ct.data("is-on-sale")&&"1"!==H||r!==o)?E.formatted_final_total=Lt.epoAPI.util.decodeHTML(Lt.epoAPI.template.html(Mt.templateEngine.tc_formatted_sale_price,{price:r,sale_price:o,customer_price_format_wrap_start:xt,customer_price_format_wrap_end:kt})):E.formatted_final_total=Lt.epoAPI.util.decodeHTML(Lt.epoAPI.util.decodeHTML(Lt.epoAPI.template.html(Mt.templateEngine.tc_formatted_price,{price:o,customer_price_format_wrap_start:xt,customer_price_format_wrap_end:kt}))),E._f_regular_price=r,E._fprice=o),E.formatted_unit_price=E.formatted_unit_price+Lt.epoAPI.util.decodeHTML(Lt.epoAPI.util.decodeHTML(Lt.epoAPI.template.html(Mt.templateEngine.suffix))),E.formatted_options_total=E.formatted_options_total+Lt.epoAPI.util.decodeHTML(Lt.epoAPI.util.decodeHTML(Lt.epoAPI.template.html(Mt.templateEngine.suffix))),E.formatted_final_total=E.formatted_final_total+Lt.epoAPI.util.decodeHTML(Lt.epoAPI.util.decodeHTML(Lt.epoAPI.template.html(Mt.templateEngine.suffix))),E=Xt("formatted_fees_original_total","cart_fee_options_total_original_price",E,Ct),E=Xt("formatted_fees_total","cart_fee_options_total_price",E,Ct),E=Xt("formatted_final_original_total","product_total_original_price",E,Ct),E=Xt("formatted_final_total","product_total_price",E,Ct),E=Xt("formatted_options_original_total","options_original_total_price",E,Ct),E=Xt("formatted_options_total","options_total_price",E,Ct),E=Xt("formatted_unit_original_price","product_unit_original_price",E,Ct),E=Xt("formatted_unit_price","product_unit_price",E,Ct),void 0!==Lt.tcepo.showHideTotal&&void 0!==Lt.tcepo.showHideTotal[Nt]&&(F=Lt.tcepo.showHideTotal[Nt]),void 0!==(E=Lt.epoAPI.applyFilter("tc_adjust_tc_totals_ob",E,{epo_object:z,showTotal:F,epoHolder:It,totalsHolder:Ct,replace_suffixes:Xt,replace_suffixes_in_html:ee,tm_set_tax_price:$t,tm_set_price:Zt,tm_set_price_totals:Wt,product_total_price:n,product_price:v,qty:f})).showTotal&&(F=E.showTotal),z.tc_totals_ob=E,F=Lt.epoAPI.applyFilter("tcFinalTotalsBoxVisibility",F,{epo:z,alternativeCart:Pt,cart:h,main_product:zt,totalsHolder:Ct,this_epo_totals_container:Ht}),p=Lt.epoAPI.template.html(Mt.templateEngine.tc_final_totals,E),Ct.data("tm-html",p),Ct.data("tc_totals_ob",E),z.associated_connect&&1===z.associated_connect.length&&("1"===z.associated_connect.attr("data-no-price")?(et=tt=K=Y=0,at="",ae(Ft,l.closest(".tmcp-field-wrap").find(".tc-price").not(Mt.associatedEpoSelector+" .tc-price"),Y,at,tt)):(Y=E.product_price+E.options_price_per_unit+E.cart_fee_options_total_price/E.qty,K=E.raw_product_price+E.raw_options_price_per_unit+E.raw_cart_fee_options_total_price/E.qty,tt=E.product_regular_price+E.options_original_price_per_unit+E.cart_fee_options_total_original_price/E.qty,et=E.raw_product_regular_price+E.raw_options_original_price_per_unit+E.raw_cart_fee_options_original_total_price/E.qty,at=Zt(Y,z.this_epo_totals_container,!1,l),ae(Ft,l.closest(".tmcp-field-wrap").find(".tc-price").not(Mt.associatedEpoSelector+" .tc-price"),Y,at,tt),z.associated_connect.data("tm-quantity",E.qty),z.associated_connect.data("tm-quantity")&&(Y*=parseFloat(z.associated_connect.data("tm-quantity")),K*=parseFloat(z.associated_connect.data("tm-quantity")),tt*=parseFloat(z.associated_connect.data("tm-quantity")),et*=parseFloat(z.associated_connect.data("tm-quantity"))),at=Zt(Y,z.this_epo_totals_container,!1,l)),z.associated_connect.data("price_set",1),l.is(".tcenabled")&&l.data("associated_price_set",1),l.data("price_set",1),l.data("raw_price",K),l.data("raw_original_price",et),l.data("price",$t(Y,z.this_epo_totals_container,l)),l.data("original_price",$t(tt,z.this_epo_totals_container,l)),z.associated_connect.data("price-changed",1),setTimeout(function(){z.associated_connect&&t.noassociated||z.mainEpoObject.main_cart.trigger({type:"tm-epo-update",norules:2})},20)),Qt.trigger("tcEpoAfterCalculateTotals",{epo:z,alternativeCart:Pt,this_product_type:St,cart:h,bundleid:D,totalsObject:E,main_product:zt,per_product_pricing:ut,event:t}),u=Lt.epoAPI.applyFilter("hide_native_price",!0),0<f?("yes"===Rt.tm_epo_change_variation_price&&(!0===u&&"disable"!==Tt?Vt(h).hide():Vt(h).show()),!F||"disable"===Tt||"hideiftotaliszero"===Tt&&0===n||"hideifoptionsiszero"===Tt&&0===s?(Ct.html(p=""),Ct.data("tm-floating-box-data",[])):(Ct.html(p),Qt.trigger("tc-totals-container",{epo:E,totals_holder:Ct,data:{epo_object:z,tm_set_price:Zt,tm_set_price_totals:Wt,product_total_price:n,product_price:v,qty:f},tm_epo_js:Rt})),R&&0<=n&&("yes"===Rt.tm_epo_change_variation_price&&setTimeout(function(){J=Vt(h),_=(_=Ct.data("is-on-sale")?Lt.epoAPI.util.decodeHTML(Lt.epoAPI.template.html(Mt.templateEngine.tc_formatted_sale_price,{price:r,sale_price:o,customer_price_format_wrap_start:xt,customer_price_format_wrap_end:kt,before_price_text:Rt.variation_price_before_price_text,after_price_text:Rt.variation_price_after_price_text})):Lt.epoAPI.util.decodeHTML(Lt.epoAPI.template.html(Mt.templateEngine.tc_formatted_price,{price:o,customer_price_format_wrap_start:xt,customer_price_format_wrap_end:kt,before_price_text:Rt.variation_price_before_price_text,after_price_text:Rt.variation_price_after_price_text})),(_=Xt("formatted","raw",_={formatted:_+=Lt.epoAPI.util.decodeHTML(Lt.epoAPI.util.decodeHTML(Lt.epoAPI.template.html(Mt.templateEngine.main_suffix))),raw:E.product_total_price},Ct)).formatted),J.html(_).show()},310),"yes"===Rt.tm_epo_change_original_price)&&(Pt&&0!==zt.find(".cpf-bto-price").length||(z.associated_connect?d=z.main_product.find(Mt.associatedNativeProductPriceSelector):0===(d=z.main_product.find(Mt.nativeProductPriceSelector)).length&&(d=Lt(Mt.nativeProductPriceSelector)),void 0===(d=0===d.length&&zt.is(".tc-after-shop-loop")?zt.closest(".product").find(".price").not(".tc-after-shop-loop .price"):d).data("tc-original-html")&&d.data("tc-original-html",d.html()),0<n?(_=(_=Ct.data("is-on-sale")?Lt.epoAPI.util.decodeHTML(Lt.epoAPI.template.html(Mt.templateEngine.tc_formatted_sale_price,{price:r,sale_price:o,customer_price_format_wrap_start:xt,customer_price_format_wrap_end:kt,before_price_text:Rt.product_price_before_price_text,after_price_text:Rt.product_price_after_price_text})):Lt.epoAPI.util.decodeHTML(Lt.epoAPI.template.html(Mt.templateEngine.tc_formatted_price,{price:o,customer_price_format_wrap_start:xt,customer_price_format_wrap_end:kt,before_price_text:Rt.product_price_before_price_text,after_price_text:Rt.product_price_after_price_text})),(_=Xt("formatted","raw",_={formatted:_+=Lt.epoAPI.util.decodeHTML(Lt.epoAPI.util.decodeHTML(Lt.epoAPI.template.html(Mt.templateEngine.main_suffix))),raw:E.product_total_price},Ct)).formatted),d.html(_).show()):St&&"composite"!==St&&(z.associated_connect?(!z.variations_form.length||0<(_=z.this_epo_totals_container.data("variationIdElement")).length&&(_=parseFloat(_.val()))&&0!==_)&&d.html(Lt.epoAPI.util.decodeHTML(Rt.assoc_current_free_text)):d.html(Lt.epoAPI.util.decodeHTML(Rt.current_free_text)))),Qt.trigger("tcEpoMaybeChangePriceHtml",{epo:z,alternativeCart:Pt,this_product_type:St,cart:h,bundleid:D,totalsObject:E,main_product:zt,nativePrice:o})),Pt?Dt.trigger({type:"tm-epo-update",norules:1}):Ht.data("is_active",!0)):(z.associated_connect&&(d=z.main_product.find(Mt.associatedNativeProductPriceSelector)).html(d.data("tc-original-html")),Vt(h).toArray().forEach(function(t){t=Lt(t);t.data("tm-original-html")?t.html(t.data("tm-original-html")):t.data("tm-original-html",t.html())}),0===y&&"yes"===Rt.tm_epo_remove_free_price_label?Vt(h).hide():"yes"!==Rt.tm_epo_change_variation_price||!0===u&&"disable"!==Tt||Vt(h).show(),Ct.empty(),Pt&&Dt.trigger({type:"tm-epo-update",norules:1})),Dt.trigger("tm-epo-after-update",{container:At}),Qt.trigger("tc-epo-after-update",{epo:E,totals_holder:Ct,data:{epo_object:z,add_late_fields_prices:de,tm_set_price:Zt,tm_set_price_totals:Wt,product_total_price:n,replace_suffixes_in_html:ee,product_price:v,qty:f,bundleid:D,currentCart:qt},tm_epo_js:Rt})))}),"variable"!==St&&"variable-subscription"!==St||((e=It.find(".tm-epo-variation-section").first()).find(".tm-epo-reset-variation").off("click.cpfv").on("click.cpfv",function(){var t=Lt(this),e=Lt.epoAPI.dom.id(t.attr("data-tm-for-variation")),a=t.closest(".cpf-type-variations"),i=t.closest(".cpf-element").find(".tm-epo-variation-element"),o=t.closest(".cpf-element").find(".tmcp-field-wrap");i.prop("checked",!1),o.removeClass("tc-active"),v.find("[data-attribute_name='attribute_"+e+"']").val("").trigger("change"),v.find("[data-attribute_name='attribute_"+e+"']").trigger("focusin"),zt.find(".cpf-type-variations").not(a).toArray().forEach(function(t){v.find("[data-attribute_name='attribute_"+Lt.epoAPI.dom.id(Lt(t).find(".tm-epo-variation-element").first().attr("data-tm-for-variation"))+"']").trigger("focusin")}),t.trigger("blur"),v.trigger("woocommerce_update_variation_values_tmlogic")}),e.find("input.tm-epo-variation-element,input.tm-epo-variation-element + span").off("mouseup.cpfv").on("mouseup.cpfv",function(){var t=Lt(this);(t=t.is("span")?t.prev("input"):t).attr("disabled")&&v.find(".reset_variations").trigger("click"),t=Lt.epoAPI.dom.id(t.attr("data-tm-for-variation")),v.find("[data-attribute_name='attribute_"+t+"']").trigger("focusin")}),e.off("click."+g+".tmepo",".reset_variations, .tc-epo-element-variable-reset-variations").on("click."+g+".tmepo",".reset_variations, .tc-epo-element-variable-reset-variations",{_epoObject:Ft},function(t){"yes"!==Rt.tm_epo_change_original_price||Pt&&0!==zt.find(".cpf-bto-price").length||(t=t.data._epoObject.associated_connect?t.data._epoObject.main_product.find(Mt.associatedNativeProductPriceSelector):Lt(Mt.nativeProductPriceSelector)).data("tc-original-html")&&t.html(t.data("tc-original-html")),v.find(".variations .reset_variations, .tc-epo-element-variable-reset-variations").first().trigger("click")}),e.find(".tm-epo-variation-element").off("change.cpfv tm_epo_variation_element_change").on("change.cpfv tm_epo_variation_element_change",function(t){var e,a=Lt(this),i=Lt.epoAPI.dom.id(a.attr("data-tm-for-variation")),o=a.val(),r=a.closest(".cpf-type-variations"),i=v.find("[data-attribute_name='attribute_"+i+"']");a.closest(".tm-epo-variation-section").is(".tm-hidden")||(t&&t.type&&"tm_epo_variation_element_change"===t.type||(e=!1,i.each(function(){if(this.value===o)return!(e=!0)}),e||i.trigger("focusin"),i.val(o).trigger("change")),o||i.trigger("focusin"),zt.find(".cpf-type-variations").not(r).toArray().forEach(function(t){v.find("#"+Lt.epoAPI.dom.id(Lt(t).find(".tm-epo-variation-element").first().attr("data-tm-for-variation"))).trigger("focusin")}),a.trigger("blur"),v.trigger("woocommerce_update_variation_values_tmlogic"))}).off("focusin.cpfv").on("focusin.cpfv",function(){var t=Lt(this);t.is("select")&&(t=Lt.epoAPI.dom.id(t.attr("data-tm-for-variation")),v.find("[data-attribute_name='attribute_"+t+"']").trigger("focusin"),v.trigger("woocommerce_update_variation_values_tmlogic"))}),v.off(h+"found_variation.tmepo tm_fix_stock",".single_variation_wrap").on(h+"found_variation.tmepo tm_fix_stock",".single_variation_wrap",function(){et(Lt(this),At)}),v.off(h+"found_variation.tmepo").on(h+"found_variation.tmepo",function(t,e){var a,i,o,r,c,n,l,d=Lt(this);Ct.data("is-on-sale",e.tc_is_on_sale),Ct.data("regular-price",K(e.display_regular_price,Ct,e)),Qt.trigger("tm-epo-found-variation",{epo:Ft,totalsHolder:Ct,totalsHolderContainer:Et,currentCart:qt,variationForm:d,variation:e}),i=(e={epoHolder:It,totalsHolder:Ct,totalsHolderContainer:Et,currentCart:qt,variationForm:d,variation:e}).epoHolder,o=e.totalsHolder,r=e.totalsHolderContainer,c=e.currentCart,n=e.variationForm,e=e.variation,l=o.data("variations"),o.data("current_variation",e),e&&"display_price"in e&&!o.data("tm-epo-is-woocs")?(a=e.display_price,o.data("priceIsWithDiscount","1"),o.removeData("tcprice")):l&&e&&e.variation_id&&void 0!==l[e.variation_id]?(a=l[e.variation_id],o.removeData("tcprice")):e&&Lt(e.price_html).find(".amount:last").length&&(a=(a=(a=(a=Lt(e.price_html).find(".amount:last").text()).replace(Rt.currency_format_thousand_sep,"")).replace(Rt.currency_format_decimal_sep,".")).replace(/[^0-9.]/g,""),a=parseFloat(a),o.removeData("tcprice")),a=K(a,o,e),o.data("price",a),r.find(".cpf-product-price").val(a),setTimeout(function(){i.find("select.tm-epo-field").trigger("tm-select-change-html-all-math")},100),n.data("tm-styled-variations")||c.trigger({type:"tm-epo-update"}),et(d,At)}).off(h+"hide_variation.tmepo").on(h+"hide_variation.tmepo",{_epoObject:Ft},function(t){"yes"!==Rt.tm_epo_change_original_price||Pt&&0!==zt.find(".cpf-bto-price").length||(t=t.data._epoObject.associated_connect?t.data._epoObject.main_product.find(Mt.associatedNativeProductPriceSelector):Lt(Mt.nativeProductPriceSelector)).data("tc-original-html")&&t.html(t.data("tc-original-html")),Ct.data("price",!1),Ct.removeData("tcprice"),qt.trigger({type:"tm-epo-update",norules:2})}).off(h+"check_variations.tmepo").on(h+"check_variations.tmepo",function(){var a=0,t=e.find(".reset_variations");v.find(".variations select, .tc-epo-variable-product-selector").toArray().forEach(function(t){var t=Lt(t),e=t.data("attribute_name")||t.attr("name"),t=t.val()||"";0<t.length&&a++,e,0}),0<a?"hidden"===t.css("visibility")&&t.css("visibility","visible").hide().fadeIn():t.css("visibility","hidden")}).trigger(h+"check_variations"),function(t,e,a,i){var o,r,c,n,l,d,p,s,m=t.epoEventId,_="input[name^='variation_id']",f=t.is_associated?"tc_variation_form.tmlogic":"wc_variation_form.tmlogic",u=t.is_associated?"tc_":"",g=t.variations_form,h=t.is_associated?g.find(".tc-epo-element-variations"):g.find(".variations"),v=t.is_associated?".tc-epo-element-variable-reset-variations":".reset_variations";if(g.attr("data-epo_id",t.epo_id),0<e.find("input.variation_id").length&&(_="input.variation_id"),i.find(".tm-epo-variation-element").length||i.data("tm-epo-variation-element")){if((o=i.find(".tm-epo-variation-section").first()).find(".cpf-type-variations").attr("data-epo_id",t.epo_id).attr("data-product_id",g.attr("data-product_id")),i.data("tm-epo-variation-element",o.find(".tm-epo-variation-element")),a&&"main"!==a&&!t.is_associated){if(h=(g=t.form).find('.composite_component[data-item_id="'+a+'"]').find(".variations"),g.attr("data-epo_id",t.epo_id),0===h.length)return;r=o.closest("li.tm-extra-product-options-field"),o.is(".tm-hidden")||h.hide(),h.after(o.addClass("tm-extra-product-options nopadding")),r.is(":empty")&&r.hide(),o.is(".section_popup")?o.wrap("<div class='tc-styled-variations tc-row'></div>"):(o.removeClass("tc-cell"),o.wrap("<div class='tc-styled-variations'></div>")),c=!1,e.off(f).on(f,function(){for(c=!0,g.on("click.tmlogic",".reset_variations",function(){o.find("select.tm-epo-variation-element").val("").children("option").prop("disabled",!1).show(),o.find(".tm-epo-variation-element").prop("disabled",!1).removeClass("tm-disabled").prop("checked",!1).closest("li").show(),Qt.trigger("tmlazy"),o.find(".tm-epo-variation-element").trigger("tm_trigger_product_image"),o.find("li").removeClass("tc-active tm-attribute-disabled").css("opacity","")}),e.off("woocommerce_update_variation_values_tmlogic").on("woocommerce_update_variation_values_tmlogic",function(){tt(e,t)}),s=0;s<A.length;s+=1)n=A[s],"object"===typeof n&&(l="string"==typeof n.name||!1,d="string"==typeof n.selector||!1,p="function"==typeof n.func||!1,l)&&p&&("input[name='variation_id']"===d&&(d=_),n.selector?e.data("tm-styled-variations",1).off(u+n.name+s,d).on(u+n.name+s,d,n.func):e.data("tm-styled-variations",1).off(u+n.name+s).on(u+n.name+s,n.func));A=[],o.find(".tm-epo-variation-element:not(.tm-hidden .tm-epo-variation-element)").last().trigger("tm_epo_variation_element_change")}),Lt(function(){!1===c&&e.trigger(f)})}else{for(o.length&&(o.is(".tm-hidden")||h.hide(),r=o.closest("li.tm-extra-product-options-field"),h.after(o.addClass("tm-extra-product-options nopadding")),r.is(":empty")&&r.hide(),o.is(".section_popup")?o.wrap("<div class='tc-styled-variations tc-row'></div>"):(o.removeClass("tc-cell"),o.wrap("<div class='tc-styled-variations'></div>")),g.off("click.tmlogic",v).on("click.tmlogic",v,function(){o.find("select.tm-epo-variation-element").val("").children("option").prop("disabled",!1).show(),o.find(".tm-epo-variation-element").prop("disabled",!1).removeClass("tm-disabled").prop("checked",!1).closest("li").show(),Qt.trigger("tmlazy"),o.find(".tm-epo-variation-element").trigger("tm_trigger_product_image"),o.find("li").removeClass("tc-active tm-attribute-disabled").css("opacity","")})),g.off("woocommerce_update_variation_values_tmlogic").on("woocommerce_update_variation_values_tmlogic",function(){tt(g,t)}),s=0;s<A.length;s+=1)n=A[s],"object"===typeof n&&(l="string"==typeof n.name||!1,d="string"==typeof n.selector||!1,p="function"==typeof n.func||!1,l)&&p&&("input[name='variation_id']"===d&&(d=_),n.selector?g.data("tm-styled-variations",1).off(u+n.name+s,d).on(u+n.name+s,d,n.func):g.data("tm-styled-variations",1).off(u+n.name+s).on(u+n.name+s,n.func));A=[],o.find(".tm-epo-variation-element:not(.tm-hidden .tm-epo-variation-element)").last().trigger("tm_epo_variation_element_change")}Lt.tcepo.formSubmitEvents[m][Lt.tcepo.formSubmitEvents[m].length]={trigger:function(){return!0},on_true:function(){return o.find(".tm-epo-variation-element").attr("disabled","disabled"),!0},on_false:function(){o.find(".tm-epo-variation-element").prop("disabled",!1)}},Lt(x.body).on("added_to_cart",function(){o.find(".tm-epo-variation-element").prop("disabled",!1)})}}(Ft,At,u,It)),i.trigger("tm-select-change-html"),r.trigger("change.cpf",{init:1}),c.trigger("showhide.cpfcustom"),o.filter(":checked").trigger("cpfclearbutton"),Qt.on("tm-do-epo-update",function(){qt.trigger({type:"tm-epo-update"})}),Qt.trigger("tm-epo-init-events",{epo:{epo_id:b,form:Ft.form,currentCart:qt,cart_container:At,epo_holder:It,totals_holder_container:Et,totals_holder:Ct,main_cart:Dt,main_epo_inside_form:Bt,product_id_selector:w,epo_id_selector:f,product_id:s,this_epo_container:m,this_totals_container:_,this_epo_totals_container:Ht}}),Qt.trigger("epoEventHandlers",{epo:Ft,currentCart:qt,cartContainer:At,qtyElement:y,epoHolder:It,totalsHolderContainer:Et,totalsHolder:Ct,variationForm:v,variation_id_selector:t,main_epo_inside_form:Bt,this_product_type:St,get_price_excluding_tax:U,get_price_including_tax:Q}),"disable"!==Tt&&Et.addClass("tc-show"),Qt.trigger("epo_options_before_visible"),"yes"===Rt.tm_epo_progressive_display?setTimeout(function(){It.css("opacity",0).addClass("tc-show").animate({opacity:1},Mt.epoAnimationDelay,"easeOutExpo",function(){Qt.trigger("epo_options_visible"),Qt.trigger("tmlazy")})},Mt.epoDelay):(It.addClass("tc-show"),Qt.trigger("epo_options_visible"),Qt.trigger("tmlazy")),zt.addClass("tc-init")}function Dt(t){var e=t.variations_form,a=t.main_cart,i=t.this_epo_container,o=t.is_associated?"tc_variation_form.cpf":"wc_variation_form.cpf";e.off(o).on(o,function(){e.data("epo_loaded")||(G(t),Y(t),Qt.on("epoEventHandlers",function(){T(i),st()}),Lt.tcepo.lateFieldsPrices[t.epoEventId]=[],zt(t),xt(t),Ct(t),Qt.trigger("epo-after-init-in-timeout",{epo:t}),t.noEpoUpdate=!1,a.trigger("tm-epo-check-dpd"),a.trigger({type:"tm-epo-update",rules:"init"}),e.data("epo_loaded",!0))}),y&&e.trigger(o),Qt.trigger("epo-after-init",{epo:t})}function Ht(t,e,a,i,o){var r=Lt.extend(!0,{},t),c=i.attr("data-product-id"),n=i.attr("data-epo-id"),l=".tm-product-id-"+c,d="[data-epo-id='"+n+"']",p="p"+c+"e"+n,s=Lt(Mt.epoSelector+l+d),m=Lt(".tc-totals-form"+l+d),_=Lt(".tc-epo-totals"+l+d);t.isManual=!0,Lt.tcepo.formSubmitEvents[p]=[],Lt.tcepo.errorObject[p]=!1,Lt.tcepo.initialActivation[p]=!1,t.product_id=c,t.product_id_selector=l,t.epo_id=n,t.epo_id_selector=d,t.epoEventId=p,t.noEpoUpdate=!0,t.thisForm=e,t.this_epo_container=s,t.this_totals_container=m,t.this_epo_totals_container=_,st(),o.find(".tm-collapse").tmtoggle(),o.find(".tm-section-link").tmsectionpoplink(),D(e),qt(e),St(),yt(e,t),mt(e),O(i),bt(i.find(".tc-lightbox-image").not(".tm-extra-product-options-variations .radio-image")),G(t),Y(t),T(i),Lt.tcToolTip(e.find(".tm-tooltip")),zt(t,e,a),t.noEpoUpdate=!1,a.trigger({type:"tm-epo-update",norules:2}),setTimeout(function(){t.main_cart.trigger({type:"tm-epo-update",epoObject:r,norules:1})},200),et(a,e)}function h(t,e,a,i,o,r,c){var n,l,d,p,s,m=!1,_=!1,f=!1,u=void 0!==a,g=!1,h=0<Lt(".variation_form_section .variations-table").length,v=!1;if((t=Lt(t)).is(".tc-init")&&!c)return!0;if(C=e?t:Lt(P),Qt.trigger("tm-epo-init-start"),u||t.is(".product")&&(g=!0,u=I.find(Mt.epoSelector).length),u||"no"!==Rt.tm_epo_enable_final_total_box_all||t.is(".tm-no-options-composite")){g&&(Qt.trigger("tm-epo-init-no-options"),!t.is(".product")||t.is(".tm-no-options-pxq")||t.is(".tm-no-options-composite")||(t=I)),a||(g=t.find(Mt.addToCartSelector).last(),a=(a=0<g.length?g.val():(g=Lt(".tc-totals-form.tm-totals-form-main")).attr("data-product-id"))||""),i||(i=parseInt(t.find("input.tm-epo-counter").last().val(),10),Number.isFinite(i))||(i=""),g=".tm-product-id-"+a,y="[data-epo-id='"+i+"']",l=Lt(Mt.epoSelector+g+y),x=Lt(".tc-totals-form"+g+y),d=Lt(".tc-epo-totals"+g+y),s=t.find(".variations_form").not(".composite_component .variations_form").first(),n="p"+a+"e"+i,s&&s.attr("data-product_id")&&s.attr("data-product_id")!==a&&(s=t.find(".variations_form[data-product_id='"+a+"']")),0===(m=it(t,t,"form",a)).length&&(t.is(".tc-shortcode-wrap")?m=it(x,x,".tc-totals-form",a):t.is(".tc-epo-element-product-container")&&(0===(m=t.find(Mt.associatedEpoCart)).length&&0===(m=l.parent(Mt.associatedEpoSelector)).length&&(m=t.find(".tc-epo-element-product-container-right")),v=!0)),v&&0===s.length&&t.is(".variations_form")&&(s=t),Lt.tcepo.formSubmitEvents[n]=[],Lt.tcepo.errorObject[n]=!1,Lt.tcepo.initialActivation[n]=!1,0<m.find(Mt.epoSelector).length&&(_=!0),(f=0<m.find(".tc-totals-form").length?!0:f)||(Lt.tcepo.formSubmitEvents[n][Lt.tcepo.formSubmitEvents[n].length]={trigger:function(){return!0},on_true:function(){var t=Lt(".tc-totals-form.tm-product-id-"+a+"[data-epo-id='"+i+"']").tcClone(),e=Lt('<div class="tm-hidden tm-formepo-normal"></div>');return m.find(".tm-formepo-normal").remove(),e.append(t),m.append(e),!0},on_false:function(){setTimeout(function(){Lt(".tm-formepo-normal").remove()},100)}}),_||(Lt.tcepo.formSubmitEvents[n][Lt.tcepo.formSubmitEvents[n].length]={trigger:function(){return!0},on_true:function(){var t=Lt(Mt.epoSelector+".tm-product-id-"+a+"[data-epo-id='"+i+"']").tcClone().addClass("formepo"),e=Lt('<div class="tm-hidden tm-formepo"></div>');return m.find(".tm-formepo").remove(),e.append(t),m.append(e),!0},on_false:function(){setTimeout(function(){Lt(".tm-formepo").remove()},100)}}),p={main_product:t,main_cart:m,epo_id:i,form:at(t),main_epo_inside_form:_,product_id_selector:g,epo_id_selector:y,product_id:a,this_epo_container:l,this_totals_container:x,this_epo_totals_container:d,qtySelector:Mt.qtySelector,manualInitEPO:Ht,epoEventId:n,variations_form:s,has_epo:u,is_quickview:e,is_associated:v,is_epo_shortcode:l.is(".tc-shortcode"),mainEpoObject:r,associated_connect:o,noEpoUpdate:!0},Lt(p.form).data("epo_object",p),l.data("epo_object",p),m.data("product_id",a).data("epo_id",i).data("product_id_selector",g).data("epo_id_selector",y),_=(f=p).this_epo_container,x=f.main_product,f=f.epoEventId,u=_.find(".tm-limit"),r=_.find(".tm-exactlimit"),o=_.find(".tm-minimumlimit"),_.on("change.cpflimit","input.tm-epo-field.tmcp-checkbox",function(){var t=Lt(this);ot(t,!0),rt(t,!0)}),u.length&&ct(u,x,f),r.length&&nt(r,x,f),o.length&&lt(o,f),y=(g=p).epoEventId,b=g.this_epo_container,"yes"===Rt.tm_epo_upload_popup&&(Lt.tcepo.formSubmitEvents[y][Lt.tcepo.formSubmitEvents[y].length]={trigger:function(){return!0},on_true:function(){var t,e,a=b.data("num_uploads");return a&&Object.keys(a).length&&(t=Lt.tcFloatBox({fps:1,ismodal:!0,width:"50%",height:"300px",classname:"flasho tc-wrapper",data:Lt.epoAPI.template.html(Mt.templateEngine.tc_upload_messages,{files:a,title:Rt.i18n_uploading_files,message:Rt.i18n_uploading_message})}),e=function(){t.destroy(),E.off("ajaxSuccess",e)},E.on("ajaxSuccess",e)),!0},on_false:function(){return!0}}),D(l),qt(l),St(),yt(l,p),E.on("click.cpfurl change.cpfurl tmredirect",".tc-url-container .tmcp-radio, .tc-url-container .tmcp-radio+label",function(t){var e=Lt(this).attr("data-url");e&&P.location!==e&&(t.preventDefault(),P.location=e)}),E.on("change.cpfurl tmredirect",".tc-url-container .tmcp-select",function(t){var e=Lt(this).children("option:selected").attr("data-url");e&&P.location!==e&&(t.preventDefault(),P.location=e)}),Lt.tcToolTip(l.find(".tm-tooltip")),l.find(".tm-collapse").tmtoggle(),l.find(".tm-section-link").tmsectionpoplink(),c&&l.addClass("reactivate"),0<s.length?(c&&s.data("epo_loaded",!1),d.data("price",!1),(h?function t(e){var a=requestAnimationFrame(function(){t(e)}),i=e.variations_form,o=i.data("bound"),r=e.is_associated?"tc_variation_form.cpf":"wc_variation_form.cpf";o&&(cancelAnimationFrame(a),Dt(e),i.trigger(r))}:Dt)(p)):(setTimeout(function(){G(p),Y(p),Qt.on("epoEventHandlers",function(){T(l),st()}),Lt.tcepo.lateFieldsPrices[n]=[],zt(p),xt(p),Ct(p),Qt.trigger("epo-after-init-in-timeout",{epo:p}),m.trigger("tm-epo-check-dpd"),p.noEpoUpdate=!1,m.trigger({type:"tm-epo-update",rules:"init"})},20),Qt.trigger("epo-after-init",{epo:p})),mt(l),O(l),bt(l.find(".tc-lightbox-image").not(".tm-extra-product-options-variations .radio-image"));var y,b,w,x,k,F,_=p,A=_.this_epo_container;if(_=Rt.theme_name){switch(_=_.toLowerCase(),k=A.find("select"),_){case"flatsome":case"flatsome-child":case"flatsome child":k.wrap('<div class="custom select-wrapper"/>');break;case"avada":case"avada-child":case"avada child":k.wrap('<div class="avada-select-parent tm-select-parent"></div>'),Lt('<div class="select-arrow">&#xe61f;</div>').appendTo(A.find(".tm-select-parent")),P.calc_select_arrow_dimensions?(P.calc_select_arrow_dimensions(),Qt.on("tmsectionpoplink cpflogicdone",function(){P.calc_select_arrow_dimensions()})):P.calcSelectArrowDimensions&&(P.calcSelectArrowDimensions(),Qt.on("tmsectionpoplink cpflogicdone",function(){P.calcSelectArrowDimensions()}));break;case"bazar":case"bazar-child":case"bazar child":k.wrap('<div class="tm-select-wrapper select-wrapper"/>');break;case"blaszok":case"blaszok-child":case"blaszok child":F=function(){setTimeout(function(){Lt(".tm-extra-product-options select").not(".hasCustomSelect").filter(":visible").toArray().forEach(function(t){(t=Lt(t)).is(".mpcthSelect")||(t.width(t.outerWidth()),t.customSelect({customClass:"mpcthSelect"}))})},100)},Qt.on("cpflogicrun",function(){F()}),Qt.on("epo_options_visible",function(){F()});break;case"handmade":case"handmade child theme":Lt(".tm-owl-slider.tcowl-carousel").addClass("manual")}Qt.trigger("tm-theme-specific-actions",{epo:{theme_name:_,all_epo_selects:k}})}return E.off("click.cpf",".quantity:not(.buttons_added) .minus, .quantity:not(.buttons_added) .plus").on("click.cpf",".quantity:not(.buttons_added) .minus, .quantity:not(.buttons_added) .plus",function(){Lt(this).closest(".quantity").find(Mt.qtySelector).trigger("change.cpf")}),u=p,Qt.trigger("tm-epo-compatibility",{epo:u}),v||(r=d,x=m,Lt.tcFloatingTotalsBox(r,e,x),o=(w=p).form,f=w.epoEventId,Qt.trigger("tm-from-submit",{epo:w,functions:{tm_apply_validation:Ot,apply_submit_events:jt}}),!Ot(w)&&Lt.tcepo.formSubmitEvents[f].length&&o.on("submit",function(){jt(w)}),Qt.on("tc_apply_validation",function(){return Ot(w)}),ie(t,p=oe(p,n,p))),Qt.trigger("tm-epo-init-end",{epo:p,replace_suffixes_in_html:ee}),p}Qt.trigger("tm-epo-init-end-no-options")}function Nt(){var a,t;"no"===Rt.tm_epo_no_lazy_load&&Lt.extend(Lt.lazyLoadXT,{autoInit:!1,selector:"img.tmlazy",srcAttr:"data-original",visibleOnly:!1,updateEvent:Lt.lazyLoadXT.updateEvent+" tmlazy"}),0<(a=Lt(".tm-no-options-pxq, .tm-no-options-composite")).length&&(a.addClass("initializing"),a.toArray().forEach(function(t){var e;1<(e=(t=Lt(t)).find("input.tm-epo-counter")).length?e.toArray().forEach(function(t){var t=Lt(t),e=t.closest(".cart").parent();(e=e.is("form")?e.parent():e).is(".initializing")||h(e,!1,void 0,parseInt(t.val(),10))}):h(t,!1),a.removeClass("initializing")})),setTimeout(function(){try{0<(t=Lt(Mt.epoSelector).not(Mt.associatedEpoSelector+" "+Mt.epoSelector+", .tm-no-options-pxq, .tm-no-options-composite, .wc-product-table "+Mt.epoSelector)).length&&(a.addClass("initializing"),t.toArray().forEach(function(t){var t=Lt(t),a=t.attr("data-product-id"),e=t.attr("data-epo-id"),i=!1,o=!1,r=t.closest(".tc-after-shop-loop.tm-has-options");(0!==r.length||0===(r=Lt(Mt.tcAddToCartSelector+"[data-epo-id='"+e+"'][value='"+a+"']").closest("form,.cart").first().parent()).length&&0===(r=Lt(Mt.addToCartSelector+"[value='"+a+"']").closest("form,.cart").first().parent()).length&&0===(r=t.closest("form,.cart").first().parent(".tm-has-options")).length&&(t.is(".tc-shortcode")&&(r=t.wrap('<div class="tc-shortcode-wrap tc-wrap-'+e+'"></div>'),r=t.parent()),0<r.length))&&(o=!0),0<r.length&&(o&&(i=!0,t.closest("form,.cart").first().append(Lt('<input name="add-to-cart" value="'+a+'" type="hidden">')),t.closest("form,.cart").first().append(Lt('<input type="hidden" value="" class="variation_id" name="variation_id">'))),1<(o=(r=r.is("form")?r.parent():r).find("input.tm-epo-counter")).length?o.toArray().forEach(function(t){var t=Lt(t),e=t.closest(".cart").parent();(e=e.is("form")?e.parent():e).is(".initializing")||h(e,i,a,parseInt(t.val(),10))}):h(r,i,a,e))}),a.removeClass("initializing"))}catch(t){P.console.log(t),b=t}},1)}function Bt(t){var e,a,i,o,r,c;void 0===(t=void 0===(t=(f=t).attr("data-product_id"))?f.val():t)||!(c=(c=f.closest(".cart").find(".tm-epo-counter").val())||f.attr("data-epo-id"))||1!==f.closest(".tm-has-options").length&&void 0===f.attr("data-epo-id")||(o={},1===(e=1<(e=Lt(Mt.epoSelector+".tm-product-id-"+t+'[data-epo-id="'+c+'"]')).length?e.filter(".formepo")?e.filter(".formepo"):e.first():e).length&&(r=(c=Lt(".tc-totals-form.tm-product-id-"+t+'[data-epo-id="'+c+'"]')).find(".cpf-product-price").val(),a=c.find(".cpf-dynamic-product-price").val(),i=c.find(".cpf-override-product-price").val(),c=c.find(".tc_form_prefix").val(),o=Lt.extend(o,{tcajax:1,tcaddtocart:t,cpf_product_price:r,dynamic_product_price:a,override_product_price:i}),c)&&(o.tc_form_prefix=c),r=f.data(),Rt.ajaxbuttondata=Lt.epoAPI.util.deepCopyArray(r),(Rt.ajaxbutton=f).removeData(),f.data(Lt.extend(r,e.tcSerializeObject(),o)),Rt.ajaxdata={epos:e,_pid:t,data:r})}function t(){Lt(".tc-associated-table-product td.product-name").toArray().forEach(function(t){0===(t=Lt(t)).find(".product-name").length&&t.wrapInner(Lt('<div class="tc-associated-table-product-indent"></div>'))})}Rt&&e&&(Lt.fn.val=function(){var t=a.apply(this,arguments);return 0<arguments.length&&Lt(this).is(".input-text.qty")&&Lt(this).trigger("change.cpf"),t},"no"===Rt.tm_epo_no_lazy_load&&Lt.lazyLoadXT&&Lt.extend(Lt.lazyLoadXT,{autoInit:!1,updateEvent:Lt.lazyLoadXT.updateEvent+" tmlazy"}),Mt.localInputDecimalSeparator=""===Rt.tm_epo_global_input_decimal_separator?Rt.currency_format_decimal_sep:Lt.epoAPI.locale.getSystemDecimalSeparator(),Mt.localDecimalSeparator=""===Rt.tm_epo_global_displayed_decimal_separator?Rt.currency_format_decimal_sep:Lt.epoAPI.locale.getSystemDecimalSeparator(),Mt.localThousandSeparator=""===Rt.tm_epo_global_displayed_decimal_separator?Rt.currency_format_thousand_sep:Lt.epoAPI.locale.getSystemDecimalSeparator(),Mt.epoDelay=Rt.tm_epo_start_animation_delay||P.tc_epo_delay||500,Mt.epoAnimationDelay=Rt.tm_epo_animation_delay?Rt.tm_epo_start_animation_delay:P.tc_epo_animation_delay||500,Mt.getElementFromFieldCache=[],Mt.epoSelector=".tc-extra-product-options",Mt.associatedEpoSelector=".tc-extra-product-options-inline",Mt.associatedEpoCart=".tc-epo-element-product-container-cart",Mt.addToCartSelector="input[name='add-to-cart']",Mt.tcAddToCartSelector="input.tc-add-to-cart",Mt.qtySelector="input.qty,input[name='quantity'],select.qty,.drop-down-button #qty,.plus-minus-button #qty,.slider-input #amount",Mt.associateQtySelector="input.tm-qty-alt",Mt.addToCartButtonSelector=".add_to_cart_button, .single_add_to_cart_button",Mt.compositeSelector=".bto_item,.component",Mt.nativeProductPriceSelector=Rt.tm_epo_global_product_price_selector||".woocommerce .product p.price, .wc-block-components-product-price",Mt.associatedNativeProductPriceSelector=".product-price .associated-price",Mt.templateEngine=Lt.epoAPI.applyFilter("tc_adjust_templateEngine",{plain_price:e.template("tc-plain-price"),suffix:e.template("tc-suffix"),main_suffix:e.template("tc-main-suffix"),price:e.template("tc-price"),price_m:e.template("tc-price-m"),sale_price:e.template("tc-sale-price"),sale_price_m10:e.template("tc-sale-price-m10"),sale_price_m01:e.template("tc-sale-price-m01"),sale_price_m11:e.template("tc-sale-price-m11"),tc_chars_remanining:e.template("tc-chars-remanining"),tc_final_totals:e.template("tc-final-totals"),tc_floating_box:e.template("tc-floating-box"),tc_floating_box_nks:e.template("tc-floating-box-nks"),tc_formatted_price:e.template("tc-formatted-price"),tc_formatted_sale_price:e.template("tc-formatted-sale-price"),tc_lightbox:e.template("tc-lightbox"),tc_lightbox_zoom:e.template("tc-lightbox-zoom"),tc_section_pop_link:e.template("tc-section-pop-link"),tc_upload_messages:e.template("tc-upload-messages")}),Lt.tcAPI=function(){return Mt},Lt.tcAPIGet=function(t){return Mt[t]},Lt.tcAPISet=function(t,e){Mt[t]=e},Lt.tc_validator&&(Lt.extend(Lt.tc_validator.messages,{required:Rt.tm_epo_global_validator_messages.required,email:Rt.tm_epo_global_validator_messages.email,url:Rt.tm_epo_global_validator_messages.url,number:Rt.tm_epo_global_validator_messages.number,digits:Rt.tm_epo_global_validator_messages.digits,maxlengthsingle:Lt.tc_validator.format(Rt.tm_epo_global_validator_messages.maxlengthsingle),maxlength:Lt.tc_validator.format(Rt.tm_epo_global_validator_messages.maxlength),minlengthsingle:Lt.tc_validator.format(Rt.tm_epo_global_validator_messages.minlengthsingle),minlength:Lt.tc_validator.format(Rt.tm_epo_global_validator_messages.minlength),max:Lt.tc_validator.format(Rt.tm_epo_global_validator_messages.max),min:Lt.tc_validator.format(Rt.tm_epo_global_validator_messages.min),step:Lt.tc_validator.format(Rt.tm_epo_global_validator_messages.step),lettersonly:Lt.tc_validator.format(Rt.tm_epo_global_validator_messages.lettersonly),lettersspaceonly:Lt.tc_validator.format(Rt.tm_epo_global_validator_messages.lettersspaceonly),alphanumeric:Lt.tc_validator.format(Rt.tm_epo_global_validator_messages.alphanumeric),alphanumericunicode:Lt.tc_validator.format(Rt.tm_epo_global_validator_messages.alphanumericunicode),alphanumericunicodespace:Lt.tc_validator.format(Rt.tm_epo_global_validator_messages.alphanumericunicodespace),repeaterminrows:Lt.tc_validator.format(Rt.tm_epo_global_validator_messages.repeaterminrows),repeatermaxrows:Lt.tc_validator.format(Rt.tm_epo_global_validator_messages.repeatermaxrows)}),Lt.tc_validator.addMethod("alphanumeric",function(t,e){return this.optional(e)||/^[a-zA-Z0-9.-]+$/i.test(t)},Lt.tc_validator.messages.alphanumeric),Lt.tc_validator.addMethod("lettersonly",function(t,e){return this.optional(e)||/^[a-z]+$/i.test(t)},Lt.tc_validator.messages.lettersonly),Lt.tc_validator.addMethod("lettersspaceonly",function(t,e){return this.optional(e)||/^[a-z,\u0020]+$/i.test(t)},Lt.tc_validator.messages.lettersspaceonly),Lt.tc_validator.addMethod("alphanumericunicode",function(t,e){return this.optional(e)||/^[\u0030-\u0039\u0041-\u005A\u0061-\u007A\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u00FF\u0100-\u0148\u014A-\u017F\u0180-\u01BF\u01C4-\u024F\u1E02-\u1EF3\u0370-\u03FF\u0400-\u04FF\u0500-\u052F\u3040-\u309f\u30a0-\u30ff\u4e00-\u9faf\u3400-\u4dbf\u0600-\u06FF\u0750-\u077F\u08A0-\u08FF\uFB50-\uFDFF\uFE70-\uFEFF\u10E60-\u10E7F\u1EC70-\u1ECBF\u1ED00-\u1ED4F\u1EE00-\u1EEFF\u0530-\u1058F]+$/i.test(t)},Lt.tc_validator.messages.alphanumericunicode),Lt.tc_validator.addMethod("alphanumericunicodespace",function(t,e){return this.optional(e)||/^[\u0030-\u0039\u0041-\u005A\u0061-\u007A\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u00FF\u0100-\u0148\u014A-\u017F\u0180-\u01BF\u01C4-\u024F\u1E02-\u1EF3\u0370-\u03FF\u0400-\u04FF\u0500-\u052F\u3040-\u309f\u30a0-\u30ff\u4e00-\u9faf\u3400-\u4dbf\u0600-\u06FF\u0750-\u077F\u08A0-\u08FF\uFB50-\uFDFF\uFE70-\uFEFF\u10E60-\u10E7F\u1EC70-\u1ECBF\u1ED00-\u1ED4F\u1EE00-\u1EEFF\u0530-\u1058F,\u0020]+$/i.test(t)},Lt.tc_validator.messages.alphanumericunicodespace),Lt.tc_validator.addMethod("repeaterminrows",function(t,e,a){return Lt.epoAPI.math.toInt(Lt(e).closest(".tc-element-inner-wrap").find(".tc-repeater-element").length)>=Lt.epoAPI.math.toInt(a)},Lt.tc_validator.messages.repeaterminrows),Lt.tc_validator.addMethod("repeatermaxrows",function(t,e,a){return Lt.epoAPI.math.toInt(Lt(e).closest(".tc-element-inner-wrap").find(".tc-repeater-element").length)<=Lt.epoAPI.math.toInt(a)},Lt.tc_validator.messages.repeatermaxrows),Lt.tc_validator.addMethod("product_element_radio_qty",function(t,e){return 0<Lt(e).closest(".tm-element-ul-product").find("input.tc-epo-field-product.tmcp-radio:checked").closest(".tc-epo-element-product-holder").find(".tm-qty").first().val()},Lt.tc_validator.messages.required),Lt.tc_validator.addMethod("product_element_select_qty",function(t,e){return 0<Lt(e).closest(".tm-element-ul-product").find("select.tc-epo-field-product.tmcp-select").closest(".tc-epo-element-product-holder").find(".tm-qty").first().val()},Lt.tc_validator.messages.required)),Lt.epoAPI.util.unformat=function(t){var t=Lt.epoAPI.math.unformat(t,Mt.localInputDecimalSeparator),e=parseFloat(t);return Number.isFinite(e)?e:t},Lt.tmType||(Lt.tmType=function(t){return Object.prototype.toString.call(t).match(/\s([a-zA-Z]+)/)[1].toLowerCase()}),Lt.is_on_screen||(Lt.fn.is_on_screen=function(){var t=Lt(P),e=Lt.epoAPI.dom.scroll(),a=this.offset(),e={top:e.top,left:e.left};return e.right=e.left+t.width(),e.bottom=e.top+t.height(),a.right=a.left+this.outerWidth(),a.bottom=a.top+this.outerHeight(),!(e.right<a.left||e.left>a.right||e.bottom<a.top||e.top>a.bottom)}),Lt().tmtoggle||(Lt.fn.tmtoggle=function(){var t=this,e=!1,c=0;if(0!==t.length)return void 0===P.tc_accordion_offset&&(P.tc_accordion_offset=-100),t.toArray().forEach(function(i){var t,o,r;(i=Lt(i)).data("tm-toggle-init")||(i.data("tm-toggle-init",1),t=i.find(".tm-toggle"),o=i.find(".tm-collapse-wrap"),r=(0<(r=Lt(".tm-collapse.tmaccordion")).closest(".tc-epo-element-product-holder").length?r.closest(".tc-epo-element-product-holder").find(".tm-collapse.tmaccordion"):Lt(".tm-collapse.tmaccordion").not(".tc-epo-element-product-holder .tm-collapse.tmaccordion")).find(".tm-toggle"),0!==t.length&&0!==o.length&&(o.is(".closed")?(Lt(o).removeClass("closed open").addClass("closed").hide(),Lt(t).find(".tm-arrow").removeClass("tcfa-angle-down tcfa-angle-up").addClass("tcfa-angle-down"),Lt(t).removeClass("toggle-header-open toggle-header-closed").addClass("toggle-header-closed"),Lt(t).attr("aria-expanded",!1)):(Lt(o).removeClass("closed open").addClass("open").show(),Lt(t).find(".tm-arrow").removeClass("tcfa-angle-down tcfa-angle-up").addClass("tcfa-angle-up"),Lt(t).removeClass("toggle-header-open toggle-header-closed").addClass("toggle-header-open"),Lt(t).attr("aria-expanded",!0),e=!0),t.toArray().forEach(function(a){(a=Lt(a)).on("closewrap.tmtoggle",function(){i.is(".tmaccordion")&&Lt(o).is(".closed")||(Lt(o).removeClass("closed open").addClass("closed"),Lt(this).find(".tm-arrow").removeClass("tcfa-angle-down tcfa-angle-up").addClass("tcfa-angle-down"),Lt(this).removeClass("toggle-header-open toggle-header-closed").addClass("toggle-header-closed"),Lt(this).attr("aria-expanded",!1),Lt(o).removeClass("tm-animated fadein"),i.is(".tmaccordion"),Lt(o).animate({height:"toggle"},100,function(){Lt(o).hide()}),Qt.trigger("tmlazy"))}),a.on("openwrap.tmtoggle",function(t,e){i.is(".tmaccordion")&&Lt(r).not(Lt(this)).trigger("closewrap.tmtoggle"),Lt(o).removeClass("closed open").addClass("open"),Lt(this).find(".tm-arrow").removeClass("tcfa-angle-down tcfa-angle-up").addClass("tcfa-angle-up"),Lt(this).removeClass("toggle-header-open toggle-header-closed").addClass("toggle-header-open"),Lt(this).attr("aria-expanded",!0),Lt(o).show().removeClass("tm-animated fadein").addClass("tm-animated fadein"),setTimeout(function(){Qt.trigger("tmlazy")},200),setTimeout(function(){void 0===e&&c&&i.is(".tmaccordion")&&!i.is_on_screen()&&Qt.tcScrollTo(a,10,P.tc_accordion_offset)},110)}),a.on("click.tmtoggle keydown.tmtoggle",function(t){"keydown"===t.type&&"Enter"!==t.key||(t.preventDefault(),Lt(o).is(".closed")?Lt(this).trigger("openwrap.tmtoggle"):Lt(this).trigger("closewrap.tmtoggle"))}),a.find(".tm-qty").closest(".cpf-element").find(".tm-epo-field").on("change.cpf",function(){a.trigger("openwrap.tmtoggle")})})))}),void 0===P.tc_accordion_closed_on_page_load&&!e&&0<t.filter(".tmaccordion").length&&t.filter(".tmaccordion").first().find(".tm-toggle").trigger("openwrap.tmtoggle",{nomove:1}),c=1,t}),Lt().tmpoplink||(Lt.fn.tmpoplink=function(t){var o,r={classname:"flasho tc-wrapper cart-popup"};if(0!==this.length)return t&&(r=Lt.extend({},r,t)),o=function(t){return Lt.epoAPI.template.html(e.template("tc-cart-options-popup"),{title:t.title,id:t.id,html:t.html,close:Rt.i18n_close})},this.toArray().forEach(function(t){var e,a,i;(t=Lt(t)).is(".tc-poplink")||(t.addClass("tc-poplink"),a=t.attr("href"),e=t.attr("data-title"),a=Lt(a).html(),e=e||Rt.i18n_addition_options,i=o({id:"tc-floatbox-content",html:a,title:e}),t.on("click.tmpoplink",function(t){Lt.tcFloatBox({fps:1,ismodal:!1,width:"80%",height:"80%",classname:r.classname,data:i}),t.preventDefault()}))})}),(o=function(t,e,a){return this.this_epo_totals_container=t,this.is_quickview=e,this.main_cart=a,!(e||!Rt.floating_totals_box||"disable"===Rt.floating_totals_box||!a||!t.length)&&(this.init(),this)}).prototype={constructor:o,onUpdate:function(){var t,e,a,i,o,r,c,n=this.this_epo_totals_container.data("tm-html"),l=this.this_epo_totals_container.data("tm-floating-box-data"),d=[];if(l&&l.length)for(e=l.length,a=0;a<e;a++){if((i=l[a]).title=i.title?String(i.title):"&nbsp;",i.value=i.value?String(i.value):"&nbsp;","&nbsp;"!==i.title){for((o=x.createElement("div")).innerHTML=i.title,c=o.querySelectorAll("span"),r=0;r<c.length;r++)c[r].remove();i.title=o.innerHTML}this.is_nks&&(""!==i.label_show&&(i.title=""),""!==i.value_show)&&(i.value=""),"yes"===Rt.tm_epo_auto_hide_price_if_zero&&!0===Lt.epoAPI.util.isEmpty(i.price)?i.price="":i.price=Zt(i.price,this.this_epo_totals_container,!0),d.push({label_show:i.label_show,value_show:i.value_show,title:i.title,value:i.value,quantity:i.quantity,price:i.price})}(!n||""!==n||l&&l.length)&&(n&&""!==n||this.is_nks)||(n="",this.floatingBox.hide()),n=Lt.epoAPI.template.html(this.engineTemplate,{html_before:Rt.floating_totals_box_html_before,html_after:Rt.floating_totals_box_html_after,option_label:Rt.i18n_option_label,option_value:Rt.i18n_option_value,option_qty:Rt.i18n_option_qty,option_price:Rt.i18n_option_price,values:d,totals:n}),this.floatingBox.html(n),this.onUpdateScroll(),"yes"===Rt.floating_totals_box_add_button&&(t=this.main_cart.find(Mt.addToCartButtonSelector).first()).tcClone().addClass("tc-add-to-cart-button").on("click",function(){t.trigger("click")}).appendTo(this.floatingBox)},onUpdateScroll:function(){"always"===Rt.floating_totals_box_visibility?this.floatingBox.is(":empty")&&!this.is_nks_alt?this.floatingBox.hide():this.floatingBox.show():("hideafterscroll"===Rt.floating_totals_box_visibility&&(Qt.scrollTop()>Lt.epoAPI.math.toFloat(Rt.floating_totals_box_pixels)&&!this.is_nks_alt?this.floatingBox.is(":hidden")||(!1===this.is_nks?this.floatingBox.fadeOut():this.floatingBox.hide()):!this.floatingBox.is(":hidden")&&!this.is_nks_alt||this.floatingBox.is(":empty")&&!this.is_nks_alt||(!1===this.is_nks?this.floatingBox.fadeIn():this.floatingBox.show())),"afterscroll"===Rt.floating_totals_box_visibility&&(Qt.scrollTop()>Lt.epoAPI.math.toFloat(Rt.floating_totals_box_pixels)||this.is_nks_alt?this.floatingBox.is(":hidden")&&!this.floatingBox.is(":empty")||this.is_nks_alt?!1===this.is_nks?this.floatingBox.fadeIn():this.floatingBox.show():!this.floatingBox.is(":hidden")&&this.floatingBox.is(":empty")&&(!1===this.is_nks?this.floatingBox.fadeOut():this.floatingBox.hide()):this.floatingBox.is(":hidden")||(!1===this.is_nks?this.floatingBox.fadeOut():this.floatingBox.hide())))},addEvents:function(){this.onUpdate(),this.main_cart.on("tm-epo-after-update",this.onUpdate.bind(this)),this.main_cart.on("tm-epo-short-update",this.onUpdate.bind(this)),!1===this.is_nks&&Qt.on("scroll",this.onUpdateScroll.bind(this))},init:function(){this.floatingBox=Lt('<div class="tm-floating-box '+Rt.floating_totals_box+'"></div>'),this.nks_selector=Lt(".tm-floating-box-nks").first(),this.alt_selector=Lt(".tm-floating-box-alt").first(),this.engineTemplate=Mt.templateEngine.tc_floating_box,this.is_nks=!1,this.is_nks_alt=!1,0<this.nks_selector.length?(this.is_nks=!0,this.floatingBox.removeClass("top left right bottom").appendTo(this.nks_selector).show()):(0<this.alt_selector.length?this.floatingBox.removeClass("top left right bottom").appendTo(this.alt_selector):this.floatingBox.appendTo("body")).hide(),(0<this.nks_selector.length||0<this.alt_selector.length)&&(this.is_nks_alt=!0,this.engineTemplate=Mt.templateEngine.tc_floating_box_nks),this.addEvents()}},Lt.tcFloatingTotalsBox=function(t,e,a){var i=!1;return t&&t.length&&void 0===t.data("tcfloatingtotalsbox")&&(i=new o(t,e,a),t.data("tcfloatingtotalsbox",i)),i},Lt.tc_product_image={},Lt.tc_product_image_store={},Lt.tc_replace_object_values=function(a,i){return Object.keys(a).forEach(function(e){Object.keys(a[e]).forEach(function(t){void 0!==i[e]&&void 0!==i[e][t]&&Object.prototype.hasOwnProperty.call(i[e],t)&&(a[e][t]=i[e][t])})}),a},Lt.tc_maybe_copy_object_values=function(a,i){return Object.keys(i).forEach(function(e){Object.keys(i[e]).forEach(function(t){void 0===i[e]||!Object.prototype.hasOwnProperty.call(i[e],t)||void 0===i[e][t]||void 0!==a[e]&&void 0!==a[e][t]||(void 0===a[e]&&(a[e]={}),a[e][t]=i[e][t])})}),a},Lt.tc_pre_populate_store=function(){var t={0:{},1:{},2:{},3:{}};return t[0].src="",t[0].srcset="",t[0].sizes="",t[0].title="",t[0].alt="",t[0]["data-src"]="",t[0]["data-large_image"]="",t[0]["data-large_image_width"]="",t[0]["data-large_image_height"]="",t[1]["data-thumb"]="",t[2].src="",t[3].href="",t[3].title="",t},Lt.tc_populate_store=function(t,e){var a=e.find(".flex-control-nav li:eq(0) img"),e=e.find(".woocommerce-product-gallery__wrapper ").find(".woocommerce-product-gallery__image, .woocommerce-product-gallery__image--placeholder").eq(0),i=t,t=t.closest("a"),o={0:{},1:{},2:{},3:{}};return o[0].src=i.attr("src"),o[0].srcset=i.attr("srcset"),o[0].sizes=i.attr("sizes"),o[0].title=i.attr("title"),o[0].alt=i.attr("alt"),o[0]["data-src"]=i.attr("data-src"),o[0]["data-large_image"]=i.attr("data-large_image"),o[0]["data-large_image_width"]=i.attr("data-large_image_width"),o[0]["data-large_image_height"]=i.attr("data-large_image_height"),o[1]["data-thumb"]=e.attr("data-thumb"),o[2].src=a.attr("src"),o[3].href=t.attr("href"),o[3].title=t.attr("title"),o},Lt.tc_maybe_copy_object_values_from_img=function(t,e,a){for(var i,o,r,c,n=a.find(".flex-control-nav li:eq(0) img"),l=[e,a.find(".woocommerce-product-gallery__wrapper").find(".woocommerce-product-gallery__image, .woocommerce-product-gallery__image--placeholder").eq(0),n,e.closest("a")],d=[["src","srcset","sizes","title","alt","data-src","data-large_image","data-large_image_width","data-large_image_height","large-image"],["data-thumb"],["src"],["href","title"]],p=0;p<l.length;p++)if((i=l[p])&&i[0])for(o=i[0].attributes,c=0;c<o.length;c++)(r=o[c]).specified&&-1!==d[p].indexOf(r.name)&&(void 0===t[p]||void 0!==t[p]&&void 0===t[p][r.name])&&(void 0===t[p]&&(t[p]={}),t[p][r.name]=r.value);return t},Lt.fn.tc_set_attr=function(t,e,a){(void 0===Lt.tc_product_image[a=void 0===a?0:a]||void 0!==Lt.tc_product_image[a]&&void 0===Lt.tc_product_image[a][t])&&(void 0===Lt.tc_product_image[a]&&(Lt.tc_product_image[a]={}),Lt.tc_product_image[a][t]="",this.attr(t))&&(Lt.tc_product_image[a][t]=this.attr(t)),!1===e?this.removeAttr(t):this.attr(t,e)},Lt.fn.tc_reset_attr=function(t,e){void 0!==Lt.tc_product_image[e=void 0===e?0:e]&&(void 0!==Lt.tc_product_image[e][t]&&this.attr(t,Lt.tc_product_image[e][t]),delete Lt.tc_product_image[e][t])},Lt.fn.tc_update_attr=function(t,e){void 0!==Lt.tc_product_image[e=void 0===e?0:e]&&(Lt.tc_product_image[e][t]=this.attr(t))},Lt.fn.tc_image_update=function(t,e){var a,t=Lt(t),e=Lt(e),i=this.data("epo_object"),o=i.main_product.closest("#product-"+i.product_id),r=o;o.length<=0&&(r=i.main_product.closest(".post-"+i.product_id)),o=(t=t.is("select")?t.children("option:selected"):t).data("image-variations"),a=(i=""!==Rt.tm_epo_global_product_image_selector?Lt(Rt.tm_epo_global_product_image_selector):r.find("a.woocommerce-main-image img, img.woocommerce-main-image,a img").not(".thumbnails img,.product_list_widget img,img.emoji,a.woocommerce-product-gallery__trigger img").first()).closest("a"),1<i.length&&(i=i.first()),t&&o&&0<e.length?(e.removeAttr("data-o_src").removeAttr("data-o_title").removeAttr("data-o_alt").removeAttr("data-o_srcset").removeAttr("data-o_sizes").removeAttr("srcset").removeAttr("sizes"),t=o.imagep,o.imagep.image_link||(t=o.image),e.attr("title",t.image_title),e.attr("alt",t.image_alt),t.image_srcset&&e.attr("srcset",t.image_srcset),t.image_sizes&&e.attr("sizes",t.image_sizes),i.tc_set_attr("title",t.image_title),i.tc_set_attr("alt",t.image_alt),i.tc_set_attr("data-large-image",t.image_link),i.data.wc27_zoom_target&&(i.data.wc27_zoom_target.tc_set_attr("data-thumb",t.image_link),r.find(".flex-control-nav li:eq(0) img").tc_set_attr("src",t.image_link)),a.tc_set_attr("href",t.image_link),a.tc_set_attr("title",t.image_caption)):(i.tc_reset_attr("title"),i.tc_reset_attr("alt"),i.tc_reset_attr("data-large-image"),i.data.wc27_zoom_target&&(i.data.wc27_zoom_target.tc_reset_attr("data-thumb"),r.find(".flex-control-nav li:eq(0) img").tc_reset_attr("src")),a.tc_reset_attr("href"),a.tc_reset_attr("title"))},Lt.fn.tm_find_matching_variations=function(t,e){var a,i,o=[];if(t)for(a=0;a<t.length;a+=1)i=t[a],Lt.fn.tm_variations_match(i.attributes,e)&&o.push(i);return o},Lt.fn.tm_variations_match=function(e,a){var i,o,r=!0;return Object.keys(e).forEach(function(t){Object.prototype.hasOwnProperty.call(e,t)&&(i=e[t],o=a[t],void 0!==i)&&void 0!==o&&0!==i.length&&0!==o.length&&i!==o&&(r=!1)}),r},Lt().tclightbox||(Lt.fn.tclightbox=function(){if(0!==this.length)return this.toArray().forEach(function(t){var a,e,i,o,t=Lt(t);!t.is(".tcinit")&&(a=t.attr("src")||t.attr("data-original"),e=(e=t.closest("label")).closest(".tmcp-field-wrap").find(".tm-epo-field[id='"+e.attr("for")+"']"),a=t.attr("data-large_image")||e.attr("data-imagel")||e.attr("data-imagep")||e.attr("data-image")||a)&&(t.addClass("tcinit").before(Lt.epoAPI.template.html(Mt.templateEngine.tc_lightbox,{})),e=t.prev(),t.wrap("<div class='tc-lightbox-image-wrap'/>"),t.after(e),i=e.find(".tc-lightbox-button"),o=function(){i.addClass("tcinit").on("click.tclightbox",function(t){var e;0<Lt(".tc-closing.tc-lightbox").length||(e=Lt.epoAPI.dom.size(),e=Lt("<img>").addClass("tc-lightbox-img").attr("src",a).css("maxHeight",e.visibleHeight+"px").css("maxWidth",e.visibleWidth+"px"),Lt.tcFloatBox({fps:1,ismodal:!1,width:"auto",height:"auto",classname:"flasho tc-lightbox",animateIn:"tc-lightbox-zoomin",animateOut:"tc-lightbox-zoomout",data:Lt.epoAPI.template.html(Mt.templateEngine.tc_lightbox_zoom,{img:e[0].outerHTML}),zIndex:102001,cancelClass:".tc-lightbox-img, .tc-lightbox-button-close",unique:!0}),t.preventDefault())})},"yes"===Rt.tm_epo_preload_lightbox_image?((t=new Image).src=a,t.onload=function(){o()}):o())})}),Lt().tmsectionpoplink||(Lt.fn.tmsectionpoplink=function(){if(0!==this.length)return this.toArray().forEach(function(t){var e,a,i,o,r,c,t=Lt(t);t.data("tmsectionpoplink")||(t.data("tmsectionpoplink",!0),e=t.attr("data-sectionid"),a=Rt.i18n_addition_options,i=t.closest(".cpf-section[data-uniqid='"+e+"']"),o=!1,r=function(){var t=Lt("#tm-section-pop-up");t.parents().removeClass("noanimated"),t.after(i),t.remove(),i.find(".tm-section-link").show(),i.find(".tm-section-pop").hide()},c=function(t){t.target===Lt(".flasho")[0]||Lt(t.target).closest(".flasho").length||r()},t.attr("data-title")&&(a=t.attr("data-title")),t.on("click.tmsectionpoplink",function(t){t.preventDefault(),o=!1,i.before(Lt.epoAPI.template.html(Mt.templateEngine.tc_section_pop_link,{title:a,close:Rt.i18n_close})),(t=Lt("#tm-section-pop-up")).on("click",c),t.find(".float-editbox").prepend(i),i.find(".tm-section-link").hide(),i.find(".tm-section-pop").show(),t.parents().addClass("noanimated"),t.find(".floatbox-cancel").on("click",function(){o||(o=!0,r())}),Qt.trigger("tmlazy"),Qt.trigger("tmsectionpoplink")}))})}),Lt().cpfdependson||(Lt.fn.cpfdependson=function(t,e,a,i){var o,r,c,n,l,d,p,s,m,_,f,u,g,h,v,y=this,b=[],w=null;if(y.length&&"object"==typeof t){for(e=e||"show",v=(h=y.first().closest(".tc-section-fields")).is(".tc-repeater-section"),d=0;d<t.length;d++)if(b[d]=0,_=t[d],Array.isArray(_))for(p=0;p<_.length;p++)if("object"==typeof(f=_[p])){if(v&&(f.element=h.find('[data-uniqid="'+f.element.attr("data-uniqid")+'"')),"quantity"===f.type)f.element.data("didcpflogic")||f.element.off(n="change.cpflogic input.cpflogic").on(n,function(){T(i.this_epo_container)}).data("didcpflogic",1);else if("variation"===f.type||"variationattributes"===f.type)$("found_variation.tmlogic",!1,function(){T(f.element),Qt.trigger("tm-do-epo-update")}),$("hide_variation.tmlogic",!1,function(){T(f.element),Qt.trigger("tm-do-epo-update")});else if((o=function(t,e){var a,i,o=Lt(t);if(0!==o.length){if(o.is(".cpf-section"))return t.find(".tm-epo-field");if(a=o.attr("data-uniqid"),i=(t=o.closest(Mt.epoSelector)).attr("data-epo-id"),!t.is(".reactivate")&&Mt.getElementFromFieldCache&&Mt.getElementFromFieldCache[i]&&Mt.getElementFromFieldCache[i][a]&&Mt.getElementFromFieldCache[i][a][e])return Mt.getElementFromFieldCache[i][a][e];if(0<(t=o.attr("class").split(" ").map(function(t){return-1!==t.indexOf("cpf-type-",0)?t:null}).filter(function(t){return null!=t?t:null})).length)switch("cpf-type-product"===(t=t[0])&&(t=o.is(".cpf-type-product-mode-product")||o.is(".cpf-type-product-checkbox")||o.is(".cpf-type-product-thumbnailmultiple")||o.is(".cpf-type-product-custombundle")?"cpf-type-checkbox":o.is(".cpf-type-product-dropdown")?"cpf-type-select":"cpf-type-radio"),void 0===Mt.getElementFromFieldCache[i]&&(Mt.getElementFromFieldCache[i]=[]),void 0===Mt.getElementFromFieldCache[i][a]&&(Mt.getElementFromFieldCache[i][a]=[]),t){case"cpf-type-radio":return Mt.getElementFromFieldCache[i][a][e]=o.find(".tm-epo-field.tmcp-radio"),Mt.getElementFromFieldCache[i][a][e];case"cpf-type-checkbox":return Mt.getElementFromFieldCache[i][a][e]=o.find(".tm-epo-field.tmcp-checkbox"),Mt.getElementFromFieldCache[i][a][e];case"cpf-type-select":return Mt.getElementFromFieldCache[i][a][e]=o.find(".tm-epo-field.tmcp-select"),Mt.getElementFromFieldCache[i][a][e];case"cpf-type-selectmultiple":return Mt.getElementFromFieldCache[i][a][e]=o.find(".tm-epo-field.tmcp-selectmultiple"),Mt.getElementFromFieldCache[i][a][e];case"cpf-type-textarea":return Mt.getElementFromFieldCache[i][a][e]=o.find(".tm-epo-field.tmcp-textarea"),Mt.getElementFromFieldCache[i][a][e];case"cpf-type-textfield":return Mt.getElementFromFieldCache[i][a][e]=o.find(".tm-epo-field.tmcp-textfield"),Mt.getElementFromFieldCache[i][a][e];case"cpf-type-color":return Mt.getElementFromFieldCache[i][a][e]=o.find(".tm-epo-field.tm-color-picker"),Mt.getElementFromFieldCache[i][a][e];case"cpf-type-range":return Mt.getElementFromFieldCache[i][a][e]=o.find(".tm-epo-field.tmcp-range"),Mt.getElementFromFieldCache[i][a][e];case"cpf-type-date":return Mt.getElementFromFieldCache[i][a][e]=o.find(".tm-epo-field.tmcp-date"),Mt.getElementFromFieldCache[i][a][e];case"cpf-type-time":return Mt.getElementFromFieldCache[i][a][e]=o.find(".tm-epo-field.tmcp-time"),Mt.getElementFromFieldCache[i][a][e];case"cpf-type-variations":return Mt.getElementFromFieldCache[i][a][e]=o.closest(".cpf-section").find(".tm-epo-field.tm-epo-variation-element"),Mt.getElementFromFieldCache[i][a][e]}}}(f.element,v?h.index():0))&&0<o.length)for(s=0;s<o.length;s++)o[s]&&0!==(r=Lt(o[s])).length&&(n="change.cpflogic",w&&!w.closest(Mt.associatedEpoSelector).length||(c=".tm-product-id-"+(l=r.closest(Mt.epoSelector)).attr("data-product-id"),l="[data-epo-id='"+l.attr("data-epo-id")+"']",w=Lt(Mt.epoSelector+c+l)),!r.data("tmhaslogicevents")||a)&&(!r.data("tmhaslogicevents")&&r.is(".tm-epo-variation-element")?($("found_variation.tmlogic",!1,function(){T(w),Qt.trigger("tm-do-epo-update")}),$("hide_variation.tmlogic",!1,function(){T(w),Qt.trigger("tm-do-epo-update")})):(r.is(":text, textarea")&&(n="change.cpflogic input.cpflogic"),r.is(':input[type="number"]')&&(n="change.cpflogic input.cpflogic keypress.cpflogic"),r.off(n).on(n,function(){T(w)})),r.data("tmhaslogicevents",1));b[d]++}for(m=0;m<y.length;m++)(u=Lt(y[m])).data({matches:b,toggle:e,fields:t,isactive:g="hide"===e}),g?u.removeClass("tc-hidden"):u.addClass("tc-hidden");return y.addClass("iscpfdependson is-epo-depend").data("iscpfdependson",1),y}},Lt.fn.run_cpfdependson=function(){T()}),Lt.tcepo={formSubmitEvents:{},oneOptionIsSelected:{},initialActivation:{},lateFieldsPrices:{},errorObject:{},showHideTotal:{}},Lt.tcepo.tm_init_epo=function(t,e,a,i){h(t,e,a,i)},Lt.tcepo.tmLazyloadContainer=function(t){g=t},Qt.on("tc_manual_init",function(t,e){var a,i,o,r;"container"in e&&"reactivate"in e&&(a=e.reactivate,e=e.container),a=a,i=(e=Lt(e=e)).attr("data-product-id"),o=e.attr("data-epo-id"),h(r=(r=(r=e.parent()).is("form")||(r=e.closest("form")).is("form")?r:e.parent()).parent(),!1,i,o,void 0,void 0,a)}),Lt(x).on("click.tcajax","body.mfn-ajax-add-to-cart .single_add_to_cart_button:not(.disabled)",function(){var t,e=Lt(this);Bt(e),Rt.ajaxdata.cart=e.closest(".cart"),Rt.ajaxdata.cart.find(".tm-formepo").remove(),(t=Lt("<div class='tm-hidden tm-formepo'></div>")).append(Rt.ajaxdata.epos.tcClone().addClass("formepo")),e.after(t)}),I.on("click.tcajax",".ajax_add_to_cart",function(){Bt(Lt(this)),void 0!==Rt.ajaxdata&&delete Rt.ajaxdata}),I.on("click.tcajax",".single_add_to_cart_button",function(){v=Lt(this)}),Lt(x.body).on("added_to_cart",function(){Rt.ajaxbuttondata&&Rt.ajaxbutton instanceof Lt&&(Rt.ajaxbutton.removeData(),Rt.ajaxbutton.data(Rt.ajaxbuttondata))}),Lt(function(){Mt=Lt.epoAPI.applyFilter("tc_api",Mt),Qt.on("lazyLoadXToncomplete",function(){Lt(".tm-owl-slider").toArray().forEach(function(t){Lt(t).trigger("refresh.owl.carousel")})}),Qt.on("tc_init_epo_plugin",function(t){Nt()}),Qt.on("tcShowLastError",function(){P.console.log(b)}),Lt.ajaxPrefilter(function(e,a){var t,i,o,r,c,n,l,d,p,s=!1,m=!1,_={};if("yes"===Rt.tm_epo_enable_in_shop&&(p=e.url.split("?"))&&1<=p.length&&(p=p[1])){for(t=p.split("&"),i=0;i<t.length;i+=1)1<=(o=t[i].split("=")).length&&o[0]&&o[1]&&"wc-ajax"===o[0]&&"add_to_cart"===o[1]&&(s=!0);s&&(e.originalsuccess=e.success,e.success=function(t){t&&t.error&&t.product_url?(f&&1===f.length&&(r=f),(r=Lt(".ajax_add_to_cart[data-product_id='"+a.data.product_id+"']")).removeClass("added"),r.removeClass("loading")):e.originalsuccess.call(null,t)})}FormData&&a.data&&(p=a.data,"object"==typeof(p="string"==typeof a.data?Lt.epoAPI.util.parseParams(a.data):p)[0]&&(p.forEach(function(t){_[t.name]=t.value}),p=_),c=[],a.url&&a.url.indexOf&&(c=Lt.epoAPI.util.parseParams(a.url.slice(a.url.indexOf("?")+1))),"quantity"in p&&p.tcaddtocart&&(p.product_id||p["add-to-cart"]||c.product_id||c["add-to-cart"])?(m=!0,n=p.tcaddtocart):Array.isArray(p)&&(m=p.some(function(t){return"quantity"===t.name})&&p.some(function(t){return"add-to-cart"===t.name})&&p.some(function(t){return"tcaddtocart"===t.name}),n=!!(n=p.find(function(t){return"tcaddtocart"===t.name}))&&n.value),m)&&1===(c=1<(c=f&&1===f.length&&1===f.closest(".tm-has-options").length?f.closest(".tm-has-options").find(Mt.epoSelector+".tm-product-id-"+n):Lt(Mt.epoSelector+".tm-product-id-"+n)).length?c.filter(".formepo")?c.filter(".formepo"):c.first():c).length&&(m={tcajax:1,tcaddtocart:n,cpf_product_price:(p=Lt(".tc-totals-form.tm-product-id-"+n)).find(".cpf-product-price").val(),dynamic_product_price:p.find(".cpf-dynamic-product-price").val(),override_product_price:p.find(".cpf-override-product-price").val()},(n=p.find(".tc_form_prefix").val())&&(m.tc_form_prefix=n),l=Lt.epoAPI.util.parseParams(e.data,!0),l=Lt.extend(l,c.tcSerializeObject(),m),d=new FormData,Object.keys(l).forEach(function(t){t&&d.append(t,l[t])}),c.find(":file").toArray().forEach(function(t){for(i=0;i<Lt(t)[0].files.length;i++)t.multiple||d.delete(Lt(t).attr("name")),d.append(Lt(t).attr("name"),Lt(t)[0].files[i])}),e.data=d,e.contentType=!1,e.cache=!1,e.processData=!1)}),E.ajaxSuccess(function(t,e,r){var a,c,n,l,d,p,s,m,_,f=Rt.quickview_array||"null",i=Rt.quickview_container||"null",o={},u=1;if(void 0!==Rt.ajaxdata&&(Rt.ajaxdata.cart.find(".tm-formepo").remove(),delete Rt.ajaxdata),"wc_epo_get_associated_product_html"!==(s=Lt.epoAPI.util.parseParams(r.data)).action){for(a in Lt(".tm-formepo-normal").remove(),Lt(".tm-formepo").remove(),Lt(".tm-cart-link").tmpoplink(),f=Lt.epoAPI.util.parseJSON(f),i=Lt.epoAPI.util.parseJSON(i))Object.prototype.hasOwnProperty.call(i,a)&&(o[i[a][0]]=Lt(i[a][1]));Lt.extend(f,o),m=function(){var e=!1;return Object.keys(f).forEach(function(t){Lt(f[t]).length&&(e=t)}),e},(_=function(t){var e,i,a=requestAnimationFrame(function(){setTimeout(function(){_(t-1)},200)}),o=m();if((o||0===t)&&(cancelAnimationFrame(a),o)){if(d=!1,1<(c=1<(c=Lt(f[o])).length&&v&&v.length?v.closest(f[o]):c).length&&"quickview_pro"!==o)return!0;if("woothemes_quick_view"===o&&c.is(".fusion-woocommerce-quick-view-container"))return!0;if("fusion_quick_view_load"===o&&0===c.find(Mt.epoSelector).length)return!0;if("woodmart_quick_shop"===o&&"woodmart_quick_shop"===(s=Lt.epoAPI.util.parseParams(r.url)).action&&(p=Lt(Lt.epoAPI.util.escapeSelector(f[o]+".post-"+s.id))).length&&(c=p,d=!0),"woodmart_quick_view"===o&&"woodmart_quick_view"===(s=Lt.epoAPI.util.parseParams(r.url)).action&&(p=Lt(Lt.epoAPI.util.escapeSelector(f[o]+".post-"+s.id))).length&&(c=p,d=!0),"quickview_pro"===o&&(s=r.url.split("/")).length&&(p=Lt(Lt.epoAPI.util.escapeSelector(f[o]+" .post-"+s[s.length-1]))).length&&(c=p,d=!0),"exwoofood_booking_info"!==o&&"wqv_popup_content"!==o&&"wp_food"!==o&&"jet_popup_get_content"!==o||(d=!0),"woofood"===o&&r.data&&"woofood_quickview_ajax"===(s=Lt.epoAPI.util.parseParams(r.data)).action&&(p=c.find("form").parent()).length&&(c=p,d=!0),0===c.find(".product").length&&c.is(".product")&&(d=!0),0<c.find(".product").length||d){if(c.removeClass("tc-init"),"fusion_quick_view_load"!==o&&"jet_popup_get_content"!==o&&"wp_food"!==o&&"woodmart_quick_shop"!==o&&"woodmart_quick_view"!==o&&"lightboxpro"!==o&&"jckqv_quick_view"!==o&&"yith_quick_view"!==o&&"theme_flatsome"!==o||(y=!0),1<(g=c).length){for(;1<g.length&&0!==(g=g.filter(function(){return 0<Lt(this).find(Mt.epoSelector).length})).length;);if(0===g.length)return setTimeout(function(){_(10)},1e3),!0}if(0===(e=g.find(Mt.epoSelector)).length)return delete f[o],_(10),!0;"fusion_quick_view_load"===o&&(u=1400),(i=function(t){setTimeout(function(){n=e.attr("data-product-id"),l=e.attr("data-epo-id"),"woodmart_quick_shop"===o&&c.addClass("has-options"),Mt.getElementFromFieldCache=[],h(g,!0,n,l,void 0,void 0,t),Qt.trigger("tmlazy"),Qt.trigger("tm_epo_loaded_quickview"),Lt.jMaskGlobals&&g.find(Lt.jMaskGlobals.maskElements).toArray().forEach(function(t){(t=Lt(t)).attr("data-mask")&&t.mask(t.attr("data-mask"))})},u)})(),"minimog_product_quick_view"===o&&Lt(".minimog-product").on("click",".quick-view-btn",function(t){var e=Lt(this),a=e.data("pid"),a=I.children("#modal-quick-view-product-"+a);t.preventDefault(),t.stopPropagation(),e.hasClass("loading")||Lt.fn.MinimogModal&&0<a.length&&(g=Lt(".modal-quick-view-popup"),i(!0))})}}})(10)}}),Nt(),Lt(".tm-cart-link").tmpoplink(),I.on("updated_checkout wc_fragments_loaded wc_fragments_refreshed wc_fragment_refresh",function(){Lt(".tm-cart-link").tmpoplink()}),Qt.trigger("tmlazy"),Qt.trigger("tm_epo_loaded")}),I.on("updated_checkout updated_cart_totals",function(){t()}),t(),Lt(function(){var t=navigator.userAgent||navigator.vendor||P.opera;(t=-1<t.indexOf("FBAN")||-1<t.indexOf("FBAV")||-1<t.indexOf("Instagram"))&&Lt(".tmcp-upload").removeAttr("accept"),E.on("click",".quantity .jckqv-qty-spinner, .quantity .ui-spinner-button",function(){Lt(this).closest(".quantity").find(Mt.qtySelector).trigger("change")}),Lt(x).on("click",".tm-quantity .tc-qty-button, .tm-quantity-alt .tc-qty-button",function(){var t=Lt(this).closest(".tm-quantity, .tm-quantity-alt").find(".tm-qty, .tm-qty-alt"),e=parseFloat(t.val()),a=parseFloat(t.attr("max")),i=parseFloat(t.attr("min")),o=parseFloat(t.attr("step"));isNaN(o)&&(o=1),Lt(this).is(".plus")?!isNaN(a)&&a<=e?t.val(a):t.val(e+o):!isNaN(i)&&e<=i?t.val(i):0<e&&t.val(e-o),Lt(this).closest(".tm-quantity, .tm-quantity-alt").find("input.tm-qty, input.tm-qty-alt").trigger("change")}),Lt("#wholesale_form").on("submit",function(){var t=Lt("form.cart").find(Mt.addToCartSelector).val(),e=Lt(Mt.epoSelector+".tm-cart-main[data-product-id='"+t+"']").tcClone(),t=Lt(".tm-totals-form-main[data-product-id='"+t+"']").tcClone(),a=Lt("<div class='tm-hidden tm-formepo'></div>");return a.append(e),a.append(t),Lt(this).append(a),!0}),E.on("click","#add_to_quote",function(t){var e,a;Rt&&"yes"===Rt.tm_epo_global_enable_validation&&(e=Lt(this).parents("form"),a=parseInt(e.find(".tm-epo-counter").val(),10),a=Lt(Mt.epoSelector+"[data-epo-id='"+a+"']"),"yes"===Rt.tm_epo_global_enable_validation)&&Lt.tc_validator&&0<e.length&&0<a.length&&!e.tc_validate().form()&&t.stopImmediatePropagation()}),Lt(".single_add_to_cart_button.paypal_checkout_button").on("click",function(t){var e=Lt(".cart");e.data("tc_validator")&&e.data("tc_validator").errorList&&t.stopImmediatePropagation()}),Lt(".wc-product-table").on("init.wcpt",function(t,e){e.$table.find(Mt.epoSelector).addClass("hidden"),e.$table.find("thead tr").append("<th>&nbsp;</th>"),setTimeout(function(){e.$table.find(".cart:not(.cart_group)").toArray().forEach(function(t){var t=Lt(t).find(Mt.epoSelector),e=t.closest("tr");Lt("<td class='wc-product-table-epo'></td>").appendTo(e).append(t),Lt(P).trigger("tc_manual_init",t),t.removeClass("hidden")})},500)}),Lt(".generate-product-link").on("click",function(t){var e,a,i,o=new URL(P.location.href),r=o.searchParams,c={};t.preventDefault(),Lt(Mt.epoSelector+":visible").find(".tm-epo-field:enabled").each(function(){var t,e=this.name;if("radio"===this.type){if(c[e])return;c[e]=!0,t=(t=Lt(Mt.epoSelector+":visible").find('.tm-epo-field[name="'+e+'"]:checked')).length?t.val():""}else t="checkbox"===this.type?this.checked?this.value:"":Lt(this).val();e&&""!==t&&r.set(e,t),""===t&&r.delete(e)});for([a,i]of r.entries())""===i&&r.delete(a);e=o.toString(),history.replaceState(null,null,e),navigator.clipboard.writeText(e).then(function(){P.alert("Link copied to clipboard:\n"+e)}).catch(function(t){P.console.error("Could not copy: ",t)})})}))}(window,document,window.jQuery);